{"version":3,"sources":["index.js"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length","1","module","_interopRequireDefault","obj","__esModule","default","attachCalloutBoxToDom","_ref","selector","expandable","onAnimationFrame","_jquery2","each","el","labelHtml","find","html","bodyHtml","titleHtml","isFaded","hasClass","_reactDom2","render","_react2","createElement","CalloutBox","fade","Object","defineProperty","value","_react","_reactDom","_jquery","_classnames","_classnames2","_initNav","createClass","displayName","propTypes","PropTypes","string","bool","func","getDefaultProps","getInitialState","isOpen","componentDidMount","body","this","refs","css","display","state","props","height","componentDidUpdate","prevProps","prevState","$body","hide","slideDown","progress","animate","scrollBodyTo","offset","top","_$body","show","handleToggleClick","setState","_props","calloutBoxClasses","is-expanded","className","ref","dangerouslySetInnerHTML","__html","onClick","../page/initNav.js","classnames","jquery","react","react-dom","2","_interopRequireWildcard","newObj","key","prototype","hasOwnProperty","_defineProperty","enumerable","configurable","writable","_ramda","_ramda2","_munchSlopeChartData2","_munchSlopeChartData3","_core","core","_React$PropTypes","shape","object","filters","name","padding","data","cleanData","indicators","locations","selectedIndicatorId","overallIndicatorIds","leftLocations","rightLocations","locationsData","hoveredLocationId","selectedFilter","shouldRecalculateLines","svgWidth","componentWillMount","componentWillReceiveProps","forceUpdate","window","addEventListener","calculateLineData","componentWillUnmount","removeEventListener","nextProps","munchIndicatorData","_ref$data","undefined","_ref$selectedIndicato","_munchSlopeChartData","nextState","_this","svg","width","lowestLocation","Math","max","apply","values","map","left","position","svgHeight","locationsDataWithLineData","location","centerY","leftY","orderData","drawLineFromId","rightY","right","leftRank","years","rank","rightRank","color","assign","lineData","saveLocationRef","side","locationId","handleLocationHover","handleMedicaidChange","event","target","checked","handleIndicatorChange","handleMouseMove","_state","svgOffset","y","pageY","x","pageX","closest","keys","reduce","id","slope","lineY","distance","abs","Infinity","drawTick","leftOrRight","_state2","isHovered","getLineVal","d","xStart","xEnd","offsetIncrement","yOffset","tieOffset","isSingle","hasTiedBefore","transform","fill","stroke","strokeWidth","style","shapeRendering","_this2","_state3","isRankDimmed","hoveredLocation","isLocationDimmed","yearIndex","leftOrRightToIndex","thisRank","hoveredRank","medicaidExpansion","curveOffset","sortByHoveredLocationFirst","onChange","shortName","type","leftDiv","locationClasses","is-location-dimmed","is-rank-dimmed","is-hovered","is-last-in-group","isLastInGroup","is-first-in-group","isFirstInGroup","has-tied-before","has-tied-after","hasTiedAfter","is-tied","isTied","is-single","abbreviation","onMouseEnter","bind","onMouseLeave","onMouseMove","compose","sortBy","opacity","is-hidden","../../data/core.js","./munchSlopeChartData.js","ramda","3","munchSlopeChartData","not","contains","console","error","states","filter","notUsLocation","getIndicatorData","getRankChange","locationData","compareRank","_compare","compare","ascending","processLocations","prop","sort","areSameRank","curry","locationId1","locationId2","l1","l2","rank1","rank2","getOrderData","orderedStates","findTopTiedId","j","currentLocationId","previousLocationId","index","findIndex","equals","firstIndexOfRank","change","merge","_d","../../data/compare.js","d3","4","descending","composeComparators","comparators","b","prevResult","c","lt","gt","compareOp","comparator","./core.js","5","formatNumberWithCommas","toString","replace","calculateDifferenceDescription","_d2","min","diffRate","round","indicatorHasHistoricalData","formatValue","latestYearValue","getData","getChangeStatus","overallIndicatorChangeStatus","getChange","getOverallIndicatorChange","dataPointOrderByStatus","status","statusOrder","directionCorrectedPercentChange","magnitudeOfChange","hasChangeData","isUsLocation","lowerIsBetter","isNotOverallIndicator","isOverallIndicator","dimensionNames","ACCESS","QUALITY","USE","LIVES","ind","complement","direction","propEq","dp","isNil","delta","worse","steady","improved","__","year","sup","dataType","any","6","_initPage","_initPage2","_locationOverall","_locationOverall2","_indicatorOverall","_common","_typeAhead","_SlopeChart","_SlopeChart2","_loadVizData","loadVizData","then","json","zips","document","querySelector","locationOverallSelector","locationOverall","onUnlock","locationOverallTypeAhead","setValue","resize$","onValue","setWidth","createTypeAhead","zipHrrSource","hrr","setActiveLocation","reflow$","emit","removeClass","./components/SlopeChart/SlopeChart.jsx","./page/common.js","./page/initPage.js","./page/typeAhead.js","./sniff.min.js","./viz/indicator-overall.js","./viz/loadVizData.js","./viz/location-overall.js","7","emitter","stream","_kefir2","_emitter","end","emitEvent","setName","_kefir","kefir","8","addBreakpointHandlers","_ref$onLarge","onLarge","_ref$onMedium","onMedium","_ref$onSmall","onSmall","windowWidth$","BREAKPOINT_SMALL","BREAKPOINT_MEDIUM","toPropertyFromResize","skipDuplicates","./common.js","9","fn","toProperty","createPositionStream","element","parent","parentNode","measureElement","elementBB","getBoundingClientRect","pageYOffset","elementMeasures$","measureParent","parentBB","pageXOffset","bottom","vizOnLeft","parentMeasures$","position$","combine","scroll$","scroll","elementMeasures","parentMeasures","_KefirEmitter","_KefirEmitter2","fromEvents","./Kefir.emitter.js","10","createModal","handleKeyPress","which","charCode","keyCode","removeModal","finish","$popup","outerWidth","outerHeight","aspectRatio","$background","addClass","$html","images","on","remove","off","_ref$html","stopPropagation","$xDiv","append","11","createPopup","initialState","newState","handleClickAway","inPopup","removePopup","escListener","hidePopup","isHidden","triangle","title","flipToContain","$content","$titleDiv","offsets","_calculatePopupOffsets2","popup","get","triangleSize","$triangleDiv","popupTop","popupLeft","match","join","triangleSide","toggleClass","triangleOffset","container","closeBtn","pointer-events","_calculatePopupOffsets","extend","easing","easeInOutCubic","../utils/calculatePopupOffsets.js","12","measureNav","attachStickyWatcherToNav","unStickIt","toggleStickyNav","isSticky$","filterBy","_ref2","pm","em","shouldFix","getChapterPositions","chapters","chapter","attr","initNav","_attachStickyWatcherT","navHeight$","preventDefault","scrollTo","_ref3","_ref4","_slicedToArray","navHeight","isSticky","duration","arguments","stop","scrollTop","_addBreakpointHandlers2","chapterPositions$","_ref5","_ref6","chapterPositions","currentChapter","hrefId","sliceIterator","arr","_arr","_n","_e","_s","_i","Symbol","iterator","next","done","push","err","Array","isArray","TypeError","_addBreakpointHandlers","./addBreakpointHandlers.js","13","initPage","sizeNonStickyVizBox","$el","sizeNonStickyBoxes","toggleStickies","enable","max-width","margin","toggleFns","forEach","toggle","_CalloutBox","scorecardUrl","text","encodeURIComponent","summary","modal","_createModal2","footnote","trigger","positionInWindow","windowHeight","showOnTop","popupConfig","_createPopup2","_initNav2","viz","_initStickyViz2","topOffset$","ready","url","_initStickyViz","_createPopup","_createModal","../components/CalloutBox.jsx","./createModal.js","./createPopup.js","./initNav.js","./initStickyViz.js","14","initStickyViz","max-height","toggleVizSticky","shouldUpdate$","maxVizHeight$","topOffset","maxHeight","STICKY_PADDING","above","below","fixed","textWidthPercentage","VIZ_WIDTH","textWidthAbsolute","innerHeight","maxVizHeight","15","simpleSource","accessor","options","q","cb","testOption","test","RegExp","hrrs","normalMatch","zipMatch","labelKey","source","handleSelected","handleTouchAway","closeTypeahead","blur","typeaheadValue","typeahead","hint","highlight","minLength","displayKey","limit","suggestion","dataset","val","typeahead.js","16","sniff","verzApp","version","browserType","browserVersion","mobile","browserVersionExtended","navigator","userAgent","appName","toLowerCase","indexOf","split","m","appVersion","parseInt","documentElement","classList","add","17","calculatePopupOffsets","_ref$offset","_ref$triangle","_ref$flipToContain","offsetWidth","offsetHeight","parentWidth","clientWidth","parentHeight","popupOnTop","popupOnBottom","popupOnLeft","popupOnRight","realTop","realLeft","overflow","18","collapsibleScale","locHeight","loc","activeLoc","domain","locationHeight","getPosition","activeLocId","accum","locId","reduced","update","positions","indexBy","identity","self","range","last","activeLocationHeight","totalHeight","rangeTop","head","rangeMiddle","rangeBottom","19","moveToFront","selection","appendChild","moveToBack","firstChild","insertBefore","20","createLocationOverall","changeEndPoints","groups","groupBy","indId","bars","selectBar","parentData","select","datum","indicator","yPosition","xPadding","targetBar","transition","showPopUp","xScale","deselectBar","selectAll","hidePopUp","overallData","transformRawData","span","indicatorName","mostImprovedLocationsIndex","mostImprovedLocationsComparator","nameComparator","overallImprovementComparator","endPoints","dimensionGroups","rootElement","dimensionGroupsEnter","enter","exit","selectedDimension","isSelected","afterSlide","slideUp","indicatorGroups","g","indicatorEnter","class","steadySpacing","hoverBars","point","locationCount","description","note","compareStatus","compareChangeMagnitude","changePct","compareHasChange","hasChange","compareStatusThenChangeMagnitude","overallSummaryForIndicator","_reselect","createSelector","dimension","scale","linear","../data/compare.js","../data/core.js","../page/createPopup.js","reselect","21","loadZipCodeData","Promise","resolve","reject","_d3","csv","zipCodeEndpoint","row","zip","rows","jsonPromises","endpoints","fetch","response","all","jsons","_jsons","22","lock","activeLocationId","handleTouchAwayLocation","overallSummaryForLocation","statusKeys","statuses","acc","statusKey","indicatorCount","nextTally","tally","concat","sortedIndicators","getStatusIndex","yScale","_collapsibleScale2","vizWidth","vizHeight","locationLineHeight","locationDotRadius","locationDotArea","locationXScale","columnIsExpanding","findLocationAtMouse","mouse","bisect","locationGroups","locationLines","activeLocationGroup","empty","closeButton","xPath","label","indicatorDots","activeLocationDot","activeIndicatorId","activeData","indicatorXScale","rangeBands","dotHeight","positionDot","active","rangeBand","classed","indicatorDotHoverZone","indAtMouse","node","findIndicatorNode","_d3Extensions","formatter","longName","handleTouchAwayPopup","clickIsInActiveLocation","clearLock","defs","ordinal","locationName","improvedIndicators","improvedIndicatorsComparator","_collapsibleScale","./collapsibleScale.js","./d3Extensions.js"],"mappings":"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","file":"index-generated.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.attachCalloutBoxToDom = attachCalloutBoxToDom;\n\nvar _react = require(\"react\");\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactDom = require(\"react-dom\");\n\nvar _reactDom2 = _interopRequireDefault(_reactDom);\n\nvar _jquery = require(\"jquery\");\n\nvar _jquery2 = _interopRequireDefault(_jquery);\n\nvar _classnames = require(\"classnames\");\n\nvar _classnames2 = _interopRequireDefault(_classnames);\n\nvar _initNav = require(\"../page/initNav.js\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar CalloutBox = _react2.default.createClass({\n    displayName: \"CalloutBox\",\n\n\n    propTypes: {\n        titleHtml: _react.PropTypes.string,\n        bodyHtml: _react.PropTypes.string,\n        labelHtml: _react.PropTypes.string,\n        expandable: _react.PropTypes.bool,\n        fade: _react.PropTypes.bool,\n        onAnimationFrame: _react.PropTypes.func\n    },\n\n    getDefaultProps: function getDefaultProps() {\n        return {\n            labelHtml: _react2.default.createElement(\n                \"h2\",\n                null,\n                \"Expandable Box\"\n            ),\n            titleHtml: \"\",\n            bodyHtml: \"\",\n            expandable: true,\n            onAnimationFrame: function onAnimationFrame() {}\n        };\n    },\n    getInitialState: function getInitialState() {\n        return {\n            isOpen: false\n        };\n    },\n\n\n    // on mount, hide/show the body immediately\n    // (we can't do this in render because we need to animate it when the user\n    // clicks the toggle button)\n    componentDidMount: function componentDidMount() {\n        var body = (0, _jquery2.default)(this.refs[\"body\"]);\n        (0, _jquery2.default)(body).css({ display: this.state.isOpen || !this.props.expandable || this.props.fade ? \"block\" : \"none\" });\n        if (this.props.fade) {\n            (0, _jquery2.default)(body).css({ height: \"100px\" });\n        }\n    },\n    componentDidUpdate: function componentDidUpdate(prevProps, prevState) {\n        // if the isOpen state changed\n        if (prevState.isOpen !== this.state.isOpen) {\n\n            var $body = (0, _jquery2.default)(this.refs[\"body\"]);\n\n            // slide the body up or down\n            if (!this.state.isOpen) {\n                $body.animate({ height: this.props.fade ? \"100px\" : \"0px\" }, { progress: this.props.onAnimationFrame });\n            } else {\n                $body.css(\"height\", \"auto\").hide().slideDown({ progress: this.props.onAnimationFrame });\n            }\n\n            // scroll the body to the top of the box when it collapses\n            (0, _initNav.scrollBodyTo)((0, _jquery2.default)(this.refs[\"container\"]).offset().top - 16, 400);\n        }\n\n        if (this.props.expandable === false) {\n            var _$body = (0, _jquery2.default)(this.refs[\"body\"]);\n            _$body.show();\n        }\n    },\n    handleToggleClick: function handleToggleClick() {\n        this.setState({ isOpen: !this.state.isOpen });\n    },\n    render: function render() {\n        var _props = this.props,\n            bodyHtml = _props.bodyHtml,\n            titleHtml = _props.titleHtml,\n            labelHtml = _props.labelHtml,\n            expandable = _props.expandable;\n        var isOpen = this.state.isOpen;\n\n\n        var calloutBoxClasses = (0, _classnames2.default)(\"callout-box\", {\n            \"is-expanded\": isOpen\n        });\n\n        return _react2.default.createElement(\n            \"div\",\n            { className: calloutBoxClasses, ref: \"container\" },\n            _react2.default.createElement(\n                \"div\",\n                { className: \"callout-box__label-wrapper\" },\n                _react2.default.createElement(\"div\", { className: \"callout-box__label\", dangerouslySetInnerHTML: { __html: labelHtml } })\n            ),\n            titleHtml && _react2.default.createElement(\"div\", { className: \"callout-box__title\", dangerouslySetInnerHTML: { __html: titleHtml } }),\n            _react2.default.createElement(\"div\", { className: \"callout-box__body\", dangerouslySetInnerHTML: { __html: bodyHtml }, ref: \"body\" }),\n            // expand collapse button\n            expandable && _react2.default.createElement(\n                \"div\",\n                { className: \"callout-box__toggle\", onClick: this.handleToggleClick },\n                isOpen ? \"Close\" : \"Expand\"\n            )\n        );\n    }\n});\n\nexports.default = CalloutBox;\n\n/**\r\n * grab the callout boxes in the dom and attach the react component\r\n * @param  {String} selector: jquery selector to find each element to attach to\r\n * @param  {Function} onAnimationFrame: function to be called on each tick while expanding/collapsing\r\n * @return {Nothing}\r\n *\r\n *  Example DOM structure\r\n *  <div class=\"js-expandable-box\" [data-label=\"This is optional\"]>\r\n *      <div class=\"js-title\">Chicagos South Side: Identifying Community Assets and Priorities to Study and Improve Urban Health</div>\r\n *      <div class=\"js-body\">Suspendisse ex est, dapibus in commodo eget, <strong>pretium a enim.</strong> Nunc consequat nisl et sodales feugiat. Donec quis vulputate metus. Integer cursus lectus leo, in feugiat odio tincidunt et. Aliquam quam justo, efficitur id mi elementum, tempus fermentum ex. Sed vitae lacus aliquam, viverra velit vitae, egestas nulla. Morbi lobortis odio quis gravida hendrerit. Phasellus gravida, felis a posuere vestibulum, eros ipsum pellentesque velit, eu ornare eros tellus sed dolor. Nunc vitae bibendum nibh. Praesent lacinia augue ac lectus eleifend faucibus. Suspendisse ex est, dapibus in commodo eget, pretium a enim. Nunc consequat nisl et sodales feugiat. Donec quis vulputate metus. Integer cursus lectus leo, in feugiat odio tincidunt et. Aliquam quam justo, efficitur id mi elementum, tempus fermentum ex. Sed vitae lacus aliquam, viverra velit vitae, egestas nulla. Morbi lobortis odio quis gravida hendrerit. Phasellus gravida, felis a posuere vestibulum, eros ipsum pellentesque velit, eu ornare eros tellus sed dolor. Nunc vitae bibendum nibh. Praesent lacinia augue ac lectus eleifend faucibus. </div>\r\n *  </div>\r\n */\n\nfunction attachCalloutBoxToDom(_ref) {\n    var selector = _ref.selector,\n        expandable = _ref.expandable,\n        onAnimationFrame = _ref.onAnimationFrame;\n\n\n    (0, _jquery2.default)(selector).each(function (i, el) {\n\n        var labelHtml = (0, _jquery2.default)(el).find(\".js-label\").html() || \"\";\n        var bodyHtml = (0, _jquery2.default)(el).find(\".js-body\").html() || \"\";\n        var titleHtml = (0, _jquery2.default)(el).find(\".js-title\").html() || \"\";\n        var isFaded = (0, _jquery2.default)(el).hasClass(\"fade\");\n\n        _reactDom2.default.render(_react2.default.createElement(CalloutBox, {\n            titleHtml: titleHtml,\n            bodyHtml: bodyHtml,\n            labelHtml: labelHtml,\n            expandable: expandable,\n            fade: isFaded,\n            onAnimationFrame: onAnimationFrame\n        }), el);\n    });\n}\n\n},{\"../page/initNav.js\":12,\"classnames\":\"classnames\",\"jquery\":\"jquery\",\"react\":\"react\",\"react-dom\":\"react-dom\"}],2:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _react = require(\"react\");\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _jquery = require(\"jquery\");\n\nvar _jquery2 = _interopRequireDefault(_jquery);\n\nvar _ramda = require(\"ramda\");\n\nvar _ramda2 = _interopRequireDefault(_ramda);\n\nvar _classnames = require(\"classnames\");\n\nvar _classnames2 = _interopRequireDefault(_classnames);\n\nvar _munchSlopeChartData2 = require(\"./munchSlopeChartData.js\");\n\nvar _munchSlopeChartData3 = _interopRequireDefault(_munchSlopeChartData2);\n\nvar _core = require(\"../../data/core.js\");\n\nvar core = _interopRequireWildcard(_core);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nvar _React$PropTypes = _react2.default.PropTypes,\n    shape = _React$PropTypes.shape,\n    object = _React$PropTypes.object;\n\n\nvar filters = [{ name: \"All\", value: \"all\" }, { name: \"Medicaid Expanded\", value: \"med-exp\" }, { name: \"Upward\", value: \"upward\" }, { name: \"Downward\", value: \"downward\" }];\n\nvar padding = 20;\n\nexports.default = _react2.default.createClass({\n    displayName: \"SlopeChart\",\n\n\n    propTypes: {\n        data: shape({\n            cleanData: object,\n            indicators: object,\n            locations: object\n        })\n    },\n\n    getInitialState: function getInitialState() {\n        return {\n            selectedIndicatorId: core.overallIndicatorIds[0], // overall, etc\n            leftLocations: [],\n            rightLocations: [],\n            locationsData: {},\n            hoveredLocationId: null,\n            selectedFilter: filters[0].value,\n\n            // a flag to tell when something has changed that requires the svg lines to be recalculated\n            // we'll use this to re-render the svg lines *only* once afterward\n            shouldRecalculateLines: false,\n            svgWidth: 0 // measured from DOM\n        };\n    },\n    componentWillMount: function componentWillMount() {\n        this.componentWillReceiveProps(this.props);\n    },\n    componentDidMount: function componentDidMount() {\n        // re-render so the refs are populated\n        this.forceUpdate();\n\n        window.addEventListener(\"resize\", this.calculateLineData);\n\n        // Sometimes scroll bars pop in and out and we need to recalculate the positions\n        window.addEventListener(\"scroll\", this.calculateLineData);\n    },\n    componentWillUnmount: function componentWillUnmount() {\n        window.removeEventListener(\"resize\", this.calculateLineData);\n        window.removeEventListener(\"scroll\", this.calculateLineData);\n    },\n    componentWillReceiveProps: function componentWillReceiveProps(nextProps) {\n        this.munchIndicatorData({ data: nextProps.data });\n    },\n    componentDidUpdate: function componentDidUpdate(prevProps, prevState) {\n\n        // calculate the svg data if the flag says so\n        if (this.state.shouldRecalculateLines) {\n            this.calculateLineData();\n        }\n    },\n\n\n    /**\r\n     * munch the data and set the state via setState\r\n     * @param {object} obj.data\r\n     *     Defaults to the data in this.props.  Caller can also pass other data (eg. nextData)\r\n     * @param {object} obj.selectedIndicatorId\r\n     *     Defaults to the selectedIndicatorId in this.state.\r\n     *\r\n     */\n    munchIndicatorData: function munchIndicatorData(_ref) {\n        var _ref$data = _ref.data,\n            data = _ref$data === undefined ? this.props.data : _ref$data,\n            _ref$selectedIndicato = _ref.selectedIndicatorId,\n            selectedIndicatorId = _ref$selectedIndicato === undefined ? this.state.selectedIndicatorId : _ref$selectedIndicato;\n\n        var _munchSlopeChartData = (0, _munchSlopeChartData3.default)(data, selectedIndicatorId),\n            leftLocations = _munchSlopeChartData.leftLocations,\n            rightLocations = _munchSlopeChartData.rightLocations,\n            locationsData = _munchSlopeChartData.locationsData;\n\n        // including selectedIndicatorId\n\n\n        var nextState = { leftLocations: leftLocations, rightLocations: rightLocations, locationsData: locationsData, shouldRecalculateLines: true, selectedIndicatorId: selectedIndicatorId };\n\n        this.setState(nextState);\n    },\n\n\n    // lineData calcualted after a render so we can read from the DOM\n    // lineData will be added to each location in this.state.locationsData\n    // used to draw the lines and calculate the closest line to the mouse\n    calculateLineData: function calculateLineData() {\n        var _this = this;\n\n        var svgWidth = !this.svg ? 0 : (0, _jquery2.default)(this.svg).width();\n        var lowestLocation = this.locations ? Math.max.apply(null, _ramda2.default.values(this.locations).map(function (l) {\n            return (0, _jquery2.default)(l.left).position().top;\n        })) : 0;\n        var svgHeight = lowestLocation + 20;\n\n        // R.map because this.state.locationsData is an object\n        var locationsDataWithLineData = _ramda2.default.map(function (location) {\n\n            if (!_this.locations || !_this.svg) {\n                return null;\n            }\n\n            var centerY = function centerY(el) {\n                return el.position().top + el.height() / 2;\n            };\n\n            var leftY = centerY((0, _jquery2.default)(_this.locations[location.data.orderData.left.drawLineFromId].left));\n            var rightY = centerY((0, _jquery2.default)(_this.locations[location.data.orderData.right.drawLineFromId].right));\n\n            var leftRank = location.data.years[0].rank;\n            var rightRank = location.data.years[1].rank;\n\n            var color = leftRank > rightRank ? \"#7c7\" : leftRank < rightRank ? \"#c77\" : \"#999\";\n\n            return Object.assign({}, location, {\n                lineData: { leftY: leftY, rightY: rightY, color: color }\n            });\n        }, this.state.locationsData);\n\n        this.setState({\n            locationsData: locationsDataWithLineData,\n            svgHeight: svgHeight,\n            svgWidth: svgWidth - 2 * padding,\n            shouldRecalculateLines: false\n        });\n    },\n    saveLocationRef: function saveLocationRef(side, locationId, el) {\n\n        if (!el) {\n            return;\n        }\n\n        if (!this.locations) {\n            this.locations = {};\n        }\n\n        this.locations[locationId] = Object.assign({}, this.locations[locationId], _defineProperty({}, side, el));\n    },\n    handleLocationHover: function handleLocationHover(hoveredLocationId) {\n        this.setState({\n            hoveredLocationId: hoveredLocationId\n        });\n    },\n    handleMedicaidChange: function handleMedicaidChange(event) {\n        var selectedFilter = event.target.checked ? \"med-exp\" : \"all\";\n        this.setState({ selectedFilter: selectedFilter });\n    },\n    handleIndicatorChange: function handleIndicatorChange(event) {\n        this.munchIndicatorData({ selectedIndicatorId: event.target.value });\n    },\n    handleMouseMove: function handleMouseMove(e) {\n        var _state = this.state,\n            svgWidth = _state.svgWidth,\n            hoveredLocationId = _state.hoveredLocationId,\n            locationsData = _state.locationsData;\n\n        var svgOffset = (0, _jquery2.default)(this.svg).offset();\n        var y = e.pageY - svgOffset.top;\n        var x = e.pageX - svgOffset.left;\n\n        var closest = Object.keys(locationsData).reduce(function (closest, id) {\n\n            var location = locationsData[id];\n            var lineData = location.lineData;\n\n            // inverse slope because 0 is at the top of the svg\n            var slope = (lineData.rightY - lineData.leftY) / svgWidth;\n\n            // y = mx + b\n            var lineY = slope * x + lineData.leftY;\n            var distance = Math.abs(lineY - y);\n\n            return distance < closest.distance ? { distance: distance, id: location.id } : closest;\n        }, { id: null, distance: Infinity });\n\n        // don't update if it hasn't changed\n        if (closest.id !== hoveredLocationId) {\n            this.setState({\n                hoveredLocationId: closest.id\n            });\n        }\n    },\n    drawTick: function drawTick(locationId, leftOrRight) {\n        var _state2 = this.state,\n            locationsData = _state2.locationsData,\n            hoveredLocationId = _state2.hoveredLocationId;\n\n\n        var location = locationsData[locationId];\n        var lineData = location.lineData;\n\n        // we won't have lineData the first render\n        if (!lineData) {\n            return;\n        }\n\n        var isHovered = location.id === hoveredLocationId;\n        var orderData = leftOrRight === \"left\" ? location.data.orderData.left : location.data.orderData.right;\n\n        var getLineVal = leftOrRight === \"left\" ? function (d) {\n            return d.leftY;\n        } : function (d) {\n            return d.rightY;\n        };\n\n        var xStart = leftOrRight === \"left\" ? -12 : 12;\n        var xEnd = leftOrRight === \"left\" ? -4 : 4;\n\n        var offsetIncrement = (0, _jquery2.default)(this.locations[orderData.drawLineFromId].left).height();\n        var yOffset = orderData.tieOffset * offsetIncrement - offsetIncrement * 1 / 2;\n\n        if (orderData.isSingle || !orderData.hasTiedBefore) {\n            return \"\";\n        }\n\n        return _react2.default.createElement(\"path\", { key: locationId,\n            transform: \"translate(0,\" + getLineVal(lineData) + \")\",\n            d: \"M\" + xStart + \",7 l0,\" + yOffset + \" l\" + xEnd + \",0\",\n            fill: \"none\",\n            stroke: isHovered ? \"#3b3b3b\" : \"#ccc\",\n            strokeWidth: 1,\n            style: {\n                shapeRendering: \"crispEdges\"\n            }\n        });\n    },\n    render: function render() {\n        var _this2 = this;\n\n        var _state3 = this.state,\n            leftLocations = _state3.leftLocations,\n            rightLocations = _state3.rightLocations,\n            locationsData = _state3.locationsData,\n            hoveredLocationId = _state3.hoveredLocationId,\n            svgWidth = _state3.svgWidth,\n            svgHeight = _state3.svgHeight,\n            selectedFilter = _state3.selectedFilter,\n            selectedIndicatorId = _state3.selectedIndicatorId;\n\n\n        var isHovered = function isHovered(location) {\n            return location.id === hoveredLocationId;\n        };\n\n        var isRankDimmed = function isRankDimmed(leftOrRight, location) {\n            var hoveredLocation = locationsData[hoveredLocationId];\n\n            // if there is no hovered location, delegate to isLoactionDimmed\n            if (!hoveredLocation) {\n                return isLocationDimmed(location);\n            }\n\n            var yearIndex = (0, _munchSlopeChartData2.leftOrRightToIndex)(leftOrRight);\n\n            var thisRank = location.data.years[yearIndex].rank;\n            var hoveredRank = hoveredLocation.data.years[yearIndex].rank;\n\n            return thisRank !== hoveredRank;\n        };\n\n        var isLocationDimmed = function isLocationDimmed(location) {\n\n            // we won't have this until the second render\n            if (!location.lineData) {\n                return false;\n            }\n\n            // if something is hovered, this takes precedence\n            if (hoveredLocationId !== null) {\n                return !isHovered(location);\n            }\n\n            var lineData = location.lineData;\n\n            // otherwise, check the filters\n            return (\n                // medicaid expanded only filter\n                selectedFilter === \"med-exp\" && location.medicaidExpansion === false ||\n                // upward filter\n                selectedFilter === \"upward\" && (location.medicaidExpansion === false || lineData.leftY <= lineData.rightY)\n                // downward filter\n                || selectedFilter === \"downward\" && (location.medicaidExpansion === false || lineData.leftY >= lineData.rightY)\n            );\n        };\n\n        var curveOffset = svgWidth * 0.2;\n\n        var sortByHoveredLocationFirst = function sortByHoveredLocationFirst(id) {\n            return id === hoveredLocationId ? 1 : 0;\n        };\n\n        return _react2.default.createElement(\n            \"div\",\n            null,\n            _react2.default.createElement(\n                \"div\",\n                { className: \"slope-chart__indicator-selector\" },\n                _react2.default.createElement(\n                    \"select\",\n                    { name: \"indicator\", value: selectedIndicatorId, onChange: this.handleIndicatorChange },\n                    core.overallIndicatorIds.map(function (id) {\n                        return _react2.default.createElement(\n                            \"option\",\n                            { key: id, value: id },\n                            _this2.props.data.indicators[id].shortName,\n                            \" \"\n                        );\n                    })\n                ),\n                _react2.default.createElement(\n                    \"label\",\n                    { className: \"input-checkbox\" },\n                    _react2.default.createElement(\"input\", { type: \"checkbox\", onChange: this.handleMedicaidChange }),\n                    _react2.default.createElement(\"span\", null),\n                    \" Medicaid Expansion States \",\n                    _react2.default.createElement(\"span\", { className: \"slope-chart__location-dot\" })\n                )\n            ),\n            _react2.default.createElement(\n                \"div\",\n                { className: \"slope-chart\" },\n                _react2.default.createElement(\n                    \"div\",\n                    { className: \"slope-chart__left\", ref: function ref(el) {\n                            return _this2.leftDiv = el;\n                        } },\n                    _react2.default.createElement(\n                        \"div\",\n                        { className: \"slope-chart__column-title\" },\n                        \"Baseline Rank\"\n                    ),\n                    leftLocations.map(function (locationId) {\n                        var location = locationsData[locationId];\n\n                        var locationClasses = (0, _classnames2.default)(\"slope-chart__location\", {\n                            \"is-location-dimmed\": isLocationDimmed(location),\n                            \"is-rank-dimmed\": isRankDimmed(\"left\", location),\n                            \"is-hovered\": isHovered(location),\n                            \"is-last-in-group\": location.data.orderData.left.isLastInGroup,\n                            \"is-first-in-group\": location.data.orderData.left.isFirstInGroup,\n                            \"has-tied-before\": location.data.orderData.left.hasTiedBefore,\n                            \"has-tied-after\": location.data.orderData.left.hasTiedAfter,\n                            \"is-tied\": location.data.orderData.left.isTied,\n                            \"is-single\": location.data.orderData.left.isSingle\n                        });\n\n                        return _react2.default.createElement(\n                            \"div\",\n                            { className: locationClasses,\n                                key: location.abbreviation,\n                                onMouseEnter: _this2.handleLocationHover.bind(null, location.id),\n                                onMouseLeave: _this2.handleLocationHover.bind(null, null),\n                                ref: function ref(el) {\n                                    return _this2.saveLocationRef(\"left\", location.id, el);\n                                } },\n                            _react2.default.createElement(\n                                \"span\",\n                                { className: \"slope-chart__location-text\" },\n                                _react2.default.createElement(\n                                    \"span\",\n                                    { className: \"slope-chart__location-name\" },\n                                    location.name\n                                ),\n                                _react2.default.createElement(\n                                    \"span\",\n                                    { className: \"slope-chart__location-rank\" },\n                                    location.data.years[0].rank\n                                )\n                            )\n                        );\n                    })\n                ),\n                _react2.default.createElement(\n                    \"div\",\n                    { className: \"slope-chart__lines\" },\n                    _react2.default.createElement(\n                        \"svg\",\n                        { height: svgHeight, ref: function ref(el) {\n                                return _this2.svg = el;\n                            }, onMouseMove: this.handleMouseMove, onMouseLeave: this.handleLocationHover.bind(null, null) },\n                        _react2.default.createElement(\n                            \"g\",\n                            { className: \"left-ticks\", transform: \"translate(\" + padding + \", 0)\" },\n                            _ramda2.default.compose(_ramda2.default.map(function (locationId) {\n                                return _this2.drawTick(locationId, \"left\");\n                            }), _ramda2.default.sortBy(sortByHoveredLocationFirst))(leftLocations)\n                        ),\n                        _react2.default.createElement(\n                            \"g\",\n                            { transform: \"translate(\" + padding + \", 0)\" },\n                            leftLocations.map(function (locationId) {\n                                if (!_this2.locations || !_this2.svg) {\n                                    return null;\n                                }\n\n                                var location = locationsData[locationId];\n                                var lineData = location.lineData;\n\n                                // we won't have lineData the first render\n                                if (!lineData) {\n                                    return;\n                                }\n\n                                var opacity = isLocationDimmed(location) ? 0.2 : 1;\n\n                                return _react2.default.createElement(\"path\", {\n                                    key: location.id,\n                                    d: \"\\n                                                M0,\" + lineData.leftY + \"\\n                                                C\" + curveOffset + \",\" + lineData.leftY + \"\\n                                                 \" + (svgWidth - curveOffset) + \",\" + lineData.rightY + \"\\n                                                 \" + svgWidth + \",\" + lineData.rightY,\n                                    stroke: lineData.color,\n                                    strokeWidth: \"2\",\n                                    opacity: opacity,\n                                    fill: \"none\"\n                                });\n                            })\n                        ),\n                        _react2.default.createElement(\n                            \"g\",\n                            { className: \"right-ticks\", transform: \"translate(\" + (svgWidth + padding) + \", 0)\" },\n                            _ramda2.default.compose(_ramda2.default.map(function (locationId) {\n                                return _this2.drawTick(locationId, \"right\");\n                            }), _ramda2.default.sortBy(sortByHoveredLocationFirst))(rightLocations)\n                        )\n                    )\n                ),\n                _react2.default.createElement(\n                    \"div\",\n                    { className: \"slope-chart__right\" },\n                    _react2.default.createElement(\n                        \"div\",\n                        { className: \"slope-chart__column-title\" },\n                        \"2017 Scorecard Rank\"\n                    ),\n                    rightLocations.map(function (locationId) {\n                        var location = locationsData[locationId];\n\n                        var locationClasses = (0, _classnames2.default)(\"slope-chart__location\", {\n                            \"is-location-dimmed\": isLocationDimmed(location),\n                            \"is-rank-dimmed\": isRankDimmed(\"right\", location),\n                            \"is-hovered\": isHovered(location),\n                            \"is-last-in-group\": location.data.orderData.right.isLastInGroup,\n                            \"is-first-in-group\": location.data.orderData.right.isFirstInGroup,\n                            \"has-tied-before\": location.data.orderData.right.hasTiedBefore,\n                            \"has-tied-after\": location.data.orderData.right.hasTiedAfter,\n                            \"is-tied\": location.data.orderData.right.isTied,\n                            \"is-single\": location.data.orderData.right.isSingle\n                        });\n\n                        return _react2.default.createElement(\n                            \"div\",\n                            { className: locationClasses,\n                                key: location.abbreviation,\n                                onMouseEnter: _this2.handleLocationHover.bind(null, location.id),\n                                onMouseLeave: _this2.handleLocationHover.bind(null, null),\n                                ref: function ref(el) {\n                                    return _this2.saveLocationRef(\"right\", location.id, el);\n                                } },\n                            _react2.default.createElement(\n                                \"span\",\n                                { className: \"slope-chart__location-text\" },\n                                _react2.default.createElement(\n                                    \"span\",\n                                    { className: \"slope-chart__location-rank\" },\n                                    location.data.years[1].rank\n                                ),\n                                _react2.default.createElement(\n                                    \"span\",\n                                    { className: \"slope-chart__location-name\" },\n                                    location.name\n                                )\n                            ),\n                            _react2.default.createElement(\"span\", { className: (0, _classnames2.default)(\"slope-chart__location-dot\", {\n                                    \"is-hidden\": !location.medicaidExpansion\n                                }) })\n                        );\n                    })\n                )\n            ),\n            _react2.default.createElement(\n                \"p\",\n                { className: \"note\" },\n                _react2.default.createElement(\"span\", { className: \"slope-chart__location-dot\" }),\n                \" indicates states that expanded Medicaid under the Affordable Care Act as of January 1, 2015.\"\n            )\n        );\n    }\n});\n\n},{\"../../data/core.js\":5,\"./munchSlopeChartData.js\":3,\"classnames\":\"classnames\",\"jquery\":\"jquery\",\"ramda\":\"ramda\",\"react\":\"react\"}],3:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.leftOrRightToIndex = undefined;\nexports.default = munchSlopeChartData;\n\nvar _ramda = require(\"ramda\");\n\nvar _ramda2 = _interopRequireDefault(_ramda);\n\nvar _core = require(\"../../data/core.js\");\n\nvar core = _interopRequireWildcard(_core);\n\nvar _d = require(\"d3\");\n\nvar _d2 = _interopRequireDefault(_d);\n\nvar _compare = require(\"../../data/compare.js\");\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar leftOrRightToIndex = exports.leftOrRightToIndex = function leftOrRightToIndex(leftOrRight) {\n    return leftOrRight === \"left\" ? 0 // location.year[0]\n    : leftOrRight === \"right\" ? 1 // location.year[1]\n    : console.error(\"leftOrRight should be \\\"left\\\" or \\\"right\\\" but was given \" + leftOrRight + \"!\");\n};\n\nfunction munchSlopeChartData(_ref, selectedIndicatorId) {\n    var cleanData = _ref.cleanData,\n        indicators = _ref.indicators,\n        locations = _ref.locations;\n\n\n    /* validate selectedIndicatorId */\n    if (_ramda2.default.not(_ramda2.default.contains(selectedIndicatorId, core.overallIndicatorIds))) {\n        console.error(\"invalid selectedIndicatorId: \", selectedIndicatorId);\n        return;\n    }\n\n    var states = _ramda2.default.filter(core.notUsLocation, locations); // keep only states\n\n\n    /* helper functions */\n\n    // get the selected indicator data for the given location\n    var getIndicatorData = function getIndicatorData(locationId) {\n        return cleanData[selectedIndicatorId][locationId];\n    };\n    var getRankChange = function getRankChange(locationData) {\n        return locationData.years[0].rank - locationData.years[1].rank;\n    };\n\n    /* make arrays of ID's of the left and right ordered by rank */\n\n    // make a compare function for the given year (0 or 1)\n    var compareRank = function compareRank(leftOrRight) {\n        var yearIndex = leftOrRightToIndex(leftOrRight);\n        return (0, _compare.compare)(function (location) {\n            return getIndicatorData(location.id).years[yearIndex].rank;\n        }, _compare.ascending);\n    };\n\n    // @param {String} leftOrRight : \"left\" or \"right\"\n    var processLocations = function processLocations(leftOrRight) {\n        return _ramda2.default.compose(_ramda2.default.map(_ramda2.default.prop(\"id\")), _ramda2.default.sort(compareRank(leftOrRight)), _ramda2.default.values // transform object > array\n        )(states);\n    };\n\n    // make arrays or location IDs ordered by year ranks\n    var leftLocations = processLocations(\"left\");\n\n    var rightLocations = processLocations(\"right\");\n\n    /* munch indicator data to make locationsData */\n\n    /**\r\n     * areSameRank: look at the location before and after to see if they have the same rank\r\n     * @param  {String} leftOrRight : \"left\" or \"right\"\r\n     * @param  {Object} locationId1 : ID of a location\r\n     * @param  {Object} locationId2 : ID of a location\r\n     * @return {Boolean}  True if location1 and location2 have the same rank\r\n     *                     at the given year (leftOrRight)\r\n     */\n    var areSameRank = _ramda2.default.curry(function (leftOrRight, locationId1, locationId2) {\n\n        var l1 = getIndicatorData(locationId1);\n        var l2 = getIndicatorData(locationId2);\n\n        if (!l1 || !l2) {\n            return false;\n        }\n\n        var yearIndex = leftOrRightToIndex(leftOrRight);\n\n        var rank1 = l1.years[yearIndex].rank;\n        var rank2 = l2.years[yearIndex].rank;\n\n        return rank1 === rank2;\n    });\n\n    /**\r\n     *  process the locations for left and right, using the locationsData\r\n     *  @param {Object} location: { id, name, abbreviation, medicaidExpansion }\r\n     *  @return {Array} : arrays of objects like this:\r\n     *  {\r\n     *      hasTiedAfter: Boolean,\r\n     *      hasTiedBefore: Boolean,\r\n     *      drawLineFromId: Number: if this location is tied with one or more above,\r\n     *          this will be the id of that one on top. ie. from where the\r\n     *          line for this location should be drawn\r\n     *  }\r\n     */\n    var getOrderData = function getOrderData(leftOrRight, location) {\n\n        // array of id's either the leftLocations or rightLocations\n        var orderedStates = leftOrRight === \"left\" ? leftLocations : leftOrRight === \"right\" ? rightLocations : console.error(\"leftOrRight should be \\\"left\\\" or \\\"right\\\" but was given \" + leftOrRight + \"!\");\n\n        var findTopTiedId = function findTopTiedId(j) {\n\n            var currentLocationId = orderedStates[j];\n            var previousLocationId = orderedStates[j - 1];\n\n            // if j-1 is a valid index and it's the same rank, recurse\n            if (previousLocationId && areSameRank(leftOrRight, currentLocationId, previousLocationId)) {\n                return findTopTiedId(j - 1);\n            } else {\n                // otherwise, this is the top, return the id\n                return currentLocationId;\n            }\n        };\n\n        var index = _ramda2.default.findIndex(_ramda2.default.equals(location.id), orderedStates);\n        var firstIndexOfRank = _ramda2.default.findIndex(areSameRank(leftOrRight, location.id), orderedStates);\n\n        var hasTiedBefore = areSameRank(leftOrRight, orderedStates[index], orderedStates[index - 1]);\n        var hasTiedAfter = areSameRank(leftOrRight, orderedStates[index], orderedStates[index + 1]);\n        var isLastInGroup = hasTiedBefore && !hasTiedAfter;\n        var isFirstInGroup = !hasTiedBefore && hasTiedAfter;\n        var isTied = hasTiedAfter || hasTiedBefore;\n        var isSingle = !hasTiedAfter && !hasTiedBefore;\n        var tieOffset = index - firstIndexOfRank;\n\n        return {\n            hasTiedBefore: hasTiedBefore, hasTiedAfter: hasTiedAfter, isLastInGroup: isLastInGroup, isFirstInGroup: isFirstInGroup, isTied: isTied, isSingle: isSingle, tieOffset: tieOffset,\n            drawLineFromId: findTopTiedId(index)\n        };\n    };\n\n    // augment the location data\n    var munchIndicatorData = function munchIndicatorData(location) {\n\n        var locationData = getIndicatorData(location.id);\n\n        return {\n            // calculate change in rank\n            change: {\n                rank: getRankChange(locationData)\n            },\n            years: locationData.years,\n            orderData: {\n                left: getOrderData(\"left\", location),\n                right: getOrderData(\"right\", location)\n            }\n        };\n    };\n\n    var locationsData = _ramda2.default.compose(_ramda2.default.map(function (l) {\n        return _ramda2.default.merge(l, { data: munchIndicatorData(l) });\n    }))(states);\n\n    return {\n        leftLocations: leftLocations,\n        rightLocations: rightLocations,\n        locationsData: locationsData\n    };\n}\n\n},{\"../../data/compare.js\":4,\"../../data/core.js\":5,\"d3\":\"d3\",\"ramda\":\"ramda\"}],4:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.compare = exports.descending = exports.ascending = exports.composeComparators = undefined;\n\nvar _ramda = require(\"ramda\");\n\nvar _ramda2 = _interopRequireDefault(_ramda);\n\nvar _core = require(\"./core.js\");\n\nvar core = _interopRequireWildcard(_core);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// Comparators\nvar composeComparators = exports.composeComparators = function composeComparators(comparators) {\n    return function (a, b) {\n        core;\n        return comparators.reduce(function (prevResult, c) {\n            return prevResult !== 0 ? prevResult : c(a, b);\n        }, 0);\n    };\n};\n\nvar ascending = exports.ascending = _ramda2.default.lt;\n\nvar descending = exports.descending = _ramda2.default.gt;\n\nvar compare = exports.compare = _ramda2.default.curry(function (f, compareOp) {\n    return _ramda2.default.comparator(function (a, b) {\n        return compareOp(f(a), f(b));\n    });\n});\n\n},{\"./core.js\":5,\"ramda\":\"ramda\"}],5:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.indicatorHasHistoricalData = exports.formatValue = exports.latestYearValue = exports.getData = exports.getChangeStatus = exports.overallIndicatorChangeStatus = exports.getChange = exports.getOverallIndicatorChange = exports.dataPointOrderByStatus = exports.status = exports.statusOrder = exports.directionCorrectedPercentChange = exports.magnitudeOfChange = exports.hasChangeData = exports.notUsLocation = exports.isUsLocation = exports.lowerIsBetter = exports.isNotOverallIndicator = exports.isOverallIndicator = exports.overallIndicatorIds = exports.dimensionNames = undefined;\nexports.calculateDifferenceDescription = calculateDifferenceDescription;\n\nvar _ramda = require(\"ramda\");\n\nvar _ramda2 = _interopRequireDefault(_ramda);\n\nvar _d = require(\"d3\");\n\nvar _d2 = _interopRequireDefault(_d);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// Dimension\nvar dimensionNames = exports.dimensionNames = {\n    \"ACCESS\": \"Access and Affordability\",\n    \"QUALITY\": \"Prevention and Treatment\",\n    \"USE\": \"Avoidable Hospital Use and Costs\",\n    \"LIVES\": \"Healthy Lives\"\n};\n\n// Indicator\nvar overallIndicatorIds = exports.overallIndicatorIds = [\"OVERALL\", \"a100\", \"q100\", \"u100\", \"h100\"];\n\nvar isOverallIndicator = exports.isOverallIndicator = function isOverallIndicator(ind) {\n    return _ramda2.default.contains(ind.id, overallIndicatorIds);\n};\n\nvar isNotOverallIndicator = exports.isNotOverallIndicator = _ramda2.default.complement(isOverallIndicator);\n\nvar lowerIsBetter = exports.lowerIsBetter = function lowerIsBetter(ind) {\n    return ind.direction === \"Low\";\n};\n\n// Location\n\nvar isUsLocation = exports.isUsLocation = _ramda2.default.propEq(\"id\", 0);\n\nvar notUsLocation = exports.notUsLocation = _ramda2.default.complement(isUsLocation);\n\n// Data point\nvar hasChangeData = exports.hasChangeData = function hasChangeData(dp) {\n    return dp.change && !_ramda2.default.isNil(dp.change.delta);\n};\n\nvar magnitudeOfChange = exports.magnitudeOfChange = function magnitudeOfChange(dp) {\n    return !hasChangeData(dp) ? 0 : Math.abs(dp.change.delta / dp.years[0].value);\n};\n\nvar directionCorrectedPercentChange = exports.directionCorrectedPercentChange = function directionCorrectedPercentChange(ind, dp) {\n    return magnitudeOfChange(dp) * (lowerIsBetter(ind) ? -1 : 1);\n};\n\nvar statusOrder = exports.statusOrder = { \"worse\": 0, \"steady\": 1, \"improved\": 2 };\n\nvar status = exports.status = function status(dp) {\n    return dp.change.improved || \"steady\";\n};\n\nvar dataPointOrderByStatus = exports.dataPointOrderByStatus = _ramda2.default.compose(_ramda2.default.prop(_ramda2.default.__, statusOrder), status);\n\nvar getOverallIndicatorChange = exports.getOverallIndicatorChange = function getOverallIndicatorChange(dp) {\n    return dp.years[0].rank - dp.years[1].rank;\n};\n\nvar getChange = exports.getChange = _ramda2.default.curry(function (ind, dp) {\n    return isOverallIndicator(ind) ? getOverallIndicatorChange(dp) : dp.change.delta;\n});\n\nvar overallIndicatorChangeStatus = exports.overallIndicatorChangeStatus = function overallIndicatorChangeStatus(dp) {\n    var change = getOverallIndicatorChange(dp);\n    return change > 0 ? \"improved\" : change < 0 ? \"worse\" : \"steady\";\n};\n\nvar getChangeStatus = exports.getChangeStatus = _ramda2.default.curry(function (ind, dp) {\n    return isOverallIndicator(ind) ? overallIndicatorChangeStatus(dp) : dp.change.improved;\n});\n\nvar getData = exports.getData = _ramda2.default.curry(function (ind, year, dp) {\n    return isOverallIndicator(ind) ? dp.years[year].rank : dp.years[year].value;\n});\n\nvar latestYearValue = exports.latestYearValue = function latestYearValue(dp) {\n    return dp.years[1].value;\n};\n\nfunction formatNumberWithCommas(x) {\n    return x.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\n}\n\nvar formatValue = exports.formatValue = _ramda2.default.curry(function (ind, value, sup) {\n    if (ind.dataType === \"percent\") {\n        return value + (sup ? \"<sup>%</sup>\" : \"%\");\n    } else if (ind.dataType === \"dollars\") {\n        return (sup ? \"<sup>$</sup>\" : \"$\") + formatNumberWithCommas(value);\n    } else if (ind.dataType === \"rank\") {\n        return (sup ? \"<sup>#</sup>\" : \"#\") + value;\n    } else {\n        return value;\n    }\n});\n\nvar indicatorHasHistoricalData = exports.indicatorHasHistoricalData = _ramda2.default.curry(function (data, ind) {\n    return _ramda2.default.any(function (d) {\n        return !_ramda2.default.isNil(d.years[0].value);\n    }, _ramda2.default.values(data[ind.id]));\n});\n\nfunction calculateDifferenceDescription(data) {\n    var max = _d2.default.max(data),\n        min = _d2.default.min(data);\n\n    var diffRate = max / min;\n\n    if (diffRate < 2) {\n        return Math.round((diffRate - 1) * 100) + \"%\";\n    }\n\n    return Math.round(diffRate) + \"x\";\n}\n\n},{\"d3\":\"d3\",\"ramda\":\"ramda\"}],6:[function(require,module,exports){\n\"use strict\";\n\nvar _jquery = require(\"jquery\");\n\nvar _jquery2 = _interopRequireDefault(_jquery);\n\nvar _react = require(\"react\");\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactDom = require(\"react-dom\");\n\nvar _reactDom2 = _interopRequireDefault(_reactDom);\n\nvar _ramda = require(\"ramda\");\n\nvar _ramda2 = _interopRequireDefault(_ramda);\n\nvar _initPage = require(\"./page/initPage.js\");\n\nvar _initPage2 = _interopRequireDefault(_initPage);\n\nvar _locationOverall = require(\"./viz/location-overall.js\");\n\nvar _locationOverall2 = _interopRequireDefault(_locationOverall);\n\nvar _indicatorOverall = require(\"./viz/indicator-overall.js\");\n\nvar _indicatorOverall2 = _interopRequireDefault(_indicatorOverall);\n\nvar _common = require(\"./page/common.js\");\n\nvar _typeAhead = require(\"./page/typeAhead.js\");\n\nvar _SlopeChart = require(\"./components/SlopeChart/SlopeChart.jsx\");\n\nvar _SlopeChart2 = _interopRequireDefault(_SlopeChart);\n\nrequire(\"./sniff.min.js\");\n\nvar _loadVizData = require(\"./viz/loadVizData.js\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// add's UA info to html class (needed for iPad, see initPage.js)\n(0, _loadVizData.loadVizData)().then(function (json) {\n    var cleanData = json.cleanData,\n        locations = json.locations,\n        indicators = json.indicators,\n        zips = json.zips;\n\n\n    var states = _ramda2.default.filter(function (l) {\n        return l.abbreviation !== \"US\";\n    }, locations);\n\n    /* slope chart */\n    _reactDom2.default.render(_react2.default.createElement(_SlopeChart2.default, { data: { cleanData: cleanData, locations: locations, indicators: indicators } }), document.querySelector(\".js-viz-slope-chart\"));\n\n    /* location overall */\n    var locationOverallSelector = \".js-viz-location-overall\";\n\n    var locationOverall = (0, _locationOverall2.default)({\n        selector: locationOverallSelector,\n        width: (0, _jquery2.default)(locationOverallSelector).width(),\n        height: 550,\n        locations: states, indicators: indicators, cleanData: cleanData,\n        onUnlock: function onUnlock() {\n            // clear the typeahead when the active location is unlocked\n            locationOverallTypeAhead.setValue(\"\");\n        }\n    });\n\n    _common.resize$.onValue(function (e) {\n        locationOverall.setWidth((0, _jquery2.default)(locationOverallSelector).width());\n    });\n\n    // location overall typeahead\n    var locationOverallTypeAhead = (0, _typeAhead.createTypeAhead)(\".js-viz-location-overall__typeahead .typeahead\", \"name\", (0, _typeAhead.zipHrrSource)(states, zips), function (hrr) {\n        locationOverall.setActiveLocation(hrr.id);\n    });\n\n    // after the viz's are done, force a reflow so the sticky's are correct\n    _common.reflow$.emit(\"viz's loaded\");\n});\n\n/** initialize all the page scripts for navigation and sticky vizs, etc **/\n(0, _initPage2.default)();\n\n// cloak hides all the content. now that we've done all our layout crunching,\n// show the content\n(0, _jquery2.default)(\"body\").removeClass(\"cloak\");\n\n},{\"./components/SlopeChart/SlopeChart.jsx\":2,\"./page/common.js\":9,\"./page/initPage.js\":13,\"./page/typeAhead.js\":15,\"./sniff.min.js\":16,\"./viz/indicator-overall.js\":20,\"./viz/loadVizData.js\":21,\"./viz/location-overall.js\":22,\"jquery\":\"jquery\",\"ramda\":\"ramda\",\"react\":\"react\",\"react-dom\":\"react-dom\"}],7:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nexports.default = function () {\n    var emitter;\n    var stream = _kefir2.default.stream(function (_emitter) {\n        emitter = _emitter;\n        return function unsubscribe() {\n            emitter = undefined;\n        };\n    });\n\n    stream.emit = function (x) {\n        emitter && emitter.emit(x);\n        return this;\n    };\n\n    stream.error = function (x) {\n        emitter && emitter.error(x);\n        return this;\n    };\n\n    stream.end = function () {\n        emitter && emitter.end();\n        return this;\n    };\n\n    stream.emitEvent = function (x) {\n        emitter && emitter.emitEvent(x);\n        return this;\n    };\n\n    return stream.setName(\"emitter\");\n};\n\nvar _kefir = require(\"kefir\");\n\nvar _kefir2 = _interopRequireDefault(_kefir);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n},{\"kefir\":\"kefir\"}],8:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = addBreakpointHandlers;\n\nvar _jquery = require(\"jquery\");\n\nvar _jquery2 = _interopRequireDefault(_jquery);\n\nvar _common = require(\"./common.js\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/* NOTE: css has breakpoints in scss/_breakpoints.scss */\n\n// page width\nvar BREAKPOINT_SMALL = 750;\nvar BREAKPOINT_MEDIUM = 900;\n\n// convert the resize$ stream to a stream of width values\nvar windowWidth$ = (0, _common.toPropertyFromResize)(function (e) {\n    return (0, _jquery2.default)(window).width();\n})\n// convert the width to \"small\" or \"large\"\n.map(function (width) {\n    return width < BREAKPOINT_SMALL ? \"small\" : width < BREAKPOINT_MEDIUM ? \"medium\" : \"large\";\n})\n// only emit new values if it's changed\n.skipDuplicates();\n\nfunction addBreakpointHandlers(_ref) {\n    var _ref$onLarge = _ref.onLarge,\n        onLarge = _ref$onLarge === undefined ? function () {} : _ref$onLarge,\n        _ref$onMedium = _ref.onMedium,\n        onMedium = _ref$onMedium === undefined ? function () {} : _ref$onMedium,\n        _ref$onSmall = _ref.onSmall,\n        onSmall = _ref$onSmall === undefined ? function () {} : _ref$onSmall;\n\n\n    windowWidth$.onValue(function (width) {\n\n        if (width === \"small\") {\n            onSmall();\n        } else if (width === \"medium\") {\n            onMedium();\n        } else {\n            onLarge();\n        }\n    });\n}\n\n},{\"./common.js\":9,\"jquery\":\"jquery\"}],9:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.scroll$ = exports.resize$ = exports.reflow$ = undefined;\nexports.toPropertyFromResize = toPropertyFromResize;\nexports.createPositionStream = createPositionStream;\n\nvar _kefir = require(\"kefir\");\n\nvar _kefir2 = _interopRequireDefault(_kefir);\n\nvar _jquery = require(\"jquery\");\n\nvar _jquery2 = _interopRequireDefault(_jquery);\n\nvar _KefirEmitter = require(\"./Kefir.emitter.js\");\n\nvar _KefirEmitter2 = _interopRequireDefault(_KefirEmitter);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// imperative stream so we can trigger the resize properties to recalculate\n// when there is a reflow in the page. Without this, the measurements will\n// become stale and wrong.\n// (is there a better way to do this?)\nvar reflow$ = exports.reflow$ = (0, _KefirEmitter2.default)();\n\n// stream of window resize events\nvar resize$ = exports.resize$ = _kefir2.default.fromEvents(window, \"resize\");\n\n// property stream of pageYOffset\nvar scroll$ = exports.scroll$ = _kefir2.default.fromEvents(window, \"scroll\").map(function (e) {\n    return window.pageYOffset;\n}).toProperty(function (e) {\n    return window.pageYOffset;\n});\n\n/**\r\n * A common pattern to create a property based on the resize$ and reflow$ streams\r\n * @param  {Function} fn: function that does some measuring\r\n * @return {Stream}\r\n */\nfunction toPropertyFromResize(fn) {\n    return _kefir2.default.merge([resize$, reflow$]).map(fn) // measure when the window is resized\n    .toProperty(fn); // measure initially\n}\n\n/**\r\n * createPositionStream.  create a stream of measurements to be used by sticky watchers\r\n * @param  {Element} element: node (use document.querySelector)\r\n * @return {Stream} stream of the positions\r\n */\nfunction createPositionStream(_ref) {\n    var element = _ref.element;\n\n\n    // the container element\n    var parent = element.parentNode;\n\n    // measure the element's position relative to the document\n    var measureElement = function measureElement() {\n        var elementBB = element.getBoundingClientRect();\n\n        return {\n            height: elementBB.height,\n            width: elementBB.width,\n            top: elementBB.top + window.pageYOffset\n        };\n    };\n\n    // elementMeasures stream\n    var elementMeasures$ = toPropertyFromResize(measureElement);\n\n    // parent's measurements, relative to the document\n    var measureParent = function measureParent() {\n        var parentBB = parent.getBoundingClientRect();\n\n        return {\n            top: parentBB.top + window.pageYOffset,\n            // $(window).width() does NOT include the scrollbar (important for windows machines)\n            right: (0, _jquery2.default)(window).width() - parentBB.right + window.pageXOffset,\n            bottom: parentBB.bottom + window.pageYOffset,\n            left: parentBB.left + window.pageXOffset,\n            width: parentBB.width,\n            height: parentBB.height,\n            // text is on the right, viz is on the left\n            vizOnLeft: (0, _jquery2.default)(parent).hasClass(\"viz-section--viz-left\")\n        };\n    };\n\n    // parentMeasures stream\n    var parentMeasures$ = toPropertyFromResize(measureParent);\n\n    // combine the streams to calculate where the sticky element should be\n    var position$ = _kefir2.default.combine([scroll$, elementMeasures$, parentMeasures$], function (scroll, elementMeasures, parentMeasures) {\n\n        return {\n            scroll: scroll,\n            parentMeasures: parentMeasures,\n            elementMeasures: elementMeasures\n        };\n    });\n\n    return position$;\n}\n\n},{\"./Kefir.emitter.js\":7,\"jquery\":\"jquery\",\"kefir\":\"kefir\"}],10:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = createModal;\n\nvar _jquery = require(\"jquery\");\n\nvar _jquery2 = _interopRequireDefault(_jquery);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\r\n * create a model with of the given html\r\n * @param  {String} html: html to be put in the popup\r\n * @param  {Number} aspectRatio: a number of width/height.  eg. .75 would be 3/4\r\n * @return {Object} {\r\n *     {Function} removeModal: close the modal\r\n * }\r\n */\nfunction createModal(_ref) {\n    var _ref$html = _ref.html,\n        html = _ref$html === undefined ? \"\" : _ref$html,\n        aspectRatio = _ref.aspectRatio;\n\n\n    var $background = (0, _jquery2.default)(\"<div>\").addClass(\"modal-background\").on(\"click\", removeModal);\n\n    var $popup = (0, _jquery2.default)(\"<div>\").addClass(\"modal-popup\")\n    // prevent background click from firing\n    .on(\"click\", function (e) {\n        return e.stopPropagation();\n    });\n\n    var $xDiv = (0, _jquery2.default)(\"<div>\").addClass(\"modal-popup__close\").html(\"<svg class='svg-x'> <use xlink:href='img/svg-sprite.svg#x'></use> </svg>\").on(\"click\", removeModal);\n\n    var $html = (0, _jquery2.default)(\"<div>\").addClass(\"modal-html\");\n\n    $popup.append($xDiv).append($html);\n\n    $background.append($popup);\n    (0, _jquery2.default)(\"body\").append($background);\n\n    // re-render on resize so we can do the aspect ratio calculations again\n    (0, _jquery2.default)(window).on(\"resize\", render);\n\n    // close the model when esc is pressed\n    (0, _jquery2.default)(document).on(\"keyup\", handleKeyPress);\n    function handleKeyPress(e) {\n        if ((e.which || e.charCode || e.keyCode) === 27) {\n            removeModal();\n        }\n    }\n\n    // render the first time\n    render();\n\n    // render the html and position the popup\n    function render() {\n\n        // reset some stuff\n        $background.addClass(\"is-hidden\");\n        $popup.height(\"auto\");\n        $popup.width(\"auto\");\n\n        // populate the html\n        $html.html(html.html());\n\n        // adjust the aspect ratio and fade in\n        function finish() {\n            var width = $popup.outerWidth();\n            var height = $popup.outerHeight();\n\n            // adjust the popup to be be 4:3 aspect ratio\n            if (typeof aspectRatio === \"number\") {\n                if (height > width * aspectRatio) {\n                    $popup.height(width * aspectRatio);\n                    $popup.width(width);\n                } else {\n                    $popup.height(height);\n                    $popup.width(height * (1 / aspectRatio));\n                }\n            }\n\n            $background.removeClass(\"is-hidden\");\n        }\n\n        // wait for the image to load to measure if needed\n        // otherwise, the width/height measurements won't be accurate.\n        var images = $html.find(\"img\");\n        if (images.length) {\n            images.on(\"load\", finish);\n        } else {\n            finish();\n        }\n    }\n\n    // remove the modal and clean up event listeners\n    function removeModal() {\n\n        $background.addClass(\"is-hidden\");\n\n        // when the transition finishes, remove the popup from the DOM\n        $background.on(\"transitionend\", function () {\n            $background.remove();\n        });\n        (0, _jquery2.default)(document).off(\"keyup\", handleKeyPress);\n        (0, _jquery2.default)(window).off(\"resize\", removeModal);\n    }\n\n    // external api\n    return {\n        removeModal: removeModal\n    };\n}\n\n},{\"jquery\":\"jquery\"}],11:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = createPopup;\n\nvar _jquery = require(\"jquery\");\n\nvar _jquery2 = _interopRequireDefault(_jquery);\n\nvar _calculatePopupOffsets = require(\"../utils/calculatePopupOffsets.js\");\n\nvar _calculatePopupOffsets2 = _interopRequireDefault(_calculatePopupOffsets);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n_jquery2.default.extend(_jquery2.default.easing, {\n    easeInOutCubic: function easeInOutCubic(x, t, b, c, d) {\n        if ((t /= d / 2) < 1) return c / 2 * t * t * t + b;\n        return c / 2 * ((t -= 2) * t * t + 2) + b;\n    }\n});\n\n/**\r\n * creates a popup and injects it in to the document.\r\n * @param  {String} title : title of the popup, optional\r\n * @param  {String} html : content of the popup as html\r\n * @param  {Number} top  : top position relative to the document\r\n * @param  {Number} left : left position relative to the document\r\n * @param  {Number} offset : a vertical or horizonal distance from the top/left the triangle should point\r\n *                           depending on if the triangle is top/bottom or left/right\r\n * @param  {String} container : a selector of the container in which to inject the popup\r\n * @param  {String} triangle : \"top\", \"right\", \"bottom\", or \"left\"\r\n * @param  {Boolean} flipToContain: will flip the popup if it goes outside the parent container\r\n * @param  {Boolean} closeBtn : if the X should be shown.  If not, the popup with not have pointer events\r\n *                              this is useful for popups on hover that shouldn't fire mouseenter/leave\r\n * @param  {Boolean} isHidden: Whether or not the popup is visible.\r\n * @return {Object} {\r\n *     {Function} hidePopup   : will set isHidden to true\r\n *     {Function} removePopup : will remove the popup from the DOM),\r\n *     {Function} setState : pass an object with any keys from above to update the popup.\r\n * }\r\n */\nfunction createPopup(initialState) {\n\n    // defaults, and this object will hold the previous state after setState\n    var prevState = {\n        title: \"\",\n        html: \"\",\n        top: 0,\n        left: 0,\n        width: \"\",\n        offset: 0,\n        container: \"body\",\n        triangle: \"bottom\",\n        closeBtn: true,\n        isHidden: false,\n        flipToContain: false\n    };\n\n    var state = Object.assign({}, prevState, initialState);\n\n    function setState(newState) {\n\n        // copy the old state into prevState\n        prevState = Object.assign({}, state);\n\n        Object.assign(state, newState);\n\n        // console.log(state);\n\n        render();\n    }\n\n    // initialize popup\n    // always start hidden so it can animate in\n    var $popup = (0, _jquery2.default)(\"<div class='popup'>\").css({\n        \"opacity\": 0,\n        \"width\": state.width,\n        \"transform\": \"scale(0.89)\",\n        \"pointer-events\": state.closeBtn ? \"auto\" : \"none\"\n    });\n    var $titleDiv = (0, _jquery2.default)(\"<div>\").addClass(\"popup__title\");\n    var $triangleDiv = (0, _jquery2.default)(\"<div>\").addClass(\"popup__triangle\");\n    var $content = (0, _jquery2.default)(\"<div>\").addClass(\"popup__content\");\n\n    // attach the close button if we're supposed to\n    if (state.closeBtn) {\n        var $xDiv = (0, _jquery2.default)(\"<div>\").addClass(\"popup__x-icon\").html(\"<svg class='svg-x'> <use xlink:href='img/svg-sprite.svg#x'></use> </svg>\").on(\"click\", removePopup);\n        $popup.append($xDiv);\n\n        window.addEventListener(\"click\", handleClickAway, true);\n        window.addEventListener(\"touchstart\", handleClickAway, true);\n        window.addEventListener(\"resize\", handleClickAway, true);\n        window.addEventListener(\"keyup\", escListener, true);\n    }\n\n    $popup.append($titleDiv);\n    $popup.append($triangleDiv);\n    $popup.append($content);\n\n    (0, _jquery2.default)(state.container).append($popup);\n\n    // if the user clicked outside of the popup, close it\n    function handleClickAway(e) {\n        var inPopup = (0, _jquery2.default)(e.target).closest(\".popup\").length;\n        if (!inPopup) {\n            removePopup();\n        }\n    }\n\n    function escListener(e) {\n        if ((e.which || e.charCode || e.keyCode) === 27) {\n            removePopup();\n        }\n    }\n\n    function hidePopup() {\n\n        window.removeEventListener(\"click\", handleClickAway, true);\n        window.removeEventListener(\"touchstart\", handleClickAway, true);\n        window.removeEventListener(\"resize\", handleClickAway, true);\n        window.removeEventListener(\"keyup\", escListener, true);\n\n        // only re-render if we need to\n        if (state.isHidden !== true) {\n            // will kick of the transition\n            setState({\n                isHidden: true\n            });\n        }\n    }\n\n    function removePopup() {\n\n        // first close it\n        hidePopup();\n\n        // when the transition finishes, remove the popup from the DOM\n        $popup.on(\"transitionend\", function () {\n            $popup.remove();\n        });\n    }\n\n    // render the first time\n    render();\n\n    function render() {\n        var top = state.top,\n            left = state.left,\n            offset = state.offset,\n            triangle = state.triangle,\n            isHidden = state.isHidden,\n            html = state.html,\n            title = state.title,\n            flipToContain = state.flipToContain;\n\n        // update the content before calculating the offsets\n\n        $content.html(html);\n        $titleDiv.html(title);\n\n        var offsets = (0, _calculatePopupOffsets2.default)({\n            popup: $popup.get(0),\n            triangleSize: $triangleDiv.outerHeight(),\n            top: top, left: left, offset: offset, triangle: triangle, flipToContain: flipToContain\n        });\n\n        // if the popup was hidden, we want to place it where it needs to be\n        // the update will fade it in\n        // enter - put it in place before transitioning in\n        if (prevState.isHidden && !isHidden) {\n            $popup.css({\n                \"top\": offsets.popupTop + \"px\",\n                \"left\": offsets.popupLeft + \"px\"\n            });\n        }\n\n        $popup\n        // .stop().animate({\n        .css({\n            opacity: isHidden ? 0 : 1,\n            transform: isHidden ? \"scale(0.9)\" : \"scale(1)\",\n            top: offsets.popupTop,\n            left: offsets.popupLeft,\n            width: state.width\n        }, 250, \"easeInOutCubic\").removeClass(function (index, css) {\n            return (css.match(/\\bis-triangle-\\S+/g) || []).join(\" \");\n        }).addClass(\"is-triangle-\" + offsets.triangleSide).toggleClass(\"popup--hidden\", isHidden);\n\n        // adjust the triangle\n        $triangleDiv.css({\n            \"transform\": offsets.triangleSide === \"top\" || offsets.triangleSide === \"bottom\" ? \"translateX(\" + offsets.triangleOffset + \"px)\" // top/bottom\n            : \"translateY(\" + offsets.triangleOffset + \"px)\" // left/right\n        });\n\n        $popup.toggleClass(\"no-title\", !title);\n    }\n\n    // external api\n    return {\n        setState: setState,\n        hidePopup: hidePopup,\n        removePopup: removePopup\n    };\n}\n\n},{\"../utils/calculatePopupOffsets.js\":17,\"jquery\":\"jquery\"}],12:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.scrollBodyTo = undefined;\n\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nexports.measureNav = measureNav;\nexports.default = initNav;\n\nvar _kefir = require(\"kefir\");\n\nvar _kefir2 = _interopRequireDefault(_kefir);\n\nvar _jquery = require(\"jquery\");\n\nvar _jquery2 = _interopRequireDefault(_jquery);\n\nvar _KefirEmitter = require(\"./Kefir.emitter.js\");\n\nvar _KefirEmitter2 = _interopRequireDefault(_KefirEmitter);\n\nvar _common = require(\"./common.js\");\n\nvar _addBreakpointHandlers = require(\"./addBreakpointHandlers.js\");\n\nvar _addBreakpointHandlers2 = _interopRequireDefault(_addBreakpointHandlers);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// measure the height of the nav including padding\nfunction measureNav() {\n    return (0, _jquery2.default)(\"nav\").outerHeight();\n}\n\n/**\r\n * Observe the positions stream and update the nav to make it sticky\r\n * @param  {Element} element:\r\n * @param  {Number} topOffset: amount of space from the top of the\r\n *                             screen to place the sticky nav\r\n * @return {Nothing}\r\n */\nfunction attachStickyWatcherToNav(_ref) {\n    var element = _ref.element;\n\n\n    var position$ = (0, _common.createPositionStream)({ element: element });\n\n    // stream of true/false of whether or not the nav should be sticky\n    var isSticky$ = (0, _KefirEmitter2.default)();\n\n    position$\n    // only do this if it's supposed to be sticky\n    .filterBy(isSticky$)\n    // update the dom with our measurements when either of those streams emit\n    .onValue(function (_ref2) {\n        var scroll = _ref2.scroll,\n            parentMeasures = _ref2.parentMeasures,\n            elementMeasures = _ref2.elementMeasures;\n\n\n        var pm = parentMeasures;\n        var em = elementMeasures;\n\n        var shouldFix = scroll > em.top;\n\n        (0, _jquery2.default)(element).find(\"nav\").css({\n            \"position\": shouldFix ? \"fixed\" : \"absolute\",\n            \"top\": shouldFix ? 0 : \"auto\",\n            \"left\": pm.left,\n            \"right\": pm.right\n        });\n    });\n\n    isSticky$\n    // when isSticky$ is false...\n    .filterBy(isSticky$.map(function (b) {\n        return !b;\n    }))\n    // unstick the nav\n    .onValue(unStickIt);\n\n    function unStickIt() {\n        (0, _jquery2.default)(element).find(\"nav\").css({\n            \"position\": \"relative\",\n            \"top\": \"auto\",\n            \"left\": \"auto\",\n            \"right\": \"auto\"\n        });\n    }\n\n    // a function to add/remove the sticky behavior\n    function toggleStickyNav(status) {\n        isSticky$.emit(status);\n    }\n\n    return {\n        toggleStickyNav: toggleStickyNav,\n        isSticky$: isSticky$\n    };\n}\n\n// return the id and top offset of the chapter, relative to the document\nfunction getChapterPositions() {\n    var chapters = (0, _jquery2.default)(\".chapter\").map(function (i, chapter) {\n        return {\n            id: (0, _jquery2.default)(chapter).attr(\"id\"),\n            top: (0, _jquery2.default)(chapter).offset().top\n        };\n    }).get();\n\n    return chapters;\n}\n\n// this will be updated once we init the nav\nvar scrollBodyTo = exports.scrollBodyTo = function scrollBodyTo() {};\n\n/**\r\n * Attach sticky watcher to nav\r\n * @return {Stream} stream of navHeight values\r\n *                 (it might change if the user resizes their browser and the nav wraps)\r\n */\nfunction initNav() {\n\n    // make the nav sticky\n    var _attachStickyWatcherT = attachStickyWatcherToNav({\n        element: (0, _jquery2.default)(\".nav-holder\").get(0)\n    }),\n        toggleStickyNav = _attachStickyWatcherT.toggleStickyNav,\n        isSticky$ = _attachStickyWatcherT.isSticky$;\n\n    // measure the navHeight and set the height of the holder\n    // this is because it will be position fixed when it's scrolls,\n    // so the nav-holder will maintain the space\n\n\n    var navHeight$ = (0, _common.toPropertyFromResize)(measureNav);\n\n    // add smooth scroll to nav links\n    (0, _jquery2.default)(\"nav a\").on(\"click\", function (e, el) {\n        e.preventDefault();\n        var scrollTo = (0, _jquery2.default)((0, _jquery2.default)(this).attr(\"href\"));\n\n        if (scrollTo) {\n            scrollBodyTo(scrollTo.offset().top);\n        }\n    });\n\n    // update the nav holder height\n    _kefir2.default.combine([navHeight$, isSticky$]).onValue(function (_ref3) {\n        var _ref4 = _slicedToArray(_ref3, 2),\n            navHeight = _ref4[0],\n            isSticky = _ref4[1];\n\n        (0, _jquery2.default)(\".nav-holder\").height(navHeight);\n\n        // redefine this function to reflect the new navHeight\n        exports.scrollBodyTo = scrollBodyTo = function scrollBodyTo(top) {\n            var duration = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 750;\n\n            (0, _jquery2.default)(\"html, body\").stop().animate({\n                scrollTop: top - (isSticky ? navHeight : 0)\n            }, duration);\n        };\n    });\n\n    // remove the sticky nav on small windows\n    (0, _addBreakpointHandlers2.default)({\n        onSmall: function onSmall() {\n            return toggleStickyNav(false);\n        },\n        onMedium: function onMedium() {\n            return toggleStickyNav(true);\n        },\n        onLarge: function onLarge() {\n            return toggleStickyNav(true);\n        }\n    });\n\n    // stream of chapter positions\n    var chapterPositions$ = (0, _common.toPropertyFromResize)(getChapterPositions);\n\n    // watch the scroll to determine what chapter we're on\n    _kefir2.default.combine([_common.scroll$, chapterPositions$, navHeight$]).onValue(function (_ref5) {\n        var _ref6 = _slicedToArray(_ref5, 3),\n            scroll = _ref6[0],\n            chapterPositions = _ref6[1],\n            navHeight = _ref6[2];\n\n        // how far above the chapter to be considered in it\n        var offset = 100;\n\n        var currentChapter = chapterPositions.map(function (chapter) {\n            return Object.assign({}, chapter, { distance: scroll + navHeight - chapter.top + offset });\n        }).reduce(function (closest, chapter) {\n            // -1 because of rounding (could be -0.5)\n            return chapter.distance > -1 && chapter.distance < closest.distance ? chapter : closest;\n        }, { distance: Infinity });\n\n        (0, _jquery2.default)(\"nav a\").each(function (i, a) {\n            var hrefId = (0, _jquery2.default)(a).attr(\"href\").replace(\"#\", \"\");\n            (0, _jquery2.default)(a).toggleClass(\"is-current\", hrefId === currentChapter.id);\n        });\n    });\n\n    // return the navHeight so others can use it\n    return navHeight$;\n}\n\n},{\"./Kefir.emitter.js\":7,\"./addBreakpointHandlers.js\":8,\"./common.js\":9,\"jquery\":\"jquery\",\"kefir\":\"kefir\"}],13:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = initPage;\n\nvar _jquery = require(\"jquery\");\n\nvar _jquery2 = _interopRequireDefault(_jquery);\n\nvar _initStickyViz = require(\"./initStickyViz.js\");\n\nvar _initStickyViz2 = _interopRequireDefault(_initStickyViz);\n\nvar _initNav = require(\"./initNav.js\");\n\nvar _initNav2 = _interopRequireDefault(_initNav);\n\nvar _addBreakpointHandlers = require(\"./addBreakpointHandlers.js\");\n\nvar _addBreakpointHandlers2 = _interopRequireDefault(_addBreakpointHandlers);\n\nvar _createPopup = require(\"./createPopup.js\");\n\nvar _createPopup2 = _interopRequireDefault(_createPopup);\n\nvar _createModal = require(\"./createModal.js\");\n\nvar _createModal2 = _interopRequireDefault(_createModal);\n\nvar _common = require(\"./common.js\");\n\nvar _CalloutBox = require(\"../components/CalloutBox.jsx\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction initPage() {\n\n    /** init expandable callout boxes **/\n    (0, _CalloutBox.attachCalloutBoxToDom)({\n        selector: \".js-expandable-box\",\n        // trigger a page reflow while it animates. This ensures that the\n        // sticky vizs are correct while we <animate></animate>\n        onAnimationFrame: function onAnimationFrame() {\n            return _common.reflow$.emit(\"location profile expanded/collapsed!\");\n        }\n    });\n\n    /** init non-expandable callout boxes **/\n    (0, _CalloutBox.attachCalloutBoxToDom)({\n        selector: \".js-callout-box\",\n        expandable: false\n    });\n\n    /** social icon links */\n    // const scorecardUrl = \"http://www.commonwealthfund.org/interactives/2016/jul/local-scorecard/\";\n    var scorecardUrl = (0, _jquery2.default)(\"meta[property='og:url']\").attr(\"content\");\n\n    // https://dev.twitter.com/web/tweet-button/web-intent\n    (0, _jquery2.default)(\".js-twitter-link\").each(function (i, a) {\n        var text = \"Aiming Higher: The 2017 Scorecard on State Health System Performance\";\n        (0, _jquery2.default)(a).attr(\"href\", \"https://twitter.com/intent/tweet?text=\" + encodeURIComponent(text) + \"&url=\" + encodeURIComponent(scorecardUrl));\n    });\n\n    // https://developers.facebook.com/docs/plugins/share-button#configurator\n    // https://developers.facebook.com/docs/sharing/webmasters#markup\n    (0, _jquery2.default)(\".js-facebook-link\").each(function (i, a) {\n        (0, _jquery2.default)(a).attr(\"href\", \"https://www.facebook.com/sharer/sharer.php?u=\" + scorecardUrl);\n    });\n\n    // https://developer.linkedin.com/docs/share-on-linkedin\n    (0, _jquery2.default)(\".js-linkedin-link\").each(function (i, a) {\n        var title = \"Aiming Higher: The 2017 Scorecard on State Health System Performance\";\n        var summary = \"Results from the Commonwealth Fund Scorecard on State Health System Performance\";\n        (0, _jquery2.default)(a).attr(\"href\", \"https://www.linkedin.com/shareArticle?url=\" + scorecardUrl + \"&title=\" + title + \"&summary=\" + summary + \"&mini=true\");\n    });\n\n    /** init modal links **/\n    (0, _jquery2.default)(\".js-modal\").each(function (i, modal) {\n        var html = (0, _jquery2.default)(modal).find(\".js-modal-html\");\n\n        (0, _jquery2.default)(modal).on(\"click\", function () {\n            (0, _createModal2.default)({\n                html: html,\n                aspectRatio: 3 / 4 // 3/4 for the chart links\n            });\n        });\n    });\n\n    /** init footnote popup actions **/\n    (0, _jquery2.default)(\".js-footnote\").each(function (i, footnote) {\n\n        (0, _jquery2.default)(footnote).removeClass(\"js-footnote\").addClass(\"footnote\");\n\n        // grab the html and remove the popup content from the DOM\n        var html = (0, _jquery2.default)(footnote).find(\".js-footnote__popup\").remove();\n\n        var trigger = (0, _jquery2.default)(footnote).find(\".js-footnote__trigger\").removeClass(\"js-footnote__trigger\").addClass(\"footnote__trigger\");\n\n        trigger.on(\"click\", function (e) {\n            e.preventDefault();\n            var offsets = trigger.offset();\n            var positionInWindow = offsets.top - (0, _jquery2.default)(window).scrollTop();\n            var windowHeight = (0, _jquery2.default)(window).height();\n            var showOnTop = positionInWindow > windowHeight / 2;\n\n            var popupConfig = {\n                html: html,\n                top: offsets.top + trigger.height() / 2,\n                left: offsets.left + trigger.width() / 2,\n                offset: -trigger.height() / 2,\n                triangle: showOnTop ? \"bottom\" : \"top\"\n            };\n\n            (0, _createPopup2.default)(popupConfig);\n        });\n    });\n\n    /** init sticky navigation **/\n    // returns a stream of navHeight (it might change when the user resizes)\n    var navHeight$ = (0, _initNav2.default)();\n\n    /** attach the sticky viz watchers **/\n    var toggleFns = (0, _jquery2.default)(\".viz-section__viz-holder\").map(function (i, viz) {\n        // return the toggle function for this sticky\n        return (0, _initStickyViz2.default)({\n            element: viz,\n            topOffset$: navHeight$\n        });\n    }).get();\n\n    function sizeNonStickyVizBox($el) {\n        $el.closest(\".viz-section\").css(\"min-height\", $el.height());\n    }\n\n    function sizeNonStickyBoxes() {\n        (0, _jquery2.default)(\".viz-section__not-sticky\").each(function () {\n            sizeNonStickyVizBox((0, _jquery2.default)(this));\n        });\n    }\n\n    (0, _jquery2.default)(window).on(\"resize\", function () {\n        sizeNonStickyBoxes();\n    });\n\n    sizeNonStickyBoxes();\n\n    /**\r\n     * @param  {Boolean} enable: true to enable stickies, false to disable\r\n     */\n    function toggleStickies(enable) {\n\n        // HACK * always emit false if this is ipad/safari\n        if ((0, _jquery2.default)(\"html\").hasClass(\"ipad\") && (0, _jquery2.default)(\"html\").hasClass(\"safari\")) {\n            enable = false;\n            (0, _jquery2.default)(\".chapter\").css({\n                \"max-width\": \"600px\",\n                \"margin\": \"auto\"\n            });\n\n            (0, _jquery2.default)(\"body\").addClass(\"is-stacked\");\n        }\n\n        (0, _jquery2.default)(\"body\").toggleClass(\"sticky\", enable);\n\n        // add or remove viz stickies\n        toggleFns.forEach(function (toggle) {\n            return toggle(enable);\n        });\n\n        // alert everyone that we need to remeasure the DOM\n        _common.reflow$.emit(\"toggling stickies\");\n    }\n\n    /** add breakpoints handers to toggle the sticky vizs **/\n    (0, _addBreakpointHandlers2.default)({\n        onSmall: function onSmall() {\n            return toggleStickies(false);\n        },\n        onMedium: function onMedium() {\n            return toggleStickies(false);\n        },\n        onLarge: function onLarge() {\n            return toggleStickies(true);\n        }\n    });\n\n    /** Attach hander for \"Go to State Page\" button */\n    (0, _jquery2.default)(document).ready(function () {\n        (0, _jquery2.default)(\".js-state-select\").change(function (e) {\n            var url = (0, _jquery2.default)(\".js-state-select option:selected\").attr(\"data-url\");\n            (0, _jquery2.default)(\".js-goto-state-page\").attr(\"href\", url);\n        });\n\n        // fire change even to initialize it on the first load\n        (0, _jquery2.default)(\".js-state-select\").change();\n    });\n}\n\n},{\"../components/CalloutBox.jsx\":1,\"./addBreakpointHandlers.js\":8,\"./common.js\":9,\"./createModal.js\":10,\"./createPopup.js\":11,\"./initNav.js\":12,\"./initStickyViz.js\":14,\"jquery\":\"jquery\"}],14:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.maxVizHeight$ = undefined;\nexports.default = initStickyViz;\n\nvar _kefir = require(\"kefir\");\n\nvar _kefir2 = _interopRequireDefault(_kefir);\n\nvar _jquery = require(\"jquery\");\n\nvar _jquery2 = _interopRequireDefault(_jquery);\n\nvar _common = require(\"./common.js\");\n\nvar _initNav = require(\"./initNav.js\");\n\nvar _KefirEmitter = require(\"./Kefir.emitter.js\");\n\nvar _KefirEmitter2 = _interopRequireDefault(_KefirEmitter);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// distance from the top to push the viz down\nvar STICKY_PADDING = 10;\n\n// **NOTE** this should match the percentage in viz-section.scss\nvar VIZ_WIDTH = 0.6;\n\n// true/false if this viz is sticky\nvar isSticky$ = (0, _KefirEmitter2.default)();\n\n// calculate the space from the sticky nav to the bottom of the viewport\nvar maxVizHeight$ = exports.maxVizHeight$ = (0, _common.toPropertyFromResize)(_initNav.measureNav).map(function (navHeight) {\n    return window.innerHeight - navHeight - STICKY_PADDING;\n}).combine(isSticky$, function (maxVizHeight, isSticky) {\n    return isSticky ? maxVizHeight : Infinity;\n}).toProperty(function () {\n    return Infinity;\n}); // start with Infinity\n\n\n/**\r\n * initStickyViz: function to add sticky behaviour to a viz\r\n * @param  {[type]} {element    [description]\r\n * @param  {Number} topOffset$: stream of values for an offset from the top of the viewport to put the viz\r\n * @return {[type]}             [description]\r\n */\nfunction initStickyViz(_ref) {\n    var element = _ref.element,\n        topOffset$ = _ref.topOffset$;\n\n\n    var position$ = (0, _common.createPositionStream)({ element: element });\n\n    // combine the position stream, the topOffset stream, and the maxHeight\n    var shouldUpdate$ = _kefir2.default.combine([position$, topOffset$, maxVizHeight$], function (position, topOffset, maxHeight) {\n        return Object.assign({}, position, {\n            maxHeight: maxHeight,\n            topOffset: topOffset + STICKY_PADDING\n        });\n    });\n\n    shouldUpdate$\n    // only do this if it's sticky\n    .filterBy(isSticky$)\n    // update the dom with our measurements when either of those streams emit\n    .onValue(function (_ref2) {\n        var scroll = _ref2.scroll,\n            parentMeasures = _ref2.parentMeasures,\n            elementMeasures = _ref2.elementMeasures,\n            topOffset = _ref2.topOffset,\n            maxHeight = _ref2.maxHeight;\n\n\n        var pm = parentMeasures;\n        var em = elementMeasures;\n\n        // where the user is scrolled in relation to the parent container\n        var above = scroll + topOffset < pm.top;\n        var below = scroll + topOffset > pm.bottom - em.height;\n        var fixed = !above && !below;\n\n        // center might be offset, eg 70/30\n        var textWidthPercentage = 100 * (1 - VIZ_WIDTH) + \"%\";\n        var textWidthAbsolute = pm.width * (1 - VIZ_WIDTH);\n\n        (0, _jquery2.default)(element).css({\n            \"position\": fixed ? \"fixed\" : \"absolute\",\n            \"top\": above ? \"0px\" : fixed ? topOffset + \"px\" : \"auto\",\n            \"right\": fixed ? pm.vizOnLeft ? pm.right + textWidthAbsolute + \"px\" : pm.right + \"px\" : pm.vizOnLeft ? textWidthPercentage : \"0\",\n            \"bottom\": below ? \"0\" : \"auto\",\n            \"left\": fixed ? pm.vizOnLeft ? pm.left + \"px\" : pm.left + textWidthAbsolute + \"px\" : pm.vizOnLeft ? \"0\" : textWidthPercentage,\n            // if the user is on a small screen, make the viz scrollable while it's fixed\n            \"max-height\": fixed ? maxHeight + \"px\" : \"none\"\n        });\n    });\n\n    isSticky$\n    // when isSticky$ is false...\n    .filterBy(isSticky$.map(function (b) {\n        return !b;\n    }))\n    // unstick the nav\n    .onValue(unStickIt);\n\n    function unStickIt() {\n        (0, _jquery2.default)(element).css({\n            \"position\": \"relative\",\n            \"top\": \"auto\",\n            \"right\": \"auto\",\n            \"bottom\": \"auto\",\n            \"left\": \"auto\",\n            // don't restrict max height when not sticky\n            \"max-height\": \"none\"\n        });\n    }\n\n    // a function to add/remove the stickyIt behavior\n    function toggleVizSticky(status) {\n        // update the stream\n        isSticky$.emit(status);\n    }\n\n    // return this function so the user can toggle it as needed.\n    return toggleVizSticky;\n}\n\n},{\"./Kefir.emitter.js\":7,\"./common.js\":9,\"./initNav.js\":12,\"jquery\":\"jquery\",\"kefir\":\"kefir\"}],15:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.simpleSource = simpleSource;\nexports.zipHrrSource = zipHrrSource;\nexports.createTypeAhead = createTypeAhead;\n\nvar _ramda = require(\"ramda\");\n\nvar _ramda2 = _interopRequireDefault(_ramda);\n\nvar _jquery = require(\"jquery\");\n\nvar _jquery2 = _interopRequireDefault(_jquery);\n\nrequire(\"typeahead.js\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nwindow.jquery = _jquery2.default;\nfunction simpleSource(accessor, options) {\n  return function findMatches(q, cb) {\n    var testOption = _ramda2.default.compose(_ramda2.default.test(new RegExp(q, \"i\")), accessor);\n    cb(_ramda2.default.filter(testOption, _ramda2.default.values(options)));\n  };\n}\n\nfunction zipHrrSource(hrrs, zips) {\n\n  var normalMatch = simpleSource(function (hrr) {\n    return hrr.name;\n  }, hrrs);\n\n  return function findMatches(q, cb) {\n\n    // Match zipcode\n    var zipMatch = zips[q];\n\n    if (zipMatch) {\n      cb([hrrs[zipMatch.hrr]]);\n    } else {\n      normalMatch(q, cb);\n    }\n  };\n}\n\nfunction createTypeAhead(selector, labelKey, source, handleSelected) {\n\n  // blur the input on touch away\n  function handleTouchAway(e) {\n    if (!(0, _jquery2.default)(e.target).closest(\".tt-menu\").length) {\n      closeTypeahead();\n    }\n  }\n\n  function closeTypeahead() {\n    (0, _jquery2.default)(selector).removeClass(\"tt-open\");\n    // this blur is important on touch devices\n    (0, _jquery2.default)(selector).blur();\n    window.removeEventListener(\"touchstart\", handleTouchAway, true);\n  }\n\n  var typeaheadValue = \"\";\n\n  (0, _jquery2.default)(selector).typeahead({\n    hint: true,\n    highlight: true,\n    minLength: 0\n  }, {\n    displayKey: labelKey,\n    limit: 500,\n    source: source\n  }).on(\"typeahead:select\", function (e, suggestion, dataset) {\n    handleSelected(suggestion);\n  }).on(\"typeahead:open\", function (e) {\n    (0, _jquery2.default)(selector).addClass(\"tt-open\");\n    window.addEventListener(\"touchstart\", handleTouchAway, true);\n\n    // grab the value so we can restore it later if needed\n    // for some reason $(selector).typeahead(\"val\") doesn't work\n    // even though the docs say it should...\n    typeaheadValue = (0, _jquery2.default)(this).val();\n\n    // clear the selection so the user can choose something else\n    (0, _jquery2.default)(selector).typeahead(\"val\", \"\");\n  }).on(\"typeahead:close\", function (e) {\n\n    // restore the value if nothing else was selected\n    if ((0, _jquery2.default)(this).val() === \"\" && typeaheadValue) {\n      (0, _jquery2.default)(selector).typeahead(\"val\", typeaheadValue);\n    }\n\n    typeaheadValue = \"\";\n\n    closeTypeahead();\n  });\n\n  return {\n    setValue: function setValue(val) {\n      // if the user set this value, save it\n      typeaheadValue = val;\n      (0, _jquery2.default)(selector).typeahead(\"val\", val);\n    }\n  };\n}\n\n},{\"jquery\":\"jquery\",\"ramda\":\"ramda\",\"typeahead.js\":\"typeahead.js\"}],16:[function(require,module,exports){\n\"use strict\";\n\nfunction sniff() {\n    var verzApp;\n    this.version = \"1.2\", this.browserType, this.browserVersion, this.mobile, this.browserVersionExtended = null;\n    for (var e, i = !1, t = navigator.userAgent.match(/Android/i) || navigator.userAgent.match(/BlackBerry/i) || navigator.userAgent.match(/iPhone|iPad|iPod/i) || navigator.userAgent.match(/Opera Mini/i) || navigator.userAgent.match(/IEMobile/i) || null, s = navigator.appName, n = navigator.userAgent, r = n.match(/(opera|chrome|safari|firefox|msie|trident|edge)\\/?\\s*(\\.?\\d+(\\.\\d+)*)/i), o = n.match(/(opera|chrome|safari|firefox|msie|trident|edge)\\/?\\s*(\\.?\\d+(\\.\\d+)*)/gi), a = 0; a < o.length; a++) {\n        if (o[a].toLowerCase().indexOf(\"edge\") >= 0) {\n            var d = o[a].split(\"/\"),\n                m = d[0].toLowerCase(),\n                f = d[1];\n            i = !0;\n        }\n    }if (!i) {\n        r && null != (e = n.match(/version\\/([\\.\\d]+)/i)) && (r[2] = e[1]), r = r ? [r[1], r[2]] : [s, navigator.appVersion, \"-?\"];\n        var m = r[0].toLowerCase(),\n            f = r[1];\n        \"trident\" == r[0].toLowerCase() && (m = \"msie\", f = n.match(/(rv)\\:?(\\.?\\d+(\\.\\d+)*)/i), verzApp = f[0].split(\":\"), f = f[1]);\n    }\n    this.mobile = t, this.browserType = m, this.browserVersion = parseInt(f), this.browserVersionExtended = f;\n}\nvar sniff = new sniff();\n\"undefined\" != typeof document.documentElement.classList ? (document.documentElement.classList.add(sniff.browserType), document.documentElement.classList.add(\"v\" + sniff.browserVersion), null != sniff.mobile && document.documentElement.classList.add(sniff.mobile.toString().toLowerCase())) : (document.documentElement.className += \" \" + sniff.browserType + \" v\" + sniff.browserVersion, null != sniff.mobile && (document.documentElement.className += \" \" + sniff.mobile.toString().toLowerCase()));\n\n},{}],17:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n/**\r\n * if this popup is outside of it's parent, nudge it back in\r\n * @param  {element} popup: DOM elmenet of the popup to be placed\r\n * @param  {number} top: The top coordinate of where the popup should point\r\n * @param  {number} left: The left coordinate of where the popup should point\r\n * @param  {number} offset: an offet to be added to top/bottom or left/right\r\n * @param  {string} triangle: \"top\", \"right\", \"bottom\", or \"left\"\r\n * @param  {number} triangleSize: used to calculate the position\r\n * @param  {boolean} flipToContain: will flip the popup if it goes outside the parent container\r\n * @return {object} {\r\n *     realTop       : with no offset adjustment, the popup should go here, based on triangleSide\r\n *     realLeft      : ^^\r\n *     popupTop      : with adjustment when the popup butts up agains the parent\r\n *     popupLeft     : ^^\r\n *     overflow      : \"top\", \"right\", \"bottom\", \"left\".  Positive numbers are overflows\r\n *     triangleOffset: Amount the triangle needs to move to be on the dot, relative from 50%\r\n *     triangleSide  : Will be the same as passed in triangle, unless it fliped via flipToContain\r\n * }\r\n * use popupTop, popupLeft, and triangleOffset to position the popup\r\n */\nfunction calculatePopupOffsets(_ref) {\n    var popup = _ref.popup,\n        top = _ref.top,\n        left = _ref.left,\n        _ref$offset = _ref.offset,\n        offset = _ref$offset === undefined ? 0 : _ref$offset,\n        _ref$triangle = _ref.triangle,\n        triangle = _ref$triangle === undefined ? \"bottom\" : _ref$triangle,\n        triangleSize = _ref.triangleSize,\n        _ref$flipToContain = _ref.flipToContain,\n        flipToContain = _ref$flipToContain === undefined ? false : _ref$flipToContain;\n\n\n    // make a copy of this\n    var triangleSide = triangle;\n\n    // get the width and height of this popup from the DOM\n    var width = popup.offsetWidth;\n    var height = popup.offsetHeight;\n\n    // get the width/height of the parent container div\n    var parent = popup.parentNode;\n    var parentWidth = parent.clientWidth;\n    var parentHeight = parent.offsetHeight; // client height of body will only be the viewport height\n\n    // common calculations\n    var popupOnTop = top - height - triangleSize + offset;\n    var popupOnBottom = top + triangleSize - offset;\n    var popupOnLeft = left - width - triangleSize + offset;\n    var popupOnRight = left + triangleSize - offset;\n\n    // calculate where the top of the popup should be based on top/left\n    var realTop = triangleSide === \"bottom\" ? popupOnTop : triangleSide === \"top\" ? popupOnBottom : top - height / 2; //  left or right\n\n    var realLeft = triangleSide === \"right\" ? popupOnLeft : triangleSide === \"left\" ? popupOnRight : left - width / 2; // center\n\n    // the amounts that this popup is outside of it's parent.\n    var overflow = {\n        top: -realTop,\n        right: -(parentWidth - (realLeft + width)),\n        bottom: -(parentHeight - (realTop + height)),\n        left: -realLeft\n    };\n\n    // calculate where the popup should go\n    // start with popupLeft as realLeft before nudging\n    var popupTop = realTop;\n    var popupLeft = realLeft;\n    var triangleOffset = 0;\n\n    // if there is an overflow on the right, adjust the popup and triangle position\n    if (overflow.right > 0) {\n        if (triangleSide === \"top\" || triangleSide === \"bottom\") {\n            popupLeft = realLeft - overflow.right;\n            triangleOffset = overflow.right;\n        }\n\n        // for left, flip the popup\n        if (triangleSide === \"left\" && flipToContain) {\n            triangleSide = \"right\";\n            popupLeft = popupOnLeft;\n        }\n    }\n\n    // if there is an overflow on the left, adjust the popup and triangle position\n    if (overflow.left > 0) {\n        if (triangleSide === \"top\" || triangleSide === \"bottom\") {\n            popupLeft = realLeft + overflow.left;\n            triangleOffset = -overflow.left;\n        }\n\n        // for right, flip the popup\n        if (triangleSide === \"right\" && flipToContain) {\n            triangleSide = \"left\";\n            popupLeft = popupOnRight;\n        }\n    }\n\n    // if there is an overflow on the bottom\n    if (overflow.bottom > 0) {\n        // for left/right, butt the popup against the bottom\n        if (triangleSide === \"left\" || triangleSide === \"right\") {\n            popupTop = realTop - overflow.bottom;\n            triangleOffset = overflow.bottom;\n        }\n        // for top, flip the popup\n        if (triangleSide === \"top\" && flipToContain) {\n            triangleSide = \"bottom\";\n            popupTop = popupOnTop;\n        }\n    }\n\n    // if there is an overflow on the top\n    if (overflow.top > 0) {\n\n        if (triangleSide === \"left\" || triangleSide === \"right\") {\n            popupTop = realTop + overflow.top;\n            triangleOffset = -overflow.top;\n        }\n\n        // for bottom, flip the popup\n        if (triangleSide === \"bottom\" && flipToContain) {\n            triangleSide = \"top\";\n            popupTop = popupOnBottom;\n        }\n    }\n\n    // return all the measurements\n    return {\n        realTop: realTop, realLeft: realLeft, popupTop: popupTop, popupLeft: popupLeft, overflow: overflow, triangleOffset: triangleOffset, triangleSide: triangleSide\n    };\n}\n\nexports.default = calculatePopupOffsets;\n\n},{}],18:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = collapsibleScale;\n\nvar _ramda = require(\"ramda\");\n\nvar _ramda2 = _interopRequireDefault(_ramda);\n\nvar _d = require(\"d3\");\n\nvar _d2 = _interopRequireDefault(_d);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction collapsibleScale() {\n\n  var domain = void 0;\n  var positions = void 0;\n  var activeLoc = void 0;\n  var locationHeight = 9;\n\n  function locHeight(loc) {\n    if (activeLoc) {\n      return loc === activeLoc ? domain.length + locationHeight : locationHeight - 1;\n    } else {\n      return locationHeight;\n    }\n  }\n\n  function getPosition(activeLocId) {\n    return _ramda2.default.reduce(function (accum, locId) {\n      var val = accum + locHeight(locId);\n      if (locId === activeLocId) {\n        return _ramda2.default.reduced(val - locHeight(locId));\n      }\n      return val;\n    }, 0, domain);\n  }\n\n  function update() {\n    positions = _ramda2.default.map(getPosition, _ramda2.default.indexBy(_ramda2.default.identity, domain));\n  }\n\n  var self = function self(locId) {\n\n    if (typeof positions !== \"undefined\") {\n      return positions[locId];\n    }\n  };\n\n  self.domain = function (d) {\n    if (!d) {\n      return domain;\n    }\n    domain = d;\n    update();\n    return self;\n  };\n\n  self.range = function () {\n    return _ramda2.default.compose(_ramda2.default.sort(_d2.default.ascending), _ramda2.default.values)(positions);\n  };\n\n  self.height = function () {\n    return _d2.default.max(_ramda2.default.values(positions)) + locHeight(_ramda2.default.last(domain));\n  };\n\n  self.locationHeight = function () {\n    return locationHeight;\n  };\n\n  self.activeLocationHeight = function () {\n    return domain.length + locationHeight;\n  };\n\n  self.activeLoc = function (loc) {\n    activeLoc = loc;\n    update();\n    return self;\n  };\n\n  self.totalHeight = function () {\n    return domain.length * locationHeight;\n  };\n\n  self.rangeTop = function () {\n    return self(_ramda2.default.head(domain));\n  };\n\n  self.rangeMiddle = function () {\n    return self.height() / 2 + self(domain[0]);\n  };\n\n  self.rangeBottom = function () {\n    var last = _ramda2.default.last(domain);\n    return self(last) + locHeight(last);\n  };\n\n  return self;\n}\n\n},{\"d3\":\"d3\",\"ramda\":\"ramda\"}],19:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.moveToFront = moveToFront;\nexports.moveToBack = moveToBack;\nfunction moveToFront(selection) {\n  return selection.each(function () {\n    this.parentNode.appendChild(this);\n  });\n}\n\nfunction moveToBack(selection) {\n  return selection.each(function () {\n    var firstChild = this.parentNode.firstChild;\n    if (firstChild) {\n      this.parentNode.insertBefore(this, firstChild);\n    }\n  });\n}\n\n},{}],20:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = createLocationOverall;\n\nvar _d = require(\"d3\");\n\nvar _d2 = _interopRequireDefault(_d);\n\nvar _ramda = require(\"ramda\");\n\nvar _ramda2 = _interopRequireDefault(_ramda);\n\nvar _jquery = require(\"jquery\");\n\nvar _jquery2 = _interopRequireDefault(_jquery);\n\nvar _reselect = require(\"reselect\");\n\nvar _createPopup = require(\"../page/createPopup.js\");\n\nvar _createPopup2 = _interopRequireDefault(_createPopup);\n\nvar _core = require(\"../data/core.js\");\n\nvar core = _interopRequireWildcard(_core);\n\nvar _compare = require(\"../data/compare.js\");\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction createLocationOverall(initialState) {\n\n    // defaults, and this object will hold the previous state after setState\n    var prevState = {\n        selector: \"\",\n        width: 500,\n        indicators: {},\n        locations: {},\n        cleanData: {},\n        selectedDimension: Object.keys(core.dimensionNames)[0],\n        afterSlide: function afterSlide() {}\n    };\n\n    // merge the initial state in with the default state\n    var state = Object.assign({}, prevState, initialState);\n\n    function setState(newState) {\n        // copy the old state into prevState\n        prevState = Object.assign({}, state);\n\n        Object.assign(state, newState);\n\n        update();\n    }\n\n    var popup = (0, _createPopup2.default)({\n        container: state.selector,\n        offset: 0,\n        triangle: \"top\",\n        isHidden: true,\n        closeBtn: false\n    });\n\n    var rootElement = _d2.default.select(state.selector);\n\n    var compareStatus = (0, _compare.compare)(_ramda2.default.compose(_ramda2.default.prop(_ramda2.default.__, core.statusOrder), function (d) {\n        return d.change.status;\n    }), _compare.descending);\n\n    var compareChangeMagnitude = (0, _compare.compare)(function (d) {\n        return d.change.changePct;\n    }, _compare.descending);\n\n    var compareHasChange = (0, _compare.compare)(function (d) {\n        return d.change.hasChange;\n    }, _compare.ascending);\n\n    var compareStatusThenChangeMagnitude = (0, _compare.composeComparators)([compareStatus, compareChangeMagnitude, compareHasChange]);\n\n    var overallSummaryForIndicator = _ramda2.default.curry(function (locations, data, indicator) {\n        return {\n            indId: indicator.id,\n            locations: _ramda2.default.compose(_ramda2.default.sort(compareStatusThenChangeMagnitude), _ramda2.default.map(function (loc) {\n                return {\n                    locId: loc.id,\n                    change: {\n                        changePct: core.directionCorrectedPercentChange(indicator, data[indicator.id][loc.id]),\n                        status: core.status(data[indicator.id][loc.id]),\n                        hasChange: core.hasChangeData(data[indicator.id][loc.id])\n                    },\n                    data: data[indicator.id][loc.id]\n                };\n            }), _ramda2.default.filter(core.notUsLocation), _ramda2.default.values)(locations)\n        };\n    });\n\n    var transformRawData = (0, _reselect.createSelector)(function (state) {\n        return state.locations;\n    }, function (state) {\n        return state.indicators;\n    }, function (state) {\n        return state.cleanData;\n    }, function (locations, indicators, cleanData) {\n        return _ramda2.default.compose(_ramda2.default.map(_ramda2.default.map(overallSummaryForIndicator(locations, cleanData))), _ramda2.default.groupBy(function (i) {\n            return i.dimension;\n        }), _ramda2.default.filter(core.isNotOverallIndicator), _ramda2.default.filter(core.indicatorHasHistoricalData(cleanData)), _ramda2.default.values)(indicators);\n    });\n\n    function changeEndPoints(ind) {\n\n        var groups = _ramda2.default.groupBy(function (x) {\n            return x.change.status;\n        }, ind.locations);\n\n        var improved = groups[\"improved\"] ? [0, groups[\"improved\"].length] : [0, 0],\n            steady = groups[\"steady\"] ? [improved[1], improved[1] + groups[\"steady\"].length] : [improved[1], improved[1]],\n            worse = groups[\"worse\"] ? [steady[1], steady[1] + groups[\"worse\"].length] : [steady[1], steady[1]];\n\n        return {\n            indId: ind.indId,\n            range: [0, worse[1]],\n            bars: [{ type: \"improved\", range: improved }, { type: \"steady\", range: steady }, { type: \"worse\", range: worse }],\n            locations: ind.locations\n        };\n    }\n\n    var xScale = _d2.default.scale.linear();\n\n    function update() {\n\n        var overallData = transformRawData(state);\n\n        var span = function span(x) {\n            return x[1] - x[0];\n        };\n        var indicatorName = function indicatorName(d) {\n            return state.indicators[d.indId].shortName;\n        };\n        // const improvementIndex = x => span(x.bars[0].range) - span(x.bars[2].range); // improved - worse\n        var mostImprovedLocationsIndex = function mostImprovedLocationsIndex(x) {\n            return span(x.bars[0].range);\n        };\n        // const improvementIndexComparator = compare(improvementIndex, descending);\n        var mostImprovedLocationsComparator = (0, _compare.compare)(mostImprovedLocationsIndex, _compare.descending);\n        var nameComparator = (0, _compare.compare)(indicatorName, _compare.ascending);\n        var overallImprovementComparator = (0, _compare.composeComparators)([mostImprovedLocationsComparator, nameComparator]);\n\n        var endPoints = _ramda2.default.compose(_ramda2.default.map(_ramda2.default.sort(overallImprovementComparator)), _ramda2.default.map(_ramda2.default.map(changeEndPoints)))(overallData);\n\n        xScale.range([2, state.width - 2]).domain(endPoints[\"ACCESS\"][0].range);\n\n        var dimensionGroups = rootElement.selectAll(\"div.dimension\").data(_ramda2.default.keys(endPoints), _ramda2.default.identity);\n\n        var dimensionGroupsEnter = dimensionGroups.enter().append(\"div\").attr(\"class\", \"dimension\");\n        dimensionGroups.exit().remove();\n\n        dimensionGroupsEnter.append(\"div\").attr(\"class\", \"dimension-label\").text(function (d) {\n            return core.dimensionNames[d];\n        }).on(\"click\", function (d, i) {\n            var selectedDimension = state.selectedDimension === d ? null : d;\n            setState({ selectedDimension: selectedDimension });\n        });\n\n        // accordion for dimension indicators\n        if (prevState.selectedDimension !== state.selectedDimension) {\n\n            dimensionGroups.each(function (d, i) {\n                var isSelected = state.selectedDimension === d;\n\n                isSelected ? (0, _jquery2.default)(this).find(\".indicators\").slideDown(250, state.afterSlide) : (0, _jquery2.default)(this).find(\".indicators\").slideUp(250, state.afterSlide);\n\n                (0, _jquery2.default)(this).toggleClass(\"is-expanded\", isSelected);\n            });\n        }\n\n        // make indicators\n        dimensionGroupsEnter.append(\"div\").attr(\"class\", \"indicators\")\n        // hide all but the first dimension\n        .style({ \"display\": function display(d, i) {\n                return i === 0 ? \"block\" : \"none\";\n            } });\n\n        var indicators = dimensionGroups.selectAll(\".indicators\");\n\n        var indicatorGroups = indicators.selectAll(\"div.indicator\").data(function (g) {\n            return endPoints[g];\n        }, function (d) {\n            return d.indId;\n        });\n\n        var indicatorEnter = indicatorGroups.enter().append(\"div\").attr(\"class\", \"indicator\");\n        indicatorGroups.exit().remove();\n\n        indicatorEnter.append(\"div\").attr({ \"class\": \"indicator-label\" }).text(function (d) {\n            return state.indicators[d.indId].shortName;\n        });\n        indicatorEnter.append(\"svg\");\n\n        indicatorGroups.select(\"svg\").attr(\"width\", state.width).attr(\"height\", 20);\n\n        var bars = indicatorGroups.select(\"svg\").selectAll(\"rect.status\").data(function (g) {\n            return g.bars;\n        }, function (d) {\n            return d.type;\n        });\n\n        bars.enter().append(\"rect\").attr(\"class\", \"status\");\n        bars.exit().remove();\n\n        var steadySpacing = 10;\n\n        bars.attr(\"class\", function (d) {\n            return \"status \" + d.type;\n        }).attr(\"x\", function (d) {\n            return xScale(d.range[0]) + (d.type === \"steady\" ? steadySpacing / 2 : 0);\n        }).attr(\"width\", function (d) {\n            return xScale(d.range[1]) - xScale(d.range[0]) - (d.type === \"steady\" ? steadySpacing : 0);\n        }).attr(\"y\", 6).attr(\"height\", 8).attr(\"rx\", function (d) {\n            return 4;\n        }).attr(\"ry\", function (d) {\n            return 4;\n        });\n\n        var hoverBars = indicatorGroups.select(\"svg\").selectAll(\"rect.hover-target\").data(function (g) {\n            return g.bars;\n        }, function (d) {\n            return d.type;\n        });\n\n        function selectBar(d) {\n\n            var parentData = _d2.default.select(this.parentNode).datum(),\n                indicator = state.indicators[parentData.indId];\n\n            // getting the position of the .indicator (i don't think you can get the position() of an svg element)\n            var parent = (0, _jquery2.default)(this).closest(\".indicator\");\n            var yPosition = parent.position().top + parent.height();\n\n            var xPadding = (0, _jquery2.default)(this).closest(\"svg\").offset().left - (0, _jquery2.default)(state.selector).offset().left;\n\n            var targetBar = _d2.default.select((0, _jquery2.default)(this).closest(\"svg\").find(\"rect.status.\" + d.type)[0]);\n\n            //targetBar.addClass(\"active\");\n            targetBar.transition().duration(200).attr(\"y\", 2).attr(\"rx\", function (d) {\n                return 8;\n            }).attr(\"ry\", function (d) {\n                return 8;\n            }).attr(\"height\", 16);\n\n            showPopUp(indicator, parentData, d, [xScale((d.range[1] - d.range[0]) / 2 + d.range[0]) - 1 + xPadding, yPosition]);\n        }\n\n        function deselectBar() {\n\n            _d2.default.select(state.selector).selectAll(\"rect.status\").transition().duration(200).attr(\"y\", 6).attr(\"rx\", function (d) {\n                return 4;\n            }).attr(\"ry\", function (d) {\n                return 4;\n            }).attr(\"height\", 8);\n\n            hidePopUp();\n\n            window.removeEventListener(\"touchstart\", deselectBar, true);\n        }\n\n        hoverBars.enter().append(\"rect\").attr(\"class\", \"hover-target\").on(\"mouseenter\", selectBar).on(\"touchstart\", function (d) {\n            selectBar.call(this, d);\n            window.addEventListener(\"touchstart\", deselectBar, true);\n        }).on(\"mouseleave\", deselectBar);\n\n        hoverBars.exit().remove();\n\n        hoverBars.attr(\"x\", function (d) {\n            return xScale(d.range[0]);\n        }).attr(\"width\", function (d) {\n            return xScale(d.range[1]) - xScale(d.range[0]);\n        }).attr(\"y\", 0).attr(\"height\", 20);\n    }\n\n    update();\n\n    function showPopUp(ind, parentData, data, point) {\n\n        var locationCount = data.range[1] - data.range[0],\n            description = data.type === \"improved\" ? \"improved\" : data.type === \"worse\" ? \"worsened\" : data.type === \"steady\" ? \"had little or no change*\" : \"\";\n\n        var note = data.type === \"steady\" ? \"<div class='indicator-overall__popup-note'>* Includes the number of local areas with no change or without sufficient data for this subpopulation to assess change over time</div>\" : \"\";\n\n        var html = (0, _jquery2.default)(\"\\n                <div class=\\\"indicator-overall__popup\\\">\\n                    <span class=\\\"\" + data.type + \"\\\"><strong>\" + locationCount + \"</strong> HRRs \" + description + \"</span>\\n                    out of \" + parentData.locations.length + \"\\n                    \" + note + \"\\n                </div>\");\n\n        popup.setState({\n            title: \"\",\n            html: html,\n            top: point[1],\n            left: point[0],\n            isHidden: false\n        });\n    }\n\n    function hidePopUp() {\n        popup.hidePopup();\n    }\n\n    // external api\n    return {\n        setWidth: function setWidth(width) {\n            return setState({ width: width });\n        }\n    };\n}\n\n},{\"../data/compare.js\":4,\"../data/core.js\":5,\"../page/createPopup.js\":11,\"d3\":\"d3\",\"jquery\":\"jquery\",\"ramda\":\"ramda\",\"reselect\":\"reselect\"}],21:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nexports.loadVizData = loadVizData;\n\nvar _d2 = require(\"d3\");\n\nvar _d3 = _interopRequireDefault(_d2);\n\nvar _ramda = require(\"ramda\");\n\nvar _ramda2 = _interopRequireDefault(_ramda);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar endpoints = [\"data/data.json\", \"data/indicators.json\", \"data/locations.json\"];\n\nvar zipCodeEndpoint = \"data/zipcodes.csv\";\n\nfunction loadZipCodeData() {\n\n    return new Promise(function (resolve, reject) {\n        _d3.default.csv(zipCodeEndpoint).row(function (d) {\n            return {\n                zip: d.zip,\n                hrr: +d.hrr\n            };\n        }).get(function (error, rows) {\n            if (error) reject(error);\n\n            resolve(_ramda2.default.indexBy(_ramda2.default.prop(\"zip\"), rows));\n        });\n    });\n}\n\nfunction loadVizData() {\n\n    var jsonPromises = endpoints.map(function (e) {\n        return fetch(e).then(function (response) {\n            return response.json();\n        });\n    });\n\n    jsonPromises.push(loadZipCodeData());\n\n    return Promise.all(jsonPromises).then(function (jsons) {\n        var _jsons = _slicedToArray(jsons, 4),\n            cleanData = _jsons[0],\n            indicators = _jsons[1],\n            locations = _jsons[2],\n            zips = _jsons[3];\n\n        return { cleanData: cleanData, indicators: indicators, locations: locations, zips: zips };\n    });\n}\n\n},{\"d3\":\"d3\",\"ramda\":\"ramda\"}],22:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = createLocationOverall;\n\nvar _d = require(\"d3\");\n\nvar _d2 = _interopRequireDefault(_d);\n\nvar _ramda = require(\"ramda\");\n\nvar _ramda2 = _interopRequireDefault(_ramda);\n\nvar _jquery = require(\"jquery\");\n\nvar _jquery2 = _interopRequireDefault(_jquery);\n\nvar _createPopup = require(\"../page/createPopup.js\");\n\nvar _createPopup2 = _interopRequireDefault(_createPopup);\n\nvar _core = require(\"../data/core.js\");\n\nvar core = _interopRequireWildcard(_core);\n\nvar _compare = require(\"../data/compare.js\");\n\nvar _collapsibleScale = require(\"./collapsibleScale.js\");\n\nvar _collapsibleScale2 = _interopRequireDefault(_collapsibleScale);\n\nvar _d3Extensions = require(\"./d3Extensions.js\");\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction createLocationOverall(initialState) {\n\n    var xPath = \"M9.442,6.983l3.044-3.036A1.731,1.731,0,1,0,10.036,1.5L6.993,4.537,3.952,1.5A1.731,1.731,0,0,0,1.5,3.943l3.04,3.039L1.5,10.019a1.731,1.731,0,0,0,2.449,2.445L6.991,9.428l3.042,3.039a1.731,1.731,0,0,0,2.45-2.445Z\";\n\n    // default state\n    var prevState = {\n        selector: \"\",\n        width: 0,\n        height: 0,\n        indicators: {},\n        locations: {},\n        cleanData: {},\n        activeLocationId: null,\n        lock: false,\n        onUnlock: function onUnlock() {}\n    };\n\n    // merge the initial state in with the default state before we build the svg\n    var state = Object.assign({}, prevState, initialState);\n\n    function setState(newState) {\n\n        // copy the state into prevState\n        prevState = Object.assign({}, state);\n\n        Object.assign(state, newState);\n\n        // if the locked location has changed (could be back to null)\n        if (!state.lock && prevState.lock) {\n            state.onUnlock();\n        }\n\n        // add touch away handler if a location is open\n        if (state.activeLocationId) {\n            window.addEventListener(\"touchstart\", handleTouchAwayLocation, true);\n        }\n\n        update();\n    }\n\n    var margin = {\n        top: 10,\n        right: 10,\n        bottom: 10,\n        left: 25 // room for location dot\n    };\n\n    var popup = (0, _createPopup2.default)({\n        container: state.selector,\n        offset: -6,\n        triangle: \"top\",\n        isHidden: true,\n        closeBtn: false\n    });\n\n    var svg = _d2.default.select(state.selector).append(\"svg\");\n\n    // Arrow heads\n    var defs = svg.append(\"defs\");\n\n    defs.append(\"marker\").attr(\"id\", \"arrow-overall\").attr(\"markerWidth\", 10).attr(\"markerHeight\", 10).attr(\"refX\", 0).attr(\"refY\", 2).attr(\"orient\", \"auto-start-reverse\").attr(\"markerUnits\", \"strokeWidth\").append(\"path\").attr(\"d\", \"M0,0 L0,4 L3,2 z\");\n\n    defs.append(\"pattern\").attr(\"id\", \"diagonal\").attr(\"patternUnits\", \"userSpaceOnUse\").attr(\"width\", 6).attr(\"height\", 6).append(\"path\").attr(\"d\", \"M-1,1 l 2,-2 M 0,6 l 6,-6 M 5,7 l 4,-4\");\n\n    var g = svg.append(\"g\").attr(\"transform\", \"translate(\" + margin.left + \",\" + margin.top + \")\");\n\n    var compareStatus = (0, _compare.compare)(_ramda2.default.compose(_ramda2.default.prop(_ramda2.default.__, core.statusOrder), function (d) {\n        return d.change.status;\n    }), _compare.descending);\n\n    var compareChangeMagnitude = (0, _compare.compare)(function (d) {\n        return d.change.changePct;\n    }, _compare.descending);\n\n    var compareHasChange = (0, _compare.compare)(function (d) {\n        return d.change.hasChange;\n    }, _compare.ascending);\n\n    var compareStatusThenChangeMagnitude = (0, _compare.composeComparators)([compareStatus, compareChangeMagnitude, compareHasChange]);\n\n    var overallSummaryForLocation = _ramda2.default.curry(function (indicators, data, location) {\n        return {\n            locId: location.id,\n            medicaidExpansion: location.medicaidExpansion,\n            indicators: _ramda2.default.compose(_ramda2.default.sort(compareStatusThenChangeMagnitude), _ramda2.default.map(function (ind) {\n                return {\n                    indId: ind.id,\n                    change: {\n                        changePct: core.directionCorrectedPercentChange(ind, data[ind.id][location.id]),\n                        status: core.status(data[ind.id][location.id]),\n                        hasChange: core.hasChangeData(data[ind.id][location.id])\n                    },\n                    data: data[ind.id][location.id]\n                };\n            }), _ramda2.default.filter(core.isNotOverallIndicator), _ramda2.default.values)(indicators)\n        };\n    });\n\n    function transformRawData(locations, indicators, data) {\n        return _ramda2.default.values(locations).filter(core.notUsLocation).map(overallSummaryForLocation(indicators, data));\n    }\n\n    function changeEndPoints(loc) {\n\n        var groups = _ramda2.default.groupBy(function (x) {\n            return x.change.status;\n        }, loc.indicators);\n\n        var statusKeys = [\"improved-full\", \"improved-half\", \"steady\", \"worse-half\", \"worse-full\"];\n\n        // find the bar lengths for each status for the location lines\n        var statuses = _ramda2.default.reduce(function (acc, statusKey) {\n\n            var indicatorCount = groups[statusKey] ? groups[statusKey].length : 0;\n            var nextTally = acc.tally + indicatorCount;\n\n            return {\n                tally: nextTally,\n                bars: acc.bars.concat({\n                    type: statusKey,\n                    range: [acc.tally, nextTally]\n                })\n            };\n        }, { tally: 0, bars: [] }, statusKeys);\n\n        // sort the indicators by the statusKeys (green to red)\n        var sortedIndicators = loc.indicators.sort(function (a, b) {\n            var getStatusIndex = function getStatusIndex(indicator) {\n                return statusKeys.indexOf(indicator.change.status);\n            };\n            return getStatusIndex(a) - getStatusIndex(b);\n        });\n\n        return Object.assign({}, loc, {\n            range: [0, statuses.tally],\n            bars: statuses.bars,\n            indicators: sortedIndicators\n        });\n    }\n\n    var indicatorXScale = _d2.default.scale.ordinal();\n\n    var overallData = transformRawData(state.locations, state.indicators, state.cleanData);\n\n    var span = function span(x) {\n        return x[1] - x[0];\n    };\n    var locationName = function locationName(d) {\n        return state.locations[d.locId].name;\n    };\n    var improvementIndex = function improvementIndex(x) {\n        return span(x.bars[0].range) - span(x.bars[2].range);\n    }; // improved - worse\n    var improvedIndicators = function improvedIndicators(x) {\n        return span(x.bars[0].range) + span(x.bars[1].range);\n    }; // sort by most improved indicators (0 and 1, improved-full/improved-half)\n    // const improvementIndexComparator = compare(improvementIndex, descending);\n    var nameComparator = (0, _compare.compare)(locationName, _compare.ascending);\n    var improvedIndicatorsComparator = (0, _compare.compare)(improvedIndicators, _compare.descending);\n    var overallImprovementComparator = (0, _compare.composeComparators)([improvedIndicatorsComparator, nameComparator]);\n\n    var endPoints = _ramda2.default.compose(_ramda2.default.sort(overallImprovementComparator), _ramda2.default.map(changeEndPoints), _ramda2.default.values)(overallData);\n\n    function update() {\n        var activeLocationId = state.activeLocationId;\n\n\n        var yScale = (0, _collapsibleScale2.default)().domain(endPoints.map(function (d) {\n            return d.locId;\n        })).activeLoc(activeLocationId);\n\n        var vizWidth = state.width - margin.left - margin.right;\n        var vizHeight = yScale.totalHeight();\n\n        var locationLineHeight = yScale.locationHeight() - 3;\n        var locationDotRadius = locationLineHeight / 2;\n        var locationDotArea = locationDotRadius * 2 + 3; // padding\n\n        var locationXScale = _d2.default.scale.linear().domain(endPoints[0].range).range([0, vizWidth]);\n\n        var columnIsExpanding = false;\n\n        svg.attr(\"width\", vizWidth + margin.left + margin.right).attr(\"height\", vizHeight + margin.top + margin.bottom);\n\n        /**\r\n         * @param  {Array} mouse : [x, y], see https://github.com/d3/d3-selection#mouse\r\n         * @return {Number} locationId\r\n         */\n        var findLocationAtMouse = function findLocationAtMouse(mouse) {\n            return yScale.domain()[_d2.default.bisect(yScale.range(), mouse[1]) - 1] || yScale.domain()[0];\n        };\n\n        svg.on(\"mouseleave\", function () {\n            if (state.lock) {\n                return;\n            }\n            setState({ activeLocationId: null });\n        });\n\n        g.on(\"mousemove\", function (d, i) {\n            if (columnIsExpanding || state.lock) {\n                return;\n            }\n\n            var hoveredLocationId = findLocationAtMouse(_d2.default.mouse(this));\n\n            if (hoveredLocationId === activeLocationId) {\n                return;\n            }\n\n            columnIsExpanding = true;\n            hidePopUp();\n            setState({ activeLocationId: hoveredLocationId });\n        }).on(\"click\", function (d, i) {\n\n            if (state.activeLocationId) {\n                return;\n            }\n\n            var hoveredLocationId = findLocationAtMouse(_d2.default.mouse(this));\n            setState({ activeLocationId: hoveredLocationId });\n        });\n\n        var locationGroups = g.selectAll(\"g.location\").data(endPoints, _ramda2.default.prop(\"locId\"));\n\n        locationGroups.enter().append(\"g\").attr(\"class\", \"location\").append(\"circle\").attr(\"class\", \"location-dot\");\n\n        locationGroups.exit().remove();\n\n        locationGroups.transition().duration(100).attr(\"transform\", function (d, i) {\n\n            // var columnIndex = d3.select(this.parentNode).datum().column;\n            return \"translate(0, \" + yScale(d.locId) + \")\";\n        }).style(\"opacity\", function (d) {\n            return d.locId === activeLocationId ? 0 : 1;\n        });\n\n        var locationDot = locationGroups.selectAll(\".location-dot\").attr(\"r\", locationDotRadius).attr(\"cx\", -locationDotArea) // move into margin\n        .attr(\"cy\", locationDotRadius).attr(\"opacity\", function (d) {\n            return d.medicaidExpansion === true ? 1 : 0;\n        });\n\n        var locationLines = locationGroups.selectAll(\"rect.status\").data(function (d) {\n            return d.bars;\n        }, _ramda2.default.prop(\"type\"));\n\n        locationLines.enter().append(\"rect\").attr(\"class\", \"status\");\n        locationLines.exit().remove();\n\n        locationLines.attr(\"class\", function (d) {\n            return \"status \" + d.type;\n        }).transition().attr(\"x\", function (d) {\n            return locationXScale(d.range[0]) + 1;\n        }).attr(\"y\", 0).attr(\"width\", function (d) {\n            return Math.max(0, locationXScale(d.range[1]) - locationXScale(d.range[0]) - 1);\n        }).attr(\"height\", yScale.locationHeight() - 3) // minus padding\n        .attr(\"rx\", 2).attr(\"ry\", 2).each(\"end\", function () {\n            columnIsExpanding = false;\n        });\n\n        var activeLocationGroup = g.select(\"g.active-location\");\n\n        if (activeLocationId && activeLocationGroup.empty()) {\n            activeLocationGroup = g.append(\"g\").attr(\"class\", \"active-location location-label\");\n        } else if (!activeLocationGroup.empty() && !activeLocationId) {\n            activeLocationGroup.remove();\n        }\n\n        var closeButton = g.select(\"path.close\");\n\n        if (closeButton.empty()) {\n            closeButton = g.append(\"path\").attr(\"class\", \"close\").attr(\"d\", xPath).attr(\"width\", 18).attr(\"height\", 18).style(\"display\", \"none\").on(\"click\", function () {\n                setState({ lock: false });\n            });\n        }\n\n        closeButton.style(\"display\", \"none\");\n\n        // let yLabelGroupLeft = g.select(\"g.y-label.left\");\n        //\n        // if (yLabelGroupLeft.empty()){\n        //     yLabelGroupLeft = g.append(\"g\").attr(\"class\", \"y-label left\");\n        //\n        //     yLabelGroupLeft.append(\"line\")\n        //         .attr(\"marker-start\", \"url(#arrow-overall)\");\n        //\n        //     yLabelGroupLeft.append(\"rect\")\n        //         .attr(\"class\", \"background\");\n        //\n        //     yLabelGroupLeft.append(\"text\")\n        //         .text(\"more improved\");\n        // }\n        //\n        // yLabelGroupLeft.select(\"line\")\n        //     .transition()\n        //     .attr(\"x1\", - 13).attr(\"x2\", - 13)\n        //     .attr(\"y1\", 6).attr(\"y2\", yScale.rangeBottom());\n        //\n        // yLabelGroupLeft.select(\"rect.background\")\n        //     .attr(\"x\", - 18)\n        //     .attr(\"y\", yScale.rangeMiddle() - 55)\n        //     .attr(\"width\", 10)\n        //     .attr(\"height\", 110);\n        //\n        // yLabelGroupLeft.select(\"text\")\n        //     .transition()\n        //     .attr(\"x\", - 10)\n        //     .attr(\"y\", yScale.rangeMiddle())\n        //     .attr(\"transform\", `rotate(-90, -10, ${yScale.rangeMiddle()})`);\n\n        // var yLabelGroupRight = g.select(\"g.y-label.right\");\n        //\n        // if (yLabelGroupRight.empty()){\n        //     yLabelGroupRight = g.append(\"g\").attr(\"class\", \"y-label right\");\n        //\n        //     yLabelGroupRight.append(\"line\")\n        //         .attr(\"marker-end\", \"url(#arrow-overall)\");\n        //\n        //     yLabelGroupRight.append(\"rect\")\n        //         .attr(\"class\", \"background\");\n        //\n        //     yLabelGroupRight.append(\"text\")\n        //         .text(\"less improved\");\n        // }\n        //\n        // yLabelGroupRight.select(\"line\")\n        //     .transition()\n        //     .attr(\"x1\", vizWidth + 13).attr(\"x2\",vizWidth + 13)\n        //     .attr(\"y1\", 0).attr(\"y2\", yScales[1].rangeBottom() - 6);\n        //\n        // yLabelGroupRight.select(\"rect.background\")\n        //     .attr(\"x\", vizWidth + 8)\n        //     .attr(\"y\", yScales[1].rangeMiddle() - 55)\n        //     .attr(\"width\", 10)\n        //     .attr(\"height\", 110);\n        //\n        // yLabelGroupRight.select(\"text\")\n        //     .transition()\n        //     .attr(\"x\", vizWidth + 10)\n        //     .attr(\"y\", yScales[1].rangeMiddle())\n        //     .attr(\"transform\", `rotate(90, ${vizWidth + 10}, ${yScales[1].rangeMiddle()})`);\n\n        // moveToFront(hoverZones);\n\n        if (activeLocationId) {\n            var label;\n            var indicatorDots;\n            var activeLocationDot;\n            var activeIndicatorId;\n\n            (function () {\n                var activeData = _ramda2.default.find(function (d) {\n                    return d.locId === activeLocationId;\n                }, endPoints);\n\n                var range = locationXScale.range();\n\n                indicatorXScale.rangeBands(range, 0.1).domain(activeData.indicators.map(_ramda2.default.prop(\"indId\")));\n\n                // Label\n\n                label = activeLocationGroup.select(\"text.label\");\n\n\n                if (label.empty()) {\n                    label = activeLocationGroup.append(\"text\").attr(\"class\", \"label\");\n                }\n\n                label.attr(\"x\", (range[1] - range[0]) / 2 + range[0]).attr(\"y\", yScale(activeLocationId) + 14).attr(\"dy\", \"1ex\").text(state.locations[activeLocationId].name);\n\n                // Dots\n\n                var dotHeight = 18;\n\n                indicatorDots = activeLocationGroup.selectAll(\"rect.indicator-dot\").data(activeData.indicators, _ramda2.default.prop(\"indId\"));\n\n\n                indicatorDots.enter().append(\"rect\").attr(\"class\", \"indicator-dot\");\n                indicatorDots.exit();\n\n                var positionDot = _ramda2.default.curry(function (active, d) {\n\n                    var offset = active ? [-1, -2] : [0, 0];\n\n                    return \"translate(\" + (indicatorXScale(d.indId) + offset[0]) + \", \" + (yScale(activeLocationId) + 32 + offset[1]) + \")\" + (active ? \"scale(1.2)\" : \"\");\n                });\n\n                indicatorDots.attr(\"x\", 0).attr(\"y\", 0).attr(\"rx\", 4).attr(\"ry\", 4).attr(\"transform\", positionDot(false)).attr(\"width\", indicatorXScale.rangeBand()).attr(\"height\", dotHeight)\n                // .attr(\"class\", d => d.change.status) why doesn't this work??\n                .classed(\"improved-full\", function (d) {\n                    return d.change.status === \"improved-full\";\n                }).classed(\"improved-half\", function (d) {\n                    return d.change.status === \"improved-half\";\n                }).classed(\"steady\", function (d) {\n                    return d.change.status === \"steady\";\n                }).classed(\"worse-half\", function (d) {\n                    return d.change.status === \"worse-half\";\n                }).classed(\"worse-full\", function (d) {\n                    return d.change.status === \"worse-full\";\n                }).classed(\"na\", function (d) {\n                    return _ramda2.default.isNil(d.data.years[0].value);\n                }).style(\"fill\", function (d) {\n                    return _ramda2.default.isNil(d.data.years[0].value) ? \"url(#diagonal)\" : \"\";\n                });\n\n                // Yellow dot\n                activeLocationDot = activeLocationGroup.select(\".location-dot\");\n\n\n                if (activeLocationDot.empty()) {\n                    activeLocationDot = activeLocationGroup.append(\"circle\").attr(\"class\", \"location-dot\");\n                }\n\n                activeLocationDot.attr(\"r\", locationDotRadius * 2).attr(\"cx\", -locationDotArea).attr(\"cy\", locationDotRadius + yScale(activeLocationId) + 32 - 2 + dotHeight / 2) // magic numbers from positionDot()\n                .attr(\"fill\", \"#e8ba1a\").attr(\"opacity\", function (d) {\n                    return activeData.medicaidExpansion === true ? 1 : 0;\n                });\n\n                // hover zone\n                var indicatorDotHoverZone = g.select(\"rect.hover-zone.indicator\");\n\n                closeButton.attr(\"transform\", \"translate(\" + (range[1] - 20) + \", \" + (yScale(activeLocationId) + 6) + \")\").style(\"display\", state.lock ? \"block\" : \"none\");\n\n                if (indicatorDotHoverZone.empty()) {\n                    indicatorDotHoverZone = g.append(\"rect\").attr(\"class\", \"hover-zone indicator\");\n                }\n\n                indicatorDotHoverZone.attr(\"fill\", \"blue\").attr(\"opacity\", 1);\n\n                indicatorDotHoverZone.attr(\"x\", range[0]).attr(\"y\", yScale(activeLocationId)).attr(\"width\", range[1] - range[0]).attr(\"height\", yScale.activeLocationHeight() - 2).on(\"mousemove\", function () {\n                    if (columnIsExpanding) {\n                        return;\n                    }\n                    var m = _d2.default.mouse(this);\n                    var indAtMouse = indicatorXScale.domain()[_d2.default.bisect(indicatorXScale.range(), m[0]) - 1] || indicatorXScale.domain()[0];\n\n                    if (indAtMouse === activeIndicatorId) {\n                        return;\n                    }\n                    activeIndicatorId = indAtMouse;\n                    // Deactivate all indicator nodes on switch\n                    activeLocationGroup.selectAll(\"rect.indicator-dot\").attr(\"transform\", positionDot(false));\n\n                    // Activate just the selected node\n                    var node = findIndicatorNode(activeLocationGroup, activeIndicatorId);\n                    node.attr(\"transform\", positionDot(true));\n\n                    var xPadding = (0, _jquery2.default)(this).closest(\"svg\").offset().left - (0, _jquery2.default)(state.selector).offset().left;\n                    var top = yScale(activeLocationId) + margin.top + yScale.activeLocationHeight() / 2;\n                    var offset = -1 * yScale.activeLocationHeight() / 2;\n                    var triangle = top < yScale.height() / 2 ? \"top\" : \"bottom\";\n\n                    showPopUp(state.indicators[activeIndicatorId], node.datum(), [indicatorXScale(activeIndicatorId) + indicatorXScale.rangeBand() / 2 + margin.left + xPadding, top], offset, triangle);\n                }).on(\"mouseleave\", function () {\n                    var node = findIndicatorNode(activeLocationGroup, activeIndicatorId);\n                    node.attr(\"transform\", positionDot(false));\n                    activeIndicatorId = null;\n                    hidePopUp();\n                }).on(\"click\", function () {\n                    setState({ lock: true });\n                });\n\n                (0, _d3Extensions.moveToFront)(indicatorDotHoverZone);\n                (0, _d3Extensions.moveToFront)(closeButton);\n\n                // add window click away listener\n                if (state.lock) {\n                    window.addEventListener(\"click\", handleClickAway, true);\n                } else {\n                    window.removeEventListener(\"click\", handleClickAway, true);\n                }\n            })();\n        }\n    }\n\n    function findIndicatorNode(parent, indId) {\n        return parent.selectAll(\"rect.indicator-dot\").filter(function (d) {\n            return d.indId === indId;\n        });\n    }\n\n    function showPopUp(ind, data, point, offset, triangle) {\n\n        var formatter = core.formatValue(ind);\n\n        var html = (0, _jquery2.default)(\"\\n            <div class=\\\"location-overall__popup\\\">\\n                <table>\\n                    <tbody>\\n                    <tr>\" + (!_ramda2.default.isNil(data.data.years[1].value) ? \"<td><span>\" + ind.years[1] + \"</span> <strong class=\\\"\" + data.change.status + \"\\\">\" + formatter(data.data.years[1].value, true) + \"</strong></td>\" + (!_ramda2.default.isNil(data.data.years[0].value) ? \"<td><span>\" + ind.years[0] + \"</span> <strong>\" + formatter(data.data.years[0].value, true) + \"</strong></td>\" : \"<td><em>Historic data not available</em></td>\") : \"<td><em>Data not available for this location</em></td>\") + \"</tr>\\n                    </tbody>\\n                </table>\\n            </div>\");\n\n        popup.setState({\n            title: \"<span class=\\\"indicator-label\\\">\" + ind.longName + \"</span>\",\n            html: html,\n            top: point[1],\n            left: point[0],\n            isHidden: false,\n            offset: offset,\n            triangle: triangle\n        });\n\n        // replace the location touch away with the popup touch away\n        window.addEventListener(\"touchstart\", handleTouchAwayPopup, true);\n        window.removeEventListener(\"touchstart\", handleTouchAwayLocation, true);\n    }\n\n    function hidePopUp() {\n        popup.hidePopup();\n    }\n\n    function handleClickAway(event) {\n\n        var clickIsInActiveLocation = (0, _jquery2.default)(event.target).closest(\".active-location\").length > 0;\n\n        if (state.activeLocationId && !clickIsInActiveLocation) {\n            clearLock();\n        }\n    }\n\n    // hide the popup, and listen for another touch away to hide the location\n    function handleTouchAwayPopup(e) {\n        if (!(0, _jquery2.default)(e.target).closest(state.selector).length) {\n            hidePopUp();\n            window.removeEventListener(\"touchstart\", handleTouchAwayPopup, true);\n            window.addEventListener(\"touchstart\", handleTouchAwayLocation, true);\n        }\n    }\n\n    function handleTouchAwayLocation(e) {\n        if (!(0, _jquery2.default)(e.target).closest(state.selector).length) {\n            clearLock();\n            window.removeEventListener(\"touchstart\", handleTouchAwayLocation, true);\n        }\n    }\n\n    function clearLock() {\n        setState({\n            activeLocationId: null, lock: false\n        });\n    }\n\n    update();\n\n    // external api\n    return {\n        setWidth: function setWidth(width) {\n            return setState({ width: width });\n        },\n        setActiveLocation: function setActiveLocation(loc) {\n            return setState({ activeLocationId: loc, lock: true });\n        }\n    };\n}\n\n},{\"../data/compare.js\":4,\"../data/core.js\":5,\"../page/createPopup.js\":11,\"./collapsibleScale.js\":18,\"./d3Extensions.js\":19,\"d3\":\"d3\",\"jquery\":\"jquery\",\"ramda\":\"ramda\"}]},{},[6]);\n"]}
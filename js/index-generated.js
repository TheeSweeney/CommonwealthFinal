!function t(e,a,n){function r(i,l){if(!a[i]){if(!e[i]){var s="function"==typeof require&&require;if(!l&&s)return s(i,!0);if(o)return o(i,!0);var d=new Error("Cannot find module '"+i+"'");throw d.code="MODULE_NOT_FOUND",d}var u=a[i]={exports:{}};e[i][0].call(u.exports,function(t){var a=e[i][1][t];return r(a?a:t)},u,u.exports,t,e,a,n)}return a[i].exports}for(var o="function"==typeof require&&require,i=0;i<n.length;i++)r(n[i]);return r}({1:[function(t,e,a){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t){var e=t.selector,a=t.expandable,n=t.onAnimationFrame;(0,u.default)(e).each(function(t,e){var r=(0,u.default)(e).find(".js-label").html()||"",o=(0,u.default)(e).find(".js-body").html()||"",l=(0,u.default)(e).find(".js-title").html()||"",d=(0,u.default)(e).hasClass("fade");s.default.render(i.default.createElement(h,{titleHtml:l,bodyHtml:o,labelHtml:r,expandable:a,fade:d,onAnimationFrame:n}),e)})}Object.defineProperty(a,"__esModule",{value:!0}),a.attachCalloutBoxToDom=r;var o=t("react"),i=n(o),l=t("react-dom"),s=n(l),d=t("jquery"),u=n(d),c=t("classnames"),f=n(c),p=t("../page/initNav.js"),h=i.default.createClass({displayName:"CalloutBox",propTypes:{titleHtml:o.PropTypes.string,bodyHtml:o.PropTypes.string,labelHtml:o.PropTypes.string,expandable:o.PropTypes.bool,fade:o.PropTypes.bool,onAnimationFrame:o.PropTypes.func},getDefaultProps:function(){return{labelHtml:i.default.createElement("h2",null,"Expandable Box"),titleHtml:"",bodyHtml:"",expandable:!0,onAnimationFrame:function(){}}},getInitialState:function(){return{isOpen:!1}},componentDidMount:function(){var t=(0,u.default)(this.refs.body);(0,u.default)(t).css({display:this.state.isOpen||!this.props.expandable||this.props.fade?"block":"none"}),this.props.fade&&(0,u.default)(t).css({height:"100px"})},componentDidUpdate:function(t,e){if(e.isOpen!==this.state.isOpen){var a=(0,u.default)(this.refs.body);this.state.isOpen?a.css("height","auto").hide().slideDown({progress:this.props.onAnimationFrame}):a.animate({height:this.props.fade?"100px":"0px"},{progress:this.props.onAnimationFrame}),(0,p.scrollBodyTo)((0,u.default)(this.refs.container).offset().top-16,400)}if(this.props.expandable===!1){var n=(0,u.default)(this.refs.body);n.show()}},handleToggleClick:function(){this.setState({isOpen:!this.state.isOpen})},render:function(){var t=this.props,e=t.bodyHtml,a=t.titleHtml,n=t.labelHtml,r=t.expandable,o=this.state.isOpen,l=(0,f.default)("callout-box",{"is-expanded":o});return i.default.createElement("div",{className:l,ref:"container"},i.default.createElement("div",{className:"callout-box__label-wrapper"},i.default.createElement("div",{className:"callout-box__label",dangerouslySetInnerHTML:{__html:n}})),a&&i.default.createElement("div",{className:"callout-box__title",dangerouslySetInnerHTML:{__html:a}}),i.default.createElement("div",{className:"callout-box__body",dangerouslySetInnerHTML:{__html:e},ref:"body"}),r&&i.default.createElement("div",{className:"callout-box__toggle",onClick:this.handleToggleClick},o?"Close":"Expand"))}});a.default=h},{"../page/initNav.js":12,classnames:"classnames",jquery:"jquery",react:"react","react-dom":"react-dom"}],2:[function(t,e,a){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e.default=t,e}function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}Object.defineProperty(a,"__esModule",{value:!0});var i=t("react"),l=r(i),s=t("jquery"),d=r(s),u=t("ramda"),c=r(u),f=t("classnames"),p=r(f),h=t("./munchSlopeChartData.js"),m=r(h),v=t("../../data/core.js"),g=n(v),y=l.default.PropTypes,w=y.shape,b=y.object,j=[{name:"All",value:"all"},{name:"Medicaid Expanded",value:"med-exp"},{name:"Upward",value:"upward"},{name:"Downward",value:"downward"}],_=20;a.default=l.default.createClass({displayName:"SlopeChart",propTypes:{data:w({cleanData:b,indicators:b,locations:b})},getInitialState:function(){return{selectedIndicatorId:g.overallIndicatorIds[0],leftLocations:[],rightLocations:[],locationsData:{},hoveredLocationId:null,selectedFilter:j[0].value,shouldRecalculateLines:!1,svgWidth:0}},componentWillMount:function(){this.componentWillReceiveProps(this.props)},componentDidMount:function(){this.forceUpdate(),window.addEventListener("resize",this.calculateLineData),window.addEventListener("scroll",this.calculateLineData)},componentWillUnmount:function(){window.removeEventListener("resize",this.calculateLineData),window.removeEventListener("scroll",this.calculateLineData)},componentWillReceiveProps:function(t){this.munchIndicatorData({data:t.data})},componentDidUpdate:function(t,e){this.state.shouldRecalculateLines&&this.calculateLineData()},munchIndicatorData:function(t){var e=t.data,a=void 0===e?this.props.data:e,n=t.selectedIndicatorId,r=void 0===n?this.state.selectedIndicatorId:n,o=(0,m.default)(a,r),i=o.leftLocations,l=o.rightLocations,s=o.locationsData,d={leftLocations:i,rightLocations:l,locationsData:s,shouldRecalculateLines:!0,selectedIndicatorId:r};this.setState(d)},calculateLineData:function(){var t=this,e=this.svg?(0,d.default)(this.svg).width():0,a=this.locations?Math.max.apply(null,c.default.values(this.locations).map(function(t){return(0,d.default)(t.left).position().top})):0,n=a+20,r=c.default.map(function(e){if(!t.locations||!t.svg)return null;var a=function(t){return t.position().top+t.height()/2},n=a((0,d.default)(t.locations[e.data.orderData.left.drawLineFromId].left)),r=a((0,d.default)(t.locations[e.data.orderData.right.drawLineFromId].right)),o=e.data.years[0].rank,i=e.data.years[1].rank,l=o>i?"#7c7":o<i?"#c77":"#999";return Object.assign({},e,{lineData:{leftY:n,rightY:r,color:l}})},this.state.locationsData);this.setState({locationsData:r,svgHeight:n,svgWidth:e-2*_,shouldRecalculateLines:!1})},saveLocationRef:function(t,e,a){a&&(this.locations||(this.locations={}),this.locations[e]=Object.assign({},this.locations[e],o({},t,a)))},handleLocationHover:function(t){this.setState({hoveredLocationId:t})},handleMedicaidChange:function(t){var e=t.target.checked?"med-exp":"all";this.setState({selectedFilter:e})},handleIndicatorChange:function(t){this.munchIndicatorData({selectedIndicatorId:t.target.value})},handleMouseMove:function(t){var e=this.state,a=e.svgWidth,n=e.hoveredLocationId,r=e.locationsData,o=(0,d.default)(this.svg).offset(),i=t.pageY-o.top,l=t.pageX-o.left,s=Object.keys(r).reduce(function(t,e){var n=r[e],o=n.lineData,s=(o.rightY-o.leftY)/a,d=s*l+o.leftY,u=Math.abs(d-i);return u<t.distance?{distance:u,id:n.id}:t},{id:null,distance:1/0});s.id!==n&&this.setState({hoveredLocationId:s.id})},drawTick:function(t,e){var a=this.state,n=a.locationsData,r=a.hoveredLocationId,o=n[t],i=o.lineData;if(i){var s=o.id===r,u="left"===e?o.data.orderData.left:o.data.orderData.right,c="left"===e?function(t){return t.leftY}:function(t){return t.rightY},f="left"===e?-12:12,p="left"===e?-4:4,h=(0,d.default)(this.locations[u.drawLineFromId].left).height(),m=u.tieOffset*h-1*h/2;return u.isSingle||!u.hasTiedBefore?"":l.default.createElement("path",{key:t,transform:"translate(0,"+c(i)+")",d:"M"+f+",7 l0,"+m+" l"+p+",0",fill:"none",stroke:s?"#3b3b3b":"#ccc",strokeWidth:1,style:{shapeRendering:"crispEdges"}})}},render:function(){var t=this,e=this.state,a=e.leftLocations,n=e.rightLocations,r=e.locationsData,o=e.hoveredLocationId,i=e.svgWidth,s=e.svgHeight,d=e.selectedFilter,u=e.selectedIndicatorId,f=function(t){return t.id===o},m=function(t,e){var a=r[o];if(!a)return v(e);var n=(0,h.leftOrRightToIndex)(t),i=e.data.years[n].rank,l=a.data.years[n].rank;return i!==l},v=function(t){if(!t.lineData)return!1;if(null!==o)return!f(t);var e=t.lineData;return"med-exp"===d&&t.medicaidExpansion===!1||"upward"===d&&(t.medicaidExpansion===!1||e.leftY<=e.rightY)||"downward"===d&&(t.medicaidExpansion===!1||e.leftY>=e.rightY)},y=.2*i,w=function(t){return t===o?1:0};return l.default.createElement("div",null,l.default.createElement("div",{className:"slope-chart__indicator-selector"},l.default.createElement("select",{name:"indicator",value:u,onChange:this.handleIndicatorChange},g.overallIndicatorIds.map(function(e){return l.default.createElement("option",{key:e,value:e},t.props.data.indicators[e].shortName," ")})),l.default.createElement("label",{className:"input-checkbox"},l.default.createElement("input",{type:"checkbox",onChange:this.handleMedicaidChange}),l.default.createElement("span",null)," Medicaid Expansion States ",l.default.createElement("span",{className:"slope-chart__location-dot"}))),l.default.createElement("div",{className:"slope-chart"},l.default.createElement("div",{className:"slope-chart__left",ref:function(e){return t.leftDiv=e}},l.default.createElement("div",{className:"slope-chart__column-title"},"Baseline Rank"),a.map(function(e){var a=r[e],n=(0,p.default)("slope-chart__location",{"is-location-dimmed":v(a),"is-rank-dimmed":m("left",a),"is-hovered":f(a),"is-last-in-group":a.data.orderData.left.isLastInGroup,"is-first-in-group":a.data.orderData.left.isFirstInGroup,"has-tied-before":a.data.orderData.left.hasTiedBefore,"has-tied-after":a.data.orderData.left.hasTiedAfter,"is-tied":a.data.orderData.left.isTied,"is-single":a.data.orderData.left.isSingle});return l.default.createElement("div",{className:n,key:a.abbreviation,onMouseEnter:t.handleLocationHover.bind(null,a.id),onMouseLeave:t.handleLocationHover.bind(null,null),ref:function(e){return t.saveLocationRef("left",a.id,e)}},l.default.createElement("span",{className:"slope-chart__location-text"},l.default.createElement("span",{className:"slope-chart__location-name"},a.name),l.default.createElement("span",{className:"slope-chart__location-rank"},a.data.years[0].rank)))})),l.default.createElement("div",{className:"slope-chart__lines"},l.default.createElement("svg",{height:s,ref:function(e){return t.svg=e},onMouseMove:this.handleMouseMove,onMouseLeave:this.handleLocationHover.bind(null,null)},l.default.createElement("g",{className:"left-ticks",transform:"translate("+_+", 0)"},c.default.compose(c.default.map(function(e){return t.drawTick(e,"left")}),c.default.sortBy(w))(a)),l.default.createElement("g",{transform:"translate("+_+", 0)"},a.map(function(e){if(!t.locations||!t.svg)return null;var a=r[e],n=a.lineData;if(n){var o=v(a)?.2:1;return l.default.createElement("path",{key:a.id,d:"\n                                                M0,"+n.leftY+"\n                                                C"+y+","+n.leftY+"\n                                                 "+(i-y)+","+n.rightY+"\n                                                 "+i+","+n.rightY,stroke:n.color,strokeWidth:"2",opacity:o,fill:"none"})}})),l.default.createElement("g",{className:"right-ticks",transform:"translate("+(i+_)+", 0)"},c.default.compose(c.default.map(function(e){return t.drawTick(e,"right")}),c.default.sortBy(w))(n)))),l.default.createElement("div",{className:"slope-chart__right"},l.default.createElement("div",{className:"slope-chart__column-title"},"2017 Scorecard Rank"),n.map(function(e){var a=r[e],n=(0,p.default)("slope-chart__location",{"is-location-dimmed":v(a),"is-rank-dimmed":m("right",a),"is-hovered":f(a),"is-last-in-group":a.data.orderData.right.isLastInGroup,"is-first-in-group":a.data.orderData.right.isFirstInGroup,"has-tied-before":a.data.orderData.right.hasTiedBefore,"has-tied-after":a.data.orderData.right.hasTiedAfter,"is-tied":a.data.orderData.right.isTied,"is-single":a.data.orderData.right.isSingle});return l.default.createElement("div",{className:n,key:a.abbreviation,onMouseEnter:t.handleLocationHover.bind(null,a.id),onMouseLeave:t.handleLocationHover.bind(null,null),ref:function(e){return t.saveLocationRef("right",a.id,e)}},l.default.createElement("span",{className:"slope-chart__location-text"},l.default.createElement("span",{className:"slope-chart__location-rank"},a.data.years[1].rank),l.default.createElement("span",{className:"slope-chart__location-name"},a.name)),l.default.createElement("span",{className:(0,p.default)("slope-chart__location-dot",{"is-hidden":!a.medicaidExpansion})}))}))),l.default.createElement("p",{className:"note"},l.default.createElement("span",{className:"slope-chart__location-dot"})," indicates states that expanded Medicaid under the Affordable Care Act as of January 1, 2015."))}})},{"../../data/core.js":5,"./munchSlopeChartData.js":3,classnames:"classnames",jquery:"jquery",ramda:"ramda",react:"react"}],3:[function(t,e,a){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e.default=t,e}function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){var a=t.cleanData,n=(t.indicators,t.locations);if(l.default.not(l.default.contains(e,d.overallIndicatorIds)))return void console.error("invalid selectedIndicatorId: ",e);var r=l.default.filter(d.notUsLocation,n),o=function(t){return a[e][t]},i=function(t){return t.years[0].rank-t.years[1].rank},s=function(t){var e=f(t);return(0,c.compare)(function(t){return o(t.id).years[e].rank},c.ascending)},u=function(t){return l.default.compose(l.default.map(l.default.prop("id")),l.default.sort(s(t)),l.default.values)(r)},p=u("left"),h=u("right"),m=l.default.curry(function(t,e,a){var n=o(e),r=o(a);if(!n||!r)return!1;var i=f(t),l=n.years[i].rank,s=r.years[i].rank;return l===s}),v=function(t,e){var a="left"===t?p:"right"===t?h:console.error('leftOrRight should be "left" or "right" but was given '+t+"!"),n=function e(n){var r=a[n],o=a[n-1];return o&&m(t,r,o)?e(n-1):r},r=l.default.findIndex(l.default.equals(e.id),a),o=l.default.findIndex(m(t,e.id),a),i=m(t,a[r],a[r-1]),s=m(t,a[r],a[r+1]),d=i&&!s,u=!i&&s,c=s||i,f=!s&&!i,v=r-o;return{hasTiedBefore:i,hasTiedAfter:s,isLastInGroup:d,isFirstInGroup:u,isTied:c,isSingle:f,tieOffset:v,drawLineFromId:n(r)}},g=function(t){var e=o(t.id);return{change:{rank:i(e)},years:e.years,orderData:{left:v("left",t),right:v("right",t)}}},y=l.default.compose(l.default.map(function(t){return l.default.merge(t,{data:g(t)})}))(r);return{leftLocations:p,rightLocations:h,locationsData:y}}Object.defineProperty(a,"__esModule",{value:!0}),a.leftOrRightToIndex=void 0,a.default=o;var i=t("ramda"),l=r(i),s=t("../../data/core.js"),d=n(s),u=t("d3"),c=(r(u),t("../../data/compare.js")),f=a.leftOrRightToIndex=function(t){return"left"===t?0:"right"===t?1:console.error('leftOrRight should be "left" or "right" but was given '+t+"!")}},{"../../data/compare.js":4,"../../data/core.js":5,d3:"d3",ramda:"ramda"}],4:[function(t,e,a){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e.default=t,e}function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(a,"__esModule",{value:!0}),a.compare=a.descending=a.ascending=a.composeComparators=void 0;var o=t("ramda"),i=r(o),l=t("./core.js");n(l),a.composeComparators=function(t){return function(e,a){return t.reduce(function(t,n){return 0!==t?t:n(e,a)},0)}},a.ascending=i.default.lt,a.descending=i.default.gt,a.compare=i.default.curry(function(t,e){return i.default.comparator(function(a,n){return e(t(a),t(n))})})},{"./core.js":5,ramda:"ramda"}],5:[function(t,e,a){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t){return t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}function o(t){var e=d.default.max(t),a=d.default.min(t),n=e/a;return n<2?Math.round(100*(n-1))+"%":Math.round(n)+"x"}Object.defineProperty(a,"__esModule",{value:!0}),a.indicatorHasHistoricalData=a.formatValue=a.latestYearValue=a.getData=a.getChangeStatus=a.overallIndicatorChangeStatus=a.getChange=a.getOverallIndicatorChange=a.dataPointOrderByStatus=a.status=a.statusOrder=a.directionCorrectedPercentChange=a.magnitudeOfChange=a.hasChangeData=a.notUsLocation=a.isUsLocation=a.lowerIsBetter=a.isNotOverallIndicator=a.isOverallIndicator=a.overallIndicatorIds=a.dimensionNames=void 0,a.calculateDifferenceDescription=o;var i=t("ramda"),l=n(i),s=t("d3"),d=n(s),u=(a.dimensionNames={ACCESS:"Access and Affordability",QUALITY:"Prevention and Treatment",USE:"Avoidable Hospital Use and Costs",LIVES:"Healthy Lives"},a.overallIndicatorIds=["OVERALL","a100","q100","u100","h100"]),c=a.isOverallIndicator=function(t){return l.default.contains(t.id,u)},f=(a.isNotOverallIndicator=l.default.complement(c),a.lowerIsBetter=function(t){return"Low"===t.direction}),p=a.isUsLocation=l.default.propEq("id",0),h=(a.notUsLocation=l.default.complement(p),a.hasChangeData=function(t){return t.change&&!l.default.isNil(t.change.delta)}),m=a.magnitudeOfChange=function(t){return h(t)?Math.abs(t.change.delta/t.years[0].value):0},v=(a.directionCorrectedPercentChange=function(t,e){return m(e)*(f(t)?-1:1)},a.statusOrder={worse:0,steady:1,improved:2}),g=a.status=function(t){return t.change.improved||"steady"},y=(a.dataPointOrderByStatus=l.default.compose(l.default.prop(l.default.__,v),g),a.getOverallIndicatorChange=function(t){return t.years[0].rank-t.years[1].rank}),w=(a.getChange=l.default.curry(function(t,e){return c(t)?y(e):e.change.delta}),a.overallIndicatorChangeStatus=function(t){var e=y(t);return e>0?"improved":e<0?"worse":"steady"});a.getChangeStatus=l.default.curry(function(t,e){return c(t)?w(e):e.change.improved}),a.getData=l.default.curry(function(t,e,a){return c(t)?a.years[e].rank:a.years[e].value}),a.latestYearValue=function(t){return t.years[1].value},a.formatValue=l.default.curry(function(t,e,a){return"percent"===t.dataType?e+(a?"<sup>%</sup>":"%"):"dollars"===t.dataType?(a?"<sup>$</sup>":"$")+r(e):"rank"===t.dataType?(a?"<sup>#</sup>":"#")+e:e}),a.indicatorHasHistoricalData=l.default.curry(function(t,e){return l.default.any(function(t){return!l.default.isNil(t.years[0].value)},l.default.values(t[e.id]))})},{d3:"d3",ramda:"ramda"}],6:[function(t,e,a){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}var r=t("jquery"),o=n(r),i=t("react"),l=n(i),s=t("react-dom"),d=n(s),u=t("ramda"),c=n(u),f=t("./page/initPage.js"),p=n(f),h=t("./viz/location-overall.js"),m=n(h),v=t("./viz/indicator-overall.js"),g=(n(v),t("./page/common.js")),y=t("./page/typeAhead.js"),w=t("./components/SlopeChart/SlopeChart.jsx"),b=n(w);t("./sniff.min.js");var j=t("./viz/loadVizData.js");(0,j.loadVizData)().then(function(t){var e=t.cleanData,a=t.locations,n=t.indicators,r=t.zips,i=c.default.filter(function(t){return"US"!==t.abbreviation},a);d.default.render(l.default.createElement(b.default,{data:{cleanData:e,locations:a,indicators:n}}),document.querySelector(".js-vidz-slope-chart"));var s=".js-viz-location-overall",u=(0,m.default)({selector:s,width:(0,o.default)(s).width(),height:550,locations:i,indicators:n,cleanData:e,onUnlock:function(){f.setValue("")}});g.resize$.onValue(function(t){u.setWidth((0,o.default)(s).width())});var f=(0,y.createTypeAhead)(".js-viz-location-overall__typeahead .typeahead","name",(0,y.zipHrrSource)(i,r),function(t){u.setActiveLocation(t.id)});g.reflow$.emit("viz's loaded")}),(0,p.default)(),(0,o.default)("body").removeClass("cloak")},{"./components/SlopeChart/SlopeChart.jsx":2,"./page/common.js":9,"./page/initPage.js":13,"./page/typeAhead.js":15,"./sniff.min.js":16,"./viz/indicator-overall.js":20,"./viz/loadVizData.js":21,"./viz/location-overall.js":22,jquery:"jquery",ramda:"ramda",react:"react","react-dom":"react-dom"}],7:[function(t,e,a){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(a,"__esModule",{value:!0}),a.default=function(){var t,e=o.default.stream(function(e){return t=e,function(){t=void 0}});return e.emit=function(e){return t&&t.emit(e),this},e.error=function(e){return t&&t.error(e),this},e.end=function(){return t&&t.end(),this},e.emitEvent=function(e){return t&&t.emitEvent(e),this},e.setName("emitter")};var r=t("kefir"),o=n(r)},{kefir:"kefir"}],8:[function(t,e,a){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t){var e=t.onLarge,a=void 0===e?function(){}:e,n=t.onMedium,r=void 0===n?function(){}:n,o=t.onSmall,i=void 0===o?function(){}:o;u.onValue(function(t){"small"===t?i():"medium"===t?r():a()})}Object.defineProperty(a,"__esModule",{value:!0}),a.default=r;var o=t("jquery"),i=n(o),l=t("./common.js"),s=750,d=900,u=(0,l.toPropertyFromResize)(function(t){return(0,i.default)(window).width()}).map(function(t){return t<s?"small":t<d?"medium":"large"}).skipDuplicates()},{"./common.js":9,jquery:"jquery"}],9:[function(t,e,a){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t){return l.default.merge([p,f]).map(t).toProperty(t)}function o(t){var e=t.element,a=e.parentNode,n=function(){var t=e.getBoundingClientRect();return{height:t.height,width:t.width,top:t.top+window.pageYOffset}},o=r(n),i=function(){var t=a.getBoundingClientRect();return{top:t.top+window.pageYOffset,right:(0,d.default)(window).width()-t.right+window.pageXOffset,bottom:t.bottom+window.pageYOffset,left:t.left+window.pageXOffset,width:t.width,height:t.height,vizOnLeft:(0,d.default)(a).hasClass("viz-section--viz-left")}},s=r(i),u=l.default.combine([h,o,s],function(t,e,a){return{scroll:t,parentMeasures:a,elementMeasures:e}});return u}Object.defineProperty(a,"__esModule",{value:!0}),a.scroll$=a.resize$=a.reflow$=void 0,a.toPropertyFromResize=r,a.createPositionStream=o;var i=t("kefir"),l=n(i),s=t("jquery"),d=n(s),u=t("./Kefir.emitter.js"),c=n(u),f=a.reflow$=(0,c.default)(),p=a.resize$=l.default.fromEvents(window,"resize"),h=a.scroll$=l.default.fromEvents(window,"scroll").map(function(t){return window.pageYOffset}).toProperty(function(t){return window.pageYOffset})},{"./Kefir.emitter.js":7,jquery:"jquery",kefir:"kefir"}],10:[function(t,e,a){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t){function e(t){27===(t.which||t.charCode||t.keyCode)&&n()}function a(){function t(){var t=d.outerWidth(),e=d.outerHeight();"number"==typeof l&&(e>t*l?(d.height(t*l),d.width(t)):(d.height(e),d.width(e*(1/l)))),s.removeClass("is-hidden")}s.addClass("is-hidden"),d.height("auto"),d.width("auto"),c.html(o.html());var e=c.find("img");e.length?e.on("load",t):t()}function n(){s.addClass("is-hidden"),s.on("transitionend",function(){s.remove()}),(0,i.default)(document).off("keyup",e),(0,i.default)(window).off("resize",n)}var r=t.html,o=void 0===r?"":r,l=t.aspectRatio,s=(0,i.default)("<div>").addClass("modal-background").on("click",n),d=(0,i.default)("<div>").addClass("modal-popup").on("click",function(t){return t.stopPropagation()}),u=(0,i.default)("<div>").addClass("modal-popup__close").html("<svg class='svg-x'> <use xlink:href='img/svg-sprite.svg#x'></use> </svg>").on("click",n),c=(0,i.default)("<div>").addClass("modal-html");return d.append(u).append(c),s.append(d),(0,i.default)("body").append(s),(0,i.default)(window).on("resize",a),(0,i.default)(document).on("keyup",e),a(),{removeModal:n}}Object.defineProperty(a,"__esModule",{value:!0}),a.default=r;var o=t("jquery"),i=n(o)},{jquery:"jquery"}],11:[function(t,e,a){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t){function e(t){d=Object.assign({},u),Object.assign(u,t),l()}function a(t){var e=(0,i.default)(t.target).closest(".popup").length;e||o()}function n(t){27===(t.which||t.charCode||t.keyCode)&&o()}function r(){window.removeEventListener("click",a,!0),window.removeEventListener("touchstart",a,!0),window.removeEventListener("resize",a,!0),window.removeEventListener("keyup",n,!0),u.isHidden!==!0&&e({isHidden:!0})}function o(){r(),c.on("transitionend",function(){c.remove()})}function l(){var t=u.top,e=u.left,a=u.offset,n=u.triangle,r=u.isHidden,o=u.html,i=u.title,l=u.flipToContain;h.html(o),f.html(i);var m=(0,s.default)({popup:c.get(0),triangleSize:p.outerHeight(),top:t,left:e,offset:a,triangle:n,flipToContain:l});d.isHidden&&!r&&c.css({top:m.popupTop+"px",left:m.popupLeft+"px"}),c.css({opacity:r?0:1,transform:r?"scale(0.9)":"scale(1)",top:m.popupTop,left:m.popupLeft,width:u.width},250,"easeInOutCubic").removeClass(function(t,e){return(e.match(/\bis-triangle-\S+/g)||[]).join(" ")}).addClass("is-triangle-"+m.triangleSide).toggleClass("popup--hidden",r),p.css({transform:"top"===m.triangleSide||"bottom"===m.triangleSide?"translateX("+m.triangleOffset+"px)":"translateY("+m.triangleOffset+"px)"}),c.toggleClass("no-title",!i)}var d={title:"",html:"",top:0,left:0,width:"",offset:0,container:"body",triangle:"bottom",closeBtn:!0,isHidden:!1,flipToContain:!1},u=Object.assign({},d,t),c=(0,i.default)("<div class='popup'>").css({opacity:0,width:u.width,transform:"scale(0.89)","pointer-events":u.closeBtn?"auto":"none"}),f=(0,i.default)("<div>").addClass("popup__title"),p=(0,i.default)("<div>").addClass("popup__triangle"),h=(0,i.default)("<div>").addClass("popup__content");if(u.closeBtn){var m=(0,i.default)("<div>").addClass("popup__x-icon").html("<svg class='svg-x'> <use xlink:href='img/svg-sprite.svg#x'></use> </svg>").on("click",o);c.append(m),window.addEventListener("click",a,!0),window.addEventListener("touchstart",a,!0),window.addEventListener("resize",a,!0),window.addEventListener("keyup",n,!0)}return c.append(f),c.append(p),c.append(h),(0,i.default)(u.container).append(c),l(),{setState:e,hidePopup:r,removePopup:o}}Object.defineProperty(a,"__esModule",{value:!0}),a.default=r;var o=t("jquery"),i=n(o),l=t("../utils/calculatePopupOffsets.js"),s=n(l);i.default.extend(i.default.easing,{easeInOutCubic:function(t,e,a,n,r){return(e/=r/2)<1?n/2*e*e*e+a:n/2*((e-=2)*e*e+2)+a}})},{"../utils/calculatePopupOffsets.js":17,jquery:"jquery"}],12:[function(t,e,a){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(){return(0,f.default)("nav").outerHeight()}function o(t){function e(){(0,f.default)(n).find("nav").css({position:"relative",top:"auto",left:"auto",right:"auto"})}function a(t){o.emit(t)}var n=t.element,r=(0,m.createPositionStream)({element:n}),o=(0,h.default)();return r.filterBy(o).onValue(function(t){var e=t.scroll,a=t.parentMeasures,r=t.elementMeasures,o=a,i=r,l=e>i.top;(0,f.default)(n).find("nav").css({position:l?"fixed":"absolute",top:l?0:"auto",left:o.left,right:o.right})}),o.filterBy(o.map(function(t){return!t})).onValue(e),{toggleStickyNav:a,isSticky$:o}}function i(){var t=(0,f.default)(".chapter").map(function(t,e){return{id:(0,f.default)(e).attr("id"),top:(0,f.default)(e).offset().top}}).get();return t}function l(){var t=o({element:(0,f.default)(".nav-holder").get(0)}),e=t.toggleStickyNav,n=t.isSticky$,l=(0,m.toPropertyFromResize)(r);(0,f.default)("nav a").on("click",function(t,e){t.preventDefault();var a=(0,f.default)((0,f.default)(this).attr("href"));a&&y(a.offset().top)}),u.default.combine([l,n]).onValue(function(t){var e=s(t,2),n=e[0],r=e[1];(0,f.default)(".nav-holder").height(n),a.scrollBodyTo=y=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:750;(0,f.default)("html, body").stop().animate({scrollTop:t-(r?n:0)},e)}}),(0,g.default)({onSmall:function(){return e(!1)},onMedium:function(){return e(!0)},onLarge:function(){return e(!0)}});var d=(0,m.toPropertyFromResize)(i);return u.default.combine([m.scroll$,d,l]).onValue(function(t){var e=s(t,3),a=e[0],n=e[1],r=e[2],o=100,i=n.map(function(t){return Object.assign({},t,{distance:a+r-t.top+o})}).reduce(function(t,e){return e.distance>-1&&e.distance<t.distance?e:t},{distance:1/0});(0,f.default)("nav a").each(function(t,e){var a=(0,f.default)(e).attr("href").replace("#","");(0,f.default)(e).toggleClass("is-current",a===i.id)})}),l}Object.defineProperty(a,"__esModule",{value:!0}),a.scrollBodyTo=void 0;var s=function(){function t(t,e){var a=[],n=!0,r=!1,o=void 0;try{for(var i,l=t[Symbol.iterator]();!(n=(i=l.next()).done)&&(a.push(i.value),!e||a.length!==e);n=!0);}catch(t){r=!0,o=t}finally{try{!n&&l.return&&l.return()}finally{if(r)throw o}}return a}return function(e,a){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,a);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();a.measureNav=r,a.default=l;var d=t("kefir"),u=n(d),c=t("jquery"),f=n(c),p=t("./Kefir.emitter.js"),h=n(p),m=t("./common.js"),v=t("./addBreakpointHandlers.js"),g=n(v),y=a.scrollBodyTo=function(){}},{"./Kefir.emitter.js":7,"./addBreakpointHandlers.js":8,"./common.js":9,jquery:"jquery",kefir:"kefir"}],13:[function(t,e,a){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(){function t(t){t.closest(".viz-section").css("min-height",t.height())}function e(){(0,i.default)(".viz-section__not-sticky").each(function(){t((0,i.default)(this))})}function a(t){(0,i.default)("html").hasClass("ipad")&&(0,i.default)("html").hasClass("safari")&&(t=!1,(0,i.default)(".chapter").css({"max-width":"600px",margin:"auto"}),(0,i.default)("body").addClass("is-stacked")),(0,i.default)("body").toggleClass("sticky",t),o.forEach(function(e){return e(t)}),g.reflow$.emit("toggling stickies")}(0,y.attachCalloutBoxToDom)({selector:".js-expandable-box",onAnimationFrame:function(){return g.reflow$.emit("location profile expanded/collapsed!")}}),(0,y.attachCalloutBoxToDom)({selector:".js-callout-box",expandable:!1});var n=(0,i.default)("meta[property='og:url']").attr("content");(0,i.default)(".js-twitter-link").each(function(t,e){var a="Aiming Higher: The 2017 Scorecard on State Health System Performance";(0,i.default)(e).attr("href","https://twitter.com/intent/tweet?text="+encodeURIComponent(a)+"&url="+encodeURIComponent(n))}),(0,i.default)(".js-facebook-link").each(function(t,e){(0,i.default)(e).attr("href","https://www.facebook.com/sharer/sharer.php?u="+n)}),(0,i.default)(".js-linkedin-link").each(function(t,e){var a="Aiming Higher: The 2017 Scorecard on State Health System Performance",r="Results from the Commonwealth Fund Scorecard on State Health System Performance";(0,i.default)(e).attr("href","https://www.linkedin.com/shareArticle?url="+n+"&title="+a+"&summary="+r+"&mini=true")}),(0,i.default)(".js-modal").each(function(t,e){var a=(0,i.default)(e).find(".js-modal-html");(0,i.default)(e).on("click",function(){(0,v.default)({html:a,aspectRatio:.75})})}),(0,i.default)(".js-footnote").each(function(t,e){(0,i.default)(e).removeClass("js-footnote").addClass("footnote");var a=(0,i.default)(e).find(".js-footnote__popup").remove(),n=(0,i.default)(e).find(".js-footnote__trigger").removeClass("js-footnote__trigger").addClass("footnote__trigger");n.on("click",function(t){t.preventDefault();var e=n.offset(),r=e.top-(0,i.default)(window).scrollTop(),o=(0,i.default)(window).height(),l=r>o/2,s={html:a,top:e.top+n.height()/2,left:e.left+n.width()/2,offset:-n.height()/2,triangle:l?"bottom":"top"};(0,h.default)(s)})});var r=(0,u.default)(),o=(0,i.default)(".viz-section__viz-holder").map(function(t,e){return(0,s.default)({element:e,topOffset$:r})}).get();(0,i.default)(window).on("resize",function(){e()}),e(),(0,f.default)({onSmall:function(){return a(!1)},onMedium:function(){return a(!1)},onLarge:function(){return a(!0)}}),(0,i.default)(document).ready(function(){(0,i.default)(".js-state-select").change(function(t){var e=(0,i.default)(".js-state-select option:selected").attr("data-url");(0,i.default)(".js-goto-state-page").attr("href",e)}),(0,i.default)(".js-state-select").change()})}Object.defineProperty(a,"__esModule",{value:!0}),a.default=r;var o=t("jquery"),i=n(o),l=t("./initStickyViz.js"),s=n(l),d=t("./initNav.js"),u=n(d),c=t("./addBreakpointHandlers.js"),f=n(c),p=t("./createPopup.js"),h=n(p),m=t("./createModal.js"),v=n(m),g=t("./common.js"),y=t("../components/CalloutBox.jsx")},{"../components/CalloutBox.jsx":1,"./addBreakpointHandlers.js":8,"./common.js":9,"./createModal.js":10,"./createPopup.js":11,"./initNav.js":12,"./initStickyViz.js":14,jquery:"jquery"}],14:[function(t,e,a){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t){function e(){(0,s.default)(n).css({position:"relative",top:"auto",right:"auto",bottom:"auto",left:"auto","max-height":"none"})}function a(t){m.emit(t)}var n=t.element,r=t.topOffset$,o=(0,d.createPositionStream)({element:n}),l=i.default.combine([o,r,v],function(t,e,a){
return Object.assign({},t,{maxHeight:a,topOffset:e+p})});return l.filterBy(m).onValue(function(t){var e=t.scroll,a=t.parentMeasures,r=t.elementMeasures,o=t.topOffset,i=t.maxHeight,l=a,d=r,u=e+o<l.top,c=e+o>l.bottom-d.height,f=!u&&!c,p=100*(1-h)+"%",m=l.width*(1-h);(0,s.default)(n).css({position:f?"fixed":"absolute",top:u?"0px":f?o+"px":"auto",right:f?l.vizOnLeft?l.right+m+"px":l.right+"px":l.vizOnLeft?p:"0",bottom:c?"0":"auto",left:f?l.vizOnLeft?l.left+"px":l.left+m+"px":l.vizOnLeft?"0":p,"max-height":f?i+"px":"none"})}),m.filterBy(m.map(function(t){return!t})).onValue(e),a}Object.defineProperty(a,"__esModule",{value:!0}),a.maxVizHeight$=void 0,a.default=r;var o=t("kefir"),i=n(o),l=t("jquery"),s=n(l),d=t("./common.js"),u=t("./initNav.js"),c=t("./Kefir.emitter.js"),f=n(c),p=10,h=.6,m=(0,f.default)(),v=a.maxVizHeight$=(0,d.toPropertyFromResize)(u.measureNav).map(function(t){return window.innerHeight-t-p}).combine(m,function(t,e){return e?t:1/0}).toProperty(function(){return 1/0})},{"./Kefir.emitter.js":7,"./common.js":9,"./initNav.js":12,jquery:"jquery",kefir:"kefir"}],15:[function(t,e,a){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){return function(a,n){var r=s.default.compose(s.default.test(new RegExp(a,"i")),t);n(s.default.filter(r,s.default.values(e)))}}function o(t,e){var a=r(function(t){return t.name},t);return function(n,r){var o=e[n];o?r([t[o.hrr]]):a(n,r)}}function i(t,e,a,n){function r(t){(0,u.default)(t.target).closest(".tt-menu").length||o()}function o(){(0,u.default)(t).removeClass("tt-open"),(0,u.default)(t).blur(),window.removeEventListener("touchstart",r,!0)}var i="";return(0,u.default)(t).typeahead({hint:!0,highlight:!0,minLength:0},{displayKey:e,limit:500,source:a}).on("typeahead:select",function(t,e,a){n(e)}).on("typeahead:open",function(e){(0,u.default)(t).addClass("tt-open"),window.addEventListener("touchstart",r,!0),i=(0,u.default)(this).val(),(0,u.default)(t).typeahead("val","")}).on("typeahead:close",function(e){""===(0,u.default)(this).val()&&i&&(0,u.default)(t).typeahead("val",i),i="",o()}),{setValue:function(e){i=e,(0,u.default)(t).typeahead("val",e)}}}Object.defineProperty(a,"__esModule",{value:!0}),a.simpleSource=r,a.zipHrrSource=o,a.createTypeAhead=i;var l=t("ramda"),s=n(l),d=t("jquery"),u=n(d);t("typeahead.js"),window.jquery=u.default},{jquery:"jquery",ramda:"ramda","typeahead.js":"typeahead.js"}],16:[function(t,e,a){"use strict";function n(){var t;this.version="1.2",this.browserType,this.browserVersion,this.mobile,this.browserVersionExtended=null;for(var e,a=!1,n=navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/BlackBerry/i)||navigator.userAgent.match(/iPhone|iPad|iPod/i)||navigator.userAgent.match(/Opera Mini/i)||navigator.userAgent.match(/IEMobile/i)||null,r=navigator.appName,o=navigator.userAgent,i=o.match(/(opera|chrome|safari|firefox|msie|trident|edge)\/?\s*(\.?\d+(\.\d+)*)/i),l=o.match(/(opera|chrome|safari|firefox|msie|trident|edge)\/?\s*(\.?\d+(\.\d+)*)/gi),s=0;s<l.length;s++)if(l[s].toLowerCase().indexOf("edge")>=0){var d=l[s].split("/"),u=d[0].toLowerCase(),c=d[1];a=!0}if(!a){i&&null!=(e=o.match(/version\/([\.\d]+)/i))&&(i[2]=e[1]),i=i?[i[1],i[2]]:[r,navigator.appVersion,"-?"];var u=i[0].toLowerCase(),c=i[1];"trident"==i[0].toLowerCase()&&(u="msie",c=o.match(/(rv)\:?(\.?\d+(\.\d+)*)/i),t=c[0].split(":"),c=c[1])}this.mobile=n,this.browserType=u,this.browserVersion=parseInt(c),this.browserVersionExtended=c}var n=new n;"undefined"!=typeof document.documentElement.classList?(document.documentElement.classList.add(n.browserType),document.documentElement.classList.add("v"+n.browserVersion),null!=n.mobile&&document.documentElement.classList.add(n.mobile.toString().toLowerCase())):(document.documentElement.className+=" "+n.browserType+" v"+n.browserVersion,null!=n.mobile&&(document.documentElement.className+=" "+n.mobile.toString().toLowerCase()))},{}],17:[function(t,e,a){"use strict";function n(t){var e=t.popup,a=t.top,n=t.left,r=t.offset,o=void 0===r?0:r,i=t.triangle,l=void 0===i?"bottom":i,s=t.triangleSize,d=t.flipToContain,u=void 0!==d&&d,c=l,f=e.offsetWidth,p=e.offsetHeight,h=e.parentNode,m=h.clientWidth,v=h.offsetHeight,g=a-p-s+o,y=a+s-o,w=n-f-s+o,b=n+s-o,j="bottom"===c?g:"top"===c?y:a-p/2,_="right"===c?w:"left"===c?b:n-f/2,x={top:-j,right:-(m-(_+f)),bottom:-(v-(j+p)),left:-_},L=j,k=_,C=0;return x.right>0&&("top"!==c&&"bottom"!==c||(k=_-x.right,C=x.right),"left"===c&&u&&(c="right",k=w)),x.left>0&&("top"!==c&&"bottom"!==c||(k=_+x.left,C=-x.left),"right"===c&&u&&(c="left",k=b)),x.bottom>0&&("left"!==c&&"right"!==c||(L=j-x.bottom,C=x.bottom),"top"===c&&u&&(c="bottom",L=g)),x.top>0&&("left"!==c&&"right"!==c||(L=j+x.top,C=-x.top),"bottom"===c&&u&&(c="top",L=y)),{realTop:j,realLeft:_,popupTop:L,popupLeft:k,overflow:x,triangleOffset:C,triangleSide:c}}Object.defineProperty(a,"__esModule",{value:!0}),a.default=n},{}],18:[function(t,e,a){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(){function t(t){return o?t===o?n.length+l:l-1:l}function e(e){return i.default.reduce(function(a,n){var r=a+t(n);return n===e?i.default.reduced(r-t(n)):r},0,n)}function a(){r=i.default.map(e,i.default.indexBy(i.default.identity,n))}var n=void 0,r=void 0,o=void 0,l=9,d=function(t){if("undefined"!=typeof r)return r[t]};return d.domain=function(t){return t?(n=t,a(),d):n},d.range=function(){return i.default.compose(i.default.sort(s.default.ascending),i.default.values)(r)},d.height=function(){return s.default.max(i.default.values(r))+t(i.default.last(n))},d.locationHeight=function(){return l},d.activeLocationHeight=function(){return n.length+l},d.activeLoc=function(t){return o=t,a(),d},d.totalHeight=function(){return n.length*l},d.rangeTop=function(){return d(i.default.head(n))},d.rangeMiddle=function(){return d.height()/2+d(n[0])},d.rangeBottom=function(){var e=i.default.last(n);return d(e)+t(e)},d}Object.defineProperty(a,"__esModule",{value:!0}),a.default=r;var o=t("ramda"),i=n(o),l=t("d3"),s=n(l)},{d3:"d3",ramda:"ramda"}],19:[function(t,e,a){"use strict";function n(t){return t.each(function(){this.parentNode.appendChild(this)})}function r(t){return t.each(function(){var t=this.parentNode.firstChild;t&&this.parentNode.insertBefore(this,t)})}Object.defineProperty(a,"__esModule",{value:!0}),a.moveToFront=n,a.moveToBack=r},{}],20:[function(t,e,a){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e.default=t,e}function r(t){return t&&t.__esModule?t:{default:t}}function o(t){function e(t){i=Object.assign({},s),Object.assign(s,t),n()}function a(t){var e=d.default.groupBy(function(t){return t.change.status},t.locations),a=e.improved?[0,e.improved.length]:[0,0],n=e.steady?[a[1],a[1]+e.steady.length]:[a[1],a[1]],r=e.worse?[n[1],n[1]+e.worse.length]:[n[1],n[1]];return{indId:t.indId,range:[0,r[1]],bars:[{type:"improved",range:a},{type:"steady",range:n},{type:"worse",range:r}],locations:t.locations}}function n(){function t(t){var e=l.default.select(this.parentNode).datum(),a=s.indicators[e.indId],n=(0,c.default)(this).closest(".indicator"),o=n.position().top+n.height(),i=(0,c.default)(this).closest("svg").offset().left-(0,c.default)(s.selector).offset().left,d=l.default.select((0,c.default)(this).closest("svg").find("rect.status."+t.type)[0]);d.transition().duration(200).attr("y",2).attr("rx",function(t){return 8}).attr("ry",function(t){return 8}).attr("height",16),r(a,e,t,[x((t.range[1]-t.range[0])/2+t.range[0])-1+i,o])}function n(){l.default.select(s.selector).selectAll("rect.status").transition().duration(200).attr("y",6).attr("rx",function(t){return 4}).attr("ry",function(t){return 4}).attr("height",8),o(),window.removeEventListener("touchstart",n,!0)}var u=_(s),f=function(t){return t[1]-t[0]},h=function(t){return s.indicators[t.indId].shortName},m=function(t){return f(t.bars[0].range)},y=(0,g.compare)(m,g.descending),w=(0,g.compare)(h,g.ascending),b=(0,g.composeComparators)([y,w]),j=d.default.compose(d.default.map(d.default.sort(b)),d.default.map(d.default.map(a)))(u);x.range([2,s.width-2]).domain(j.ACCESS[0].range);var L=p.selectAll("div.dimension").data(d.default.keys(j),d.default.identity),k=L.enter().append("div").attr("class","dimension");L.exit().remove(),k.append("div").attr("class","dimension-label").text(function(t){return v.dimensionNames[t]}).on("click",function(t,a){var n=s.selectedDimension===t?null:t;e({selectedDimension:n})}),i.selectedDimension!==s.selectedDimension&&L.each(function(t,e){var a=s.selectedDimension===t;a?(0,c.default)(this).find(".indicators").slideDown(250,s.afterSlide):(0,c.default)(this).find(".indicators").slideUp(250,s.afterSlide),(0,c.default)(this).toggleClass("is-expanded",a)}),k.append("div").attr("class","indicators").style({display:function(t,e){return 0===e?"block":"none"}});var C=L.selectAll(".indicators"),O=C.selectAll("div.indicator").data(function(t){return j[t]},function(t){return t.indId}),I=O.enter().append("div").attr("class","indicator");O.exit().remove(),I.append("div").attr({class:"indicator-label"}).text(function(t){return s.indicators[t.indId].shortName}),I.append("svg"),O.select("svg").attr("width",s.width).attr("height",20);var E=O.select("svg").selectAll("rect.status").data(function(t){return t.bars},function(t){return t.type});E.enter().append("rect").attr("class","status"),E.exit().remove();var M=10;E.attr("class",function(t){return"status "+t.type}).attr("x",function(t){return x(t.range[0])+("steady"===t.type?M/2:0)}).attr("width",function(t){return x(t.range[1])-x(t.range[0])-("steady"===t.type?M:0)}).attr("y",6).attr("height",8).attr("rx",function(t){return 4}).attr("ry",function(t){return 4});var D=O.select("svg").selectAll("rect.hover-target").data(function(t){return t.bars},function(t){return t.type});D.enter().append("rect").attr("class","hover-target").on("mouseenter",t).on("touchstart",function(e){t.call(this,e),window.addEventListener("touchstart",n,!0)}).on("mouseleave",n),D.exit().remove(),D.attr("x",function(t){return x(t.range[0])}).attr("width",function(t){return x(t.range[1])-x(t.range[0])}).attr("y",0).attr("height",20)}function r(t,e,a,n){var r=a.range[1]-a.range[0],o="improved"===a.type?"improved":"worse"===a.type?"worsened":"steady"===a.type?"had little or no change*":"",i="steady"===a.type?"<div class='indicator-overall__popup-note'>* Includes the number of local areas with no change or without sufficient data for this subpopulation to assess change over time</div>":"",l=(0,c.default)('\n                <div class="indicator-overall__popup">\n                    <span class="'+a.type+'"><strong>'+r+"</strong> HRRs "+o+"</span>\n                    out of "+e.locations.length+"\n                    "+i+"\n                </div>");u.setState({title:"",html:l,top:n[1],left:n[0],isHidden:!1})}function o(){u.hidePopup()}var i={selector:"",width:500,indicators:{},locations:{},cleanData:{},selectedDimension:Object.keys(v.dimensionNames)[0],afterSlide:function(){}},s=Object.assign({},i,t),u=(0,h.default)({container:s.selector,offset:0,triangle:"top",isHidden:!0,closeBtn:!1}),p=l.default.select(s.selector),m=(0,g.compare)(d.default.compose(d.default.prop(d.default.__,v.statusOrder),function(t){return t.change.status}),g.descending),y=(0,g.compare)(function(t){return t.change.changePct},g.descending),w=(0,g.compare)(function(t){return t.change.hasChange},g.ascending),b=(0,g.composeComparators)([m,y,w]),j=d.default.curry(function(t,e,a){return{indId:a.id,locations:d.default.compose(d.default.sort(b),d.default.map(function(t){return{locId:t.id,change:{changePct:v.directionCorrectedPercentChange(a,e[a.id][t.id]),status:v.status(e[a.id][t.id]),hasChange:v.hasChangeData(e[a.id][t.id])},data:e[a.id][t.id]}}),d.default.filter(v.notUsLocation),d.default.values)(t)}}),_=(0,f.createSelector)(function(t){return t.locations},function(t){return t.indicators},function(t){return t.cleanData},function(t,e,a){return d.default.compose(d.default.map(d.default.map(j(t,a))),d.default.groupBy(function(t){return t.dimension}),d.default.filter(v.isNotOverallIndicator),d.default.filter(v.indicatorHasHistoricalData(a)),d.default.values)(e)}),x=l.default.scale.linear();return n(),{setWidth:function(t){return e({width:t})}}}Object.defineProperty(a,"__esModule",{value:!0}),a.default=o;var i=t("d3"),l=r(i),s=t("ramda"),d=r(s),u=t("jquery"),c=r(u),f=t("reselect"),p=t("../page/createPopup.js"),h=r(p),m=t("../data/core.js"),v=n(m),g=t("../data/compare.js")},{"../data/compare.js":4,"../data/core.js":5,"../page/createPopup.js":11,d3:"d3",jquery:"jquery",ramda:"ramda",reselect:"reselect"}],21:[function(t,e,a){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(){return new Promise(function(t,e){s.default.csv(f).row(function(t){return{zip:t.zip,hrr:+t.hrr}}).get(function(a,n){a&&e(a),t(u.default.indexBy(u.default.prop("zip"),n))})})}function o(){var t=c.map(function(t){return fetch(t).then(function(t){return t.json()})});return t.push(r()),Promise.all(t).then(function(t){var e=i(t,4),a=e[0],n=e[1],r=e[2],o=e[3];return{cleanData:a,indicators:n,locations:r,zips:o}})}Object.defineProperty(a,"__esModule",{value:!0});var i=function(){function t(t,e){var a=[],n=!0,r=!1,o=void 0;try{for(var i,l=t[Symbol.iterator]();!(n=(i=l.next()).done)&&(a.push(i.value),!e||a.length!==e);n=!0);}catch(t){r=!0,o=t}finally{try{!n&&l.return&&l.return()}finally{if(r)throw o}}return a}return function(e,a){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,a);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();a.loadVizData=o;var l=t("d3"),s=n(l),d=t("ramda"),u=n(d),c=["data/data.json","data/indicators.json","data/locations.json"],f="data/zipcodes.csv"},{d3:"d3",ramda:"ramda"}],22:[function(t,e,a){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e.default=t,e}function r(t){return t&&t.__esModule?t:{default:t}}function o(t){function e(t){j=Object.assign({},_),Object.assign(_,t),!_.lock&&j.lock&&_.onUnlock(),_.activeLocationId&&window.addEventListener("touchstart",h,!0),r()}function a(t,e,a){return d.default.values(t).filter(m.notUsLocation).map(S(e,a))}function n(t){var e=d.default.groupBy(function(t){return t.change.status},t.indicators),a=["improved-full","improved-half","steady","worse-half","worse-full"],n=d.default.reduce(function(t,a){var n=e[a]?e[a].length:0,r=t.tally+n;return{tally:r,bars:t.bars.concat({type:a,range:[t.tally,r]})}},{tally:0,bars:[]},a),r=t.indicators.sort(function(t,e){var n=function(t){return a.indexOf(t.change.status)};return n(t)-n(e)});return Object.assign({},t,{range:[0,n.tally],bars:n.bars,indicators:r})}function r(){var t=_.activeLocationId,a=(0,y.default)().domain(R.map(function(t){return t.locId})).activeLoc(t),n=_.width-x.left-x.right,r=a.totalHeight(),f=a.locationHeight()-3,p=f/2,h=2*p+3,m=l.default.scale.linear().domain(R[0].range).range([0,n]),v=!1;k.attr("width",n+x.left+x.right).attr("height",r+x.top+x.bottom);var g=function(t){return a.domain()[l.default.bisect(a.range(),t[1])-1]||a.domain()[0]};k.on("mouseleave",function(){_.lock||e({activeLocationId:null})}),O.on("mousemove",function(a,n){if(!v&&!_.lock){var r=g(l.default.mouse(this));r!==t&&(v=!0,s(),e({activeLocationId:r}))}}).on("click",function(t,a){if(!_.activeLocationId){var n=g(l.default.mouse(this));e({activeLocationId:n})}});var j=O.selectAll("g.location").data(R,d.default.prop("locId"));j.enter().append("g").attr("class","location").append("circle").attr("class","location-dot"),j.exit().remove(),j.transition().duration(100).attr("transform",function(t,e){return"translate(0, "+a(t.locId)+")"}).style("opacity",function(e){return e.locId===t?0:1});var L=(j.selectAll(".location-dot").attr("r",p).attr("cx",-h).attr("cy",p).attr("opacity",function(t){return t.medicaidExpansion===!0?1:0}),j.selectAll("rect.status").data(function(t){return t.bars},d.default.prop("type")));L.enter().append("rect").attr("class","status"),L.exit().remove(),L.attr("class",function(t){return"status "+t.type}).transition().attr("x",function(t){return m(t.range[0])+1}).attr("y",0).attr("width",function(t){return Math.max(0,m(t.range[1])-m(t.range[0])-1)}).attr("height",a.locationHeight()-3).attr("rx",2).attr("ry",2).each("end",function(){v=!1});var C=O.select("g.active-location");t&&C.empty()?C=O.append("g").attr("class","active-location location-label"):C.empty()||t||C.remove();var I=O.select("path.close");if(I.empty()&&(I=O.append("path").attr("class","close").attr("d",b).attr("width",18).attr("height",18).style("display","none").on("click",function(){e({lock:!1})})),I.style("display","none"),t){var E,M,D,S;!function(){var n=d.default.find(function(e){return e.locId===t},R),r=m.range();P.rangeBands(r,.1).domain(n.indicators.map(d.default.prop("indId"))),E=C.select("text.label"),E.empty()&&(E=C.append("text").attr("class","label")),E.attr("x",(r[1]-r[0])/2+r[0]).attr("y",a(t)+14).attr("dy","1ex").text(_.locations[t].name);var f=18;M=C.selectAll("rect.indicator-dot").data(n.indicators,d.default.prop("indId")),M.enter().append("rect").attr("class","indicator-dot"),M.exit();var g=d.default.curry(function(e,n){var r=e?[-1,-2]:[0,0];return"translate("+(P(n.indId)+r[0])+", "+(a(t)+32+r[1])+")"+(e?"scale(1.2)":"")});M.attr("x",0).attr("y",0).attr("rx",4).attr("ry",4).attr("transform",g(!1)).attr("width",P.rangeBand()).attr("height",f).classed("improved-full",function(t){return"improved-full"===t.change.status}).classed("improved-half",function(t){return"improved-half"===t.change.status}).classed("steady",function(t){return"steady"===t.change.status}).classed("worse-half",function(t){return"worse-half"===t.change.status}).classed("worse-full",function(t){return"worse-full"===t.change.status}).classed("na",function(t){return d.default.isNil(t.data.years[0].value)}).style("fill",function(t){return d.default.isNil(t.data.years[0].value)?"url(#diagonal)":""}),D=C.select(".location-dot"),D.empty()&&(D=C.append("circle").attr("class","location-dot")),D.attr("r",2*p).attr("cx",-h).attr("cy",p+a(t)+32-2+f/2).attr("fill","#e8ba1a").attr("opacity",function(t){return n.medicaidExpansion===!0?1:0});var y=O.select("rect.hover-zone.indicator");I.attr("transform","translate("+(r[1]-20)+", "+(a(t)+6)+")").style("display",_.lock?"block":"none"),y.empty()&&(y=O.append("rect").attr("class","hover-zone indicator")),y.attr("fill","blue").attr("opacity",1),y.attr("x",r[0]).attr("y",a(t)).attr("width",r[1]-r[0]).attr("height",a.activeLocationHeight()-2).on("mousemove",function(){if(!v){var e=l.default.mouse(this),n=P.domain()[l.default.bisect(P.range(),e[0])-1]||P.domain()[0];if(n!==S){S=n,C.selectAll("rect.indicator-dot").attr("transform",g(!1));var r=o(C,S);r.attr("transform",g(!0));var s=(0,c.default)(this).closest("svg").offset().left-(0,c.default)(_.selector).offset().left,d=a(t)+x.top+a.activeLocationHeight()/2,u=-1*a.activeLocationHeight()/2,f=d<a.height()/2?"top":"bottom";i(_.indicators[S],r.datum(),[P(S)+P.rangeBand()/2+x.left+s,d],u,f)}}}).on("mouseleave",function(){var t=o(C,S);t.attr("transform",g(!1)),S=null,s()}).on("click",function(){e({lock:!0})}),(0,w.moveToFront)(y),(0,w.moveToFront)(I),_.lock?window.addEventListener("click",u,!0):window.removeEventListener("click",u,!0)}()}}function o(t,e){return t.selectAll("rect.indicator-dot").filter(function(t){return t.indId===e})}function i(t,e,a,n,r){var o=m.formatValue(t),i=(0,c.default)('\n            <div class="location-overall__popup">\n                <table>\n                    <tbody>\n                    <tr>'+(d.default.isNil(e.data.years[1].value)?"<td><em>Data not available for this location</em></td>":"<td><span>"+t.years[1]+'</span> <strong class="'+e.change.status+'">'+o(e.data.years[1].value,!0)+"</strong></td>"+(d.default.isNil(e.data.years[0].value)?"<td><em>Historic data not available</em></td>":"<td><span>"+t.years[0]+"</span> <strong>"+o(e.data.years[0].value,!0)+"</strong></td>"))+"</tr>\n                    </tbody>\n                </table>\n            </div>");L.setState({title:'<span class="indicator-label">'+t.longName+"</span>",html:i,top:a[1],left:a[0],isHidden:!1,offset:n,triangle:r}),window.addEventListener("touchstart",f,!0),window.removeEventListener("touchstart",h,!0)}function s(){L.hidePopup()}function u(t){var e=(0,c.default)(t.target).closest(".active-location").length>0;_.activeLocationId&&!e&&g()}function f(t){(0,c.default)(t.target).closest(_.selector).length||(s(),window.removeEventListener("touchstart",f,!0),window.addEventListener("touchstart",h,!0))}function h(t){(0,c.default)(t.target).closest(_.selector).length||(g(),window.removeEventListener("touchstart",h,!0))}function g(){e({activeLocationId:null,lock:!1})}var b="M9.442,6.983l3.044-3.036A1.731,1.731,0,1,0,10.036,1.5L6.993,4.537,3.952,1.5A1.731,1.731,0,0,0,1.5,3.943l3.04,3.039L1.5,10.019a1.731,1.731,0,0,0,2.449,2.445L6.991,9.428l3.042,3.039a1.731,1.731,0,0,0,2.45-2.445Z",j={selector:"",width:0,height:0,indicators:{},locations:{},cleanData:{},activeLocationId:null,lock:!1,onUnlock:function(){}},_=Object.assign({},j,t),x={top:10,right:10,bottom:10,left:25},L=(0,p.default)({container:_.selector,offset:-6,triangle:"top",isHidden:!0,closeBtn:!1}),k=l.default.select(_.selector).append("svg"),C=k.append("defs");C.append("marker").attr("id","arrow-overall").attr("markerWidth",10).attr("markerHeight",10).attr("refX",0).attr("refY",2).attr("orient","auto-start-reverse").attr("markerUnits","strokeWidth").append("path").attr("d","M0,0 L0,4 L3,2 z"),C.append("pattern").attr("id","diagonal").attr("patternUnits","userSpaceOnUse").attr("width",6).attr("height",6).append("path").attr("d","M-1,1 l 2,-2 M 0,6 l 6,-6 M 5,7 l 4,-4");var O=k.append("g").attr("transform","translate("+x.left+","+x.top+")"),I=(0,v.compare)(d.default.compose(d.default.prop(d.default.__,m.statusOrder),function(t){return t.change.status}),v.descending),E=(0,v.compare)(function(t){return t.change.changePct},v.descending),M=(0,v.compare)(function(t){return t.change.hasChange},v.ascending),D=(0,v.composeComparators)([I,E,M]),S=d.default.curry(function(t,e,a){return{locId:a.id,medicaidExpansion:a.medicaidExpansion,indicators:d.default.compose(d.default.sort(D),d.default.map(function(t){return{indId:t.id,change:{changePct:m.directionCorrectedPercentChange(t,e[t.id][a.id]),status:m.status(e[t.id][a.id]),hasChange:m.hasChangeData(e[t.id][a.id])},data:e[t.id][a.id]}}),d.default.filter(m.isNotOverallIndicator),d.default.values)(t)}}),P=l.default.scale.ordinal(),H=a(_.locations,_.indicators,_.cleanData),N=function(t){return t[1]-t[0]},T=function(t){return _.locations[t.locId].name},z=function(t){return N(t.bars[0].range)+N(t.bars[1].range)},A=(0,v.compare)(T,v.ascending),B=(0,v.compare)(z,v.descending),q=(0,v.composeComparators)([B,A]),R=d.default.compose(d.default.sort(q),d.default.map(n),d.default.values)(H);return r(),{setWidth:function(t){return e({width:t})},setActiveLocation:function(t){return e({activeLocationId:t,lock:!0})}}}Object.defineProperty(a,"__esModule",{value:!0}),a.default=o;var i=t("d3"),l=r(i),s=t("ramda"),d=r(s),u=t("jquery"),c=r(u),f=t("../page/createPopup.js"),p=r(f),h=t("../data/core.js"),m=n(h),v=t("../data/compare.js"),g=t("./collapsibleScale.js"),y=r(g),w=t("./d3Extensions.js")},{"../data/compare.js":4,"../data/core.js":5,"../page/createPopup.js":11,"./collapsibleScale.js":18,"./d3Extensions.js":19,d3:"d3",jquery:"jquery",ramda:"ramda"}]},{},[6]);
//# sourceMappingURL=index-generated.js.map
